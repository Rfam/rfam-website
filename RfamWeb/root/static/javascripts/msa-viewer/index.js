class DataLoader {
    /**
     * Load MSA data from API URL
     */
    static async loadMSAData(apiUrl) {
        try {
            const response = await fetch(apiUrl);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const jsonResponse = await response.json();
            // Check if the API returned an error
            if (jsonResponse.status === 'error') {
                throw new Error(jsonResponse.message || 'API returned an error');
            }
            // Extract the data from the API response
            const data = jsonResponse.data;
            if (!data) {
                throw new Error('No data in API response');
            }
            // Return the MSA data in the expected format
            const msaData = {
                sequences: data.sequences || [],
                consensus: data.consensus || undefined,
                notation: data.notation || undefined,
                sequenceCount: data.sequenceCount || (data.sequences || []).length
            };
            return msaData;
        }
        catch (error) {
            if (error instanceof Error) {
                throw new Error(`Failed to load MSA data: ${error.message}`);
            }
            throw new Error('Failed to load MSA data: Unknown error');
        }
    }
}

/**
 * Validate MSA data structure
 */
function validateMSAData(data) {
    if (!data || typeof data !== 'object') {
        return false;
    }
    if (!Array.isArray(data.sequences)) {
        return false;
    }
    // Check that all sequences are valid
    for (const sequence of data.sequences) {
        if (!validateMSASequence(sequence)) {
            return false;
        }
    }
    return true;
}
/**
 * Validate individual MSA sequence
 */
function validateMSASequence(sequence) {
    if (!sequence || typeof sequence !== 'object') {
        return false;
    }
    if (typeof sequence.name !== 'string' || sequence.name.length === 0) {
        return false;
    }
    if (typeof sequence.sequence !== 'string' || sequence.sequence.length === 0) {
        return false;
    }
    return true;
}

function extractUrl(label) {
    // Parse label format: URS0000D6CB1B_12908/1-56
    const match = label.match(/^(URS[A-F0-9]+)_(\d+)\/(.+)$/);
    if (match) {
        const [, ursId, taxonId] = match;
        return `https://rnacentral.org/rna/${ursId}/${taxonId}`;
    }
    else {
        const enaId = label.split('.')[0];
        return `https://www.ebi.ac.uk/ena/browser/view/${enaId}`;
    }
}
function handleLabelClick(event, componentElement, onUrlFound) {
    const target = event.target;
    // Only handle clicks that are:
    // 1. Inside a nightingale-msa element AND
    // 2. Either have active-label attribute or are within an element that has it
    const msaElement = target.closest('nightingale-msa');
    if (!msaElement) {
        return; // Not inside an MSA element at all
    }
    // Check if this click is on a label (has active-label attribute or is within one)
    const hasActiveLabel = target.hasAttribute('active-label') || target.closest('[active-label]');
    if (!hasActiveLabel) {
        return; // Not a label click
    }
    let labelText = target.textContent?.trim();
    // If no text content, check for active-label attribute
    if (!labelText && target.hasAttribute('active-label')) {
        labelText = target.getAttribute('active-label')?.trim();
    }
    // Also check parent elements for active-label
    if (!labelText) {
        let currentElement = target;
        while (currentElement && currentElement !== componentElement) {
            if (currentElement.hasAttribute('active-label')) {
                labelText = currentElement.getAttribute('active-label')?.trim();
                break;
            }
            currentElement = currentElement.parentElement;
        }
    }
    if (!labelText)
        return;
    const url = extractUrl(labelText);
    if (url) {
        if (onUrlFound) {
            onUrlFound(url, target);
        }
        else {
            // Default behavior: open in new tab
            window.open(url, '_blank', 'noopener,noreferrer');
        }
        event.preventDefault();
        event.stopPropagation();
    }
}

/**
 * Utility to load all nightingale components
 */
async function loadNightingaleComponents() {
    try {
        await Promise.all([
            Promise.resolve().then(function () { return index$4; }),
            Promise.resolve().then(function () { return index$3; }),
            Promise.resolve().then(function () { return index$2; }),
            Promise.resolve().then(function () { return index$1; }),
            Promise.resolve().then(function () { return index; })
        ]);
    }
    catch (error) {
        console.error('Failed to load nightingale components:', error);
        throw error;
    }
}

class BaseTrack {
    constructor(trackId, config, data) {
        this.trackId = trackId;
        this.config = config;
        this.data = data;
    }
    /**
     * Get the track element
     */
    getElement() {
        return this.element;
    }
    /**
     * Update configuration
     */
    updateConfig(newConfig) {
        this.config = { ...this.config, ...newConfig };
        this.update();
    }
    /**
     * Update data
     */
    updateData(newData) {
        this.data = { ...this.data, ...newData };
        this.update();
    }
    /**
     * Check if track has required data
     */
    hasRequiredData() {
        return !!this.data.msaData;
    }
    /**
     * Get common nightingale attributes
     */
    getNightingaleAttributes() {
        return {
            'length': this.config.sequenceLength.toString(),
            'display-start': this.config.displayStart.toString(),
            'display-end': this.config.displayEnd.toString(),
            'height': this.config.height.toString()
        };
    }
    /**
     * Apply attributes to an element
     */
    applyAttributes(element, attributes) {
        Object.entries(attributes).forEach(([key, value]) => {
            element.setAttribute(key, value);
        });
    }
    /**
     * Create label HTML
     */
    createLabel(text) {
        return `
      <div style="width: ${this.config.labelWidth}px">
        ${text}
      </div>
    `;
    }
}

class NavigationTrack extends BaseTrack {
    constructor(config, data) {
        super('navigation', config, data);
    }
    createHTML() {
        if (!this.hasRequiredData()) {
            return '';
        }
        return `
      <div style="display: flex; align-items: center;">
        <div style="width: ${this.config.labelWidth}px; flex-shrink: 0; display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 8px;">
          <div class="sequence-info">
            ${this.config.sequenceLength.toLocaleString()} positions
          </div>
          <div class="sequence-info" style="margin-top: 8px; margin-bottom: 4px;">
            ${this.data.msaData.sequenceCount ? this.data.msaData.sequenceCount.toLocaleString() : 0} sequences
          </div>
          <div class="zoom-controls">
            <button class="zoom-btn zoom-out-btn" title="Zoom out (Ctrl + mouse wheel down)">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 1a7 7 0 1 0 7 7 7 7 0 0 0-7-7zm0 1a6 6 0 1 1-6 6 6 6 0 0 1 6-6z"/>
                <path d="M5 7h6v2H5z"/>
              </svg>
            </button>
            <button class="zoom-btn zoom-in-btn" title="Zoom in (Ctrl + mouse wheel up)">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 1a7 7 0 1 0 7 7 7 7 0 0 0-7-7zm0 1a6 6 0 1 1-6 6 6 6 0 0 1 6-6z"/>
                <path d="M8 5v2H6v2h2v2h2V9h2V7H10V5H8z"/>
              </svg>
            </button>
          </div>
          <div class="conservation-legend" style="margin-top: 8px;">
            <div style="margin-bottom: 8px; text-align: center;">Conservation</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 3px;">
              <div style="display: flex; align-items: center; gap: 4px;">
                <div style="width: 14px; height: 12px; background-color: #6464ff; border: 1px solid #ccc;"></div>
                <span>> 0.8</span>
              </div>
              <div style="display: flex; align-items: center; gap: 4px;">
                <div style="width: 14px; height: 12px; background-color: #9da5ff; border: 1px solid #ccc;"></div>
                <span>> 0.6</span>
              </div>
              <div style="display: flex; align-items: center; gap: 4px;">
                <div style="width: 14px; height: 12px; background-color: #cccccc; border: 1px solid #ccc;"></div>
                <span>> 0.4</span>
              </div>
              <div style="display: flex; align-items: center; gap: 4px;">
                <div style="width: 14px; height: 12px; background-color: #ffffff; border: 1px solid #ccc;"></div>
                <span>< 0.4</span>
              </div>
            </div>
          </div>
        </div>
        <nightingale-navigation
          id="navigation-track"
          height="80"
          use-ctrl-to-zoom>
        </nightingale-navigation>
      </div>
    `;
    }
    setup(container) {
        this.element = container.querySelector('#navigation-track');
        if (!this.element) {
            console.error('Navigation track element not found');
            return;
        }
        this.setupNavigationTrack();
        this.setupZoomControls(container);
    }
    update(config, data) {
        if (config) {
            this.config = { ...this.config, ...config };
        }
        if (data) {
            this.data = { ...this.data, ...data };
        }
        if (this.element) {
            this.setupNavigationTrack();
        }
    }
    destroy() {
        this.element = undefined;
        this.navigationElement = undefined;
    }
    /**
     * Get the navigation element for zoom operations
     */
    getNavigationElement() {
        return this.navigationElement;
    }
    /**
     * Zoom in
     */
    zoomIn() {
        if (this.navigationElement) {
            this.navigationElement.zoomIn();
        }
    }
    /**
     * Zoom out
     */
    zoomOut() {
        if (this.navigationElement) {
            this.navigationElement.zoomOut();
        }
    }
    setupNavigationTrack() {
        if (!this.element)
            return;
        const nightingaleAttributes = this.getNightingaleAttributes();
        this.applyAttributes(this.element, {
            ...nightingaleAttributes,
            'height': '80',
            'use-ctrl-to-zoom': 'true'
        });
        this.navigationElement = this.element;
    }
    setupZoomControls(container) {
        const zoomInBtn = container.querySelector('.zoom-in-btn');
        const zoomOutBtn = container.querySelector('.zoom-out-btn');
        if (zoomInBtn) {
            zoomInBtn.addEventListener('click', () => this.zoomIn());
        }
        if (zoomOutBtn) {
            zoomOutBtn.addEventListener('click', () => this.zoomOut());
        }
    }
}

class LinksDataProcessor {
    /**
     * Generate base pair links from secondary structure consensus
     */
    static generateBasePairLinks(consensus) {
        const basePairs = [];
        const openBrackets = [];
        // Start positions from 2 instead of 1 to leave position 1 as buffer
        const positionOffset = 1;
        for (let i = 0; i < consensus.length; i++) {
            const char = consensus[i];
            const position = i + 1 + positionOffset; // Convert to 1-based position + buffer offset
            if (char === '<') {
                openBrackets.push(position);
            }
            else if (char === '>') {
                const openPos = openBrackets.pop();
                if (openPos !== undefined) {
                    const basePair = {
                        x: openPos,
                        y: position,
                        score: 1
                    };
                    basePairs.push(basePair);
                }
            }
        }
        // Always add buffer base pair at position 1
        if (basePairs.length > 0) {
            const bufferPair = {
                x: 1,
                y: 2,
                score: 0.9999824 // High score like in the example
            };
            basePairs.unshift(bufferPair); // Add at the beginning
        }
        return basePairs;
    }
    /**
     * Format base pairs for nightingale-links component based on the source code
     */
    static formatForNightingale(basePairs) {
        // Always add base pair at position 1 if we have base pairs
        const initialPair = {
            x: 1,
            y: 2,
            score: 1
        };
        basePairs = [initialPair, ...basePairs];
        // Format 1: String format (what nightingale-links expects)
        // Each line should be: "position1 position2 probability"
        const stringFormat = basePairs
            .map(bp => `${bp.x} ${bp.y} ${bp.score}`)
            .join('\n');
        // Format 2: Array format (alternative)
        const arrayFormat = basePairs.map(bp => [bp.x, bp.y, bp.score]);
        // Format 3: Direct contact object (if we want to bypass the parser)
        const contactObject = {
            contacts: {},
            maxNumberOfContacts: 1
        };
        // Build contacts object
        basePairs.forEach(bp => {
            if (!contactObject.contacts[bp.x]) {
                contactObject.contacts[bp.x] = new Set();
            }
            if (!contactObject.contacts[bp.y]) {
                contactObject.contacts[bp.y] = new Set();
            }
            contactObject.contacts[bp.x].add(bp.y);
            contactObject.contacts[bp.y].add(bp.x);
        });
        return [
            stringFormat,
            arrayFormat,
            contactObject
        ];
    }
}

class LinksTrack extends BaseTrack {
    constructor(config, data) {
        super('links', { ...config, height: 80 }, data);
    }
    createHTML() {
        if (!this.hasRequiredData() || !this.data.notation?.basePairs?.length) {
            return '';
        }
        return `
      <div style="display: flex; align-items: center;">
        <div style="width: ${this.config.labelWidth}px; flex-shrink: 0;">
          Interactive secondary structure
        </div>
        <div style="position: relative; flex: 1; overflow: hidden;">
          <nightingale-links
            id="secondary-structure-links-track"
            style="width: 100%; height: 100%;">
          </nightingale-links>
        </div>
      </div>
    `;
    }
    setup(container) {
        this.element = container.querySelector('#secondary-structure-links-track');
        if (!this.element) {
            console.error('Links track element not found');
            return;
        }
        this.setupNightingaleLinks();
    }
    update(config, data) {
        if (config) {
            this.config = { ...this.config, ...config };
        }
        if (data) {
            this.data = { ...this.data, ...data };
        }
        if (this.element) {
            this.setupNightingaleLinks();
        }
    }
    destroy() {
        this.element = undefined;
    }
    setupNightingaleLinks() {
        if (!this.element || !this.data.notation?.basePairs?.length) {
            console.log('No base pairs data available for links track');
            return;
        }
        const basePairs = this.data.notation.basePairs;
        const nightingaleAttributes = this.getNightingaleAttributes();
        this.applyAttributes(this.element, {
            ...nightingaleAttributes,
            'height': this.config.height.toString(),
            'min-distance': '0', // Don't filter by distance
            'min-probability': '0' // Don't filter by probability
        });
        // Get the formatted data for nightingale-links
        const dataFormats = LinksDataProcessor.formatForNightingale(basePairs);
        const formatNames = ['string', 'array', 'contactObject'];
        // Try each format
        for (let i = 0; i < dataFormats.length; i++) {
            try {
                // Use the 'contacts' property which is what nightingale-links expects
                this.element.contacts = dataFormats[i];
                break;
            }
            catch (error) {
                console.log(`Links ${formatNames[i]} format failed:`, error);
            }
        }
    }
}

class SequenceTrack extends BaseTrack {
    constructor(config, data) {
        super('sequence', { ...config, height: 50 }, data);
        this.label = config.label;
        this.dataSource = config.dataSource;
        this.sequenceName = config.sequenceName || config.label;
    }
    createHTML() {
        if (!this.hasRequiredData() || !this.getSequenceData()) {
            return '';
        }
        const trackId = `${this.dataSource}-sequence-track`;
        return `
      <div style="display: flex; align-items: center; ">
        <div style="width: ${this.config.labelWidth}px; flex-shrink: 0;">
          ${this.label}
        </div>
        <nightingale-sequence
          id="${trackId}">
        </nightingale-sequence>
      </div>
    `;
    }
    setup(container) {
        const trackId = `${this.dataSource}-sequence-track`;
        this.element = container.querySelector(`#${trackId}`);
        if (!this.element) {
            console.error(`${this.label} track element not found`);
            return;
        }
        this.setupSequenceElement();
    }
    update(config, data) {
        if (config) {
            this.config = { ...this.config, ...config };
            if (config.label !== undefined) {
                this.label = config.label;
            }
            if (config.dataSource !== undefined) {
                this.dataSource = config.dataSource;
            }
            if (config.sequenceName !== undefined) {
                this.sequenceName = config.sequenceName;
            }
        }
        if (data) {
            this.data = { ...this.data, ...data };
        }
        if (this.element) {
            this.setupSequenceElement();
        }
    }
    destroy() {
        this.element = undefined;
    }
    getSequenceData() {
        switch (this.dataSource) {
            case 'notation':
                return this.data.notation?.consensus;
            case 'consensus':
                return this.data.msaData?.consensus;
            default:
                return undefined;
        }
    }
    setupSequenceElement() {
        const sequenceData = this.getSequenceData();
        if (!this.element || !sequenceData)
            return;
        const sequence = {
            name: this.sequenceName,
            sequence: sequenceData
        };
        const nightingaleAttributes = this.getNightingaleAttributes();
        this.applyAttributes(this.element, {
            ...nightingaleAttributes,
            'font-size': '14',
            'font-family': 'Courier New, Monaco, Lucida Console, monospace',
            'margin-top': '2',
            'margin-bottom': '2'
        });
        this.element.data = sequence;
    }
}

class MSATrack extends BaseTrack {
    constructor(config, data) {
        super('msa', config, data);
    }
    createHTML() {
        if (!this.hasRequiredData()) {
            return '';
        }
        // For scrollbox, we'll create the MSA track directly and let the viewer handle scrollbox wrapping
        return `
      <nightingale-msa
        id="msa-track"
        style="width: 100%; display: block;"
        height="${this.config.height}"
        color-scheme="conservation"
        length="${this.config.sequenceLength}"
        display-start="${this.config.displayStart}"
        display-end="${this.config.displayEnd}"
        label-width="${this.config.labelWidth}"
        label-font-size="16"
        label-font-weight="600"
        use-ctrl-to-zoom>
      </nightingale-msa>
    `;
    }
    setup(container) {
        this.element = container.querySelector('#msa-track');
        if (!this.element) {
            console.error('MSA track element not found');
            return;
        }
        this.setupMSATrack();
    }
    update(config, data) {
        if (config) {
            this.config = { ...this.config, ...config };
        }
        if (data) {
            this.data = { ...this.data, ...data };
        }
        if (this.element) {
            this.setupMSATrack();
        }
    }
    destroy() {
        this.element = undefined;
    }
    setupMSATrack() {
        if (!this.element)
            return;
        const nightingaleAttributes = this.getNightingaleAttributes();
        this.applyAttributes(this.element, {
            ...nightingaleAttributes,
            'label-width': this.config.labelWidth.toString(),
            'label-font-size': '16',
            'label-font-weight': '600',
            'use-ctrl-to-zoom': 'true'
        });
        // Ensure the element is visible
        this.element.style.display = 'block';
        this.element.style.width = '100%';
    }
}

/**
 * Getters for MSAViewer properties
 */
class MSAViewerGetters {
    static getApiEndpoint(instance) {
        return instance._apiEndpoint;
    }
    static getIdentifier(instance) {
        return instance._identifier;
    }
    static getHeight(instance) {
        return instance._height;
    }
    static getWidth(instance) {
        return instance._width;
    }
    static getLabelWidth(instance) {
        return instance._labelWidth;
    }
}

/**
 * Setters for MSAViewer properties
 */
class MSAViewerSetters {
    static setApiEndpoint(instance, value) {
        instance._apiEndpoint = value;
        instance.updateApiUrl();
    }
    static setIdentifier(instance, value) {
        instance._identifier = value;
        instance.updateApiUrl();
    }
    static setHeight(instance, value) {
        instance._height = value;
        instance.updateTrackConfig({ height: value });
    }
    static setWidth(instance, value) {
        instance._width = value;
        instance.updateTrackConfig({ width: value });
    }
    static setLabelWidth(instance, value) {
        instance._labelWidth = value;
        instance.updateTrackConfig({ labelWidth: value });
    }
}

class MSAViewer extends HTMLElement {
    constructor() {
        super();
        this._loading = false;
        this._nightingaleLoaded = false;
        this._sequenceLength = 0;
        this._height = 400;
        this._width = 800;
        this._labelWidth = 200;
        this._displayStart = 1;
        this._displayEnd = 80;
        this.handleLabelClick = (event) => {
            handleLabelClick(event, this, (url) => {
                window.open(url, '_blank', 'noopener,noreferrer');
            });
        };
        this.className = 'msa-viewer';
        this.loadNightingale();
    }
    static get observedAttributes() {
        return ['api-endpoint', 'identifier', 'api-url', 'height', 'width', 'label-width'];
    }
    // Getters using external class
    get apiEndpoint() { return MSAViewerGetters.getApiEndpoint(this); }
    get identifier() { return MSAViewerGetters.getIdentifier(this); }
    get height() { return MSAViewerGetters.getHeight(this); }
    get width() { return MSAViewerGetters.getWidth(this); }
    get labelWidth() { return MSAViewerGetters.getLabelWidth(this); }
    // Setters using external class
    set apiEndpoint(value) { MSAViewerSetters.setApiEndpoint(this, value); }
    set identifier(value) { MSAViewerSetters.setIdentifier(this, value); }
    set height(value) { MSAViewerSetters.setHeight(this, value); }
    set width(value) { MSAViewerSetters.setWidth(this, value); }
    set labelWidth(value) { MSAViewerSetters.setLabelWidth(this, value); }
    // Zoom methods
    zoomIn() {
        this._navigationTrack?.zoomIn();
    }
    zoomOut() {
        this._navigationTrack?.zoomOut();
    }
    async loadNightingale() {
        try {
            await loadNightingaleComponents();
            this._nightingaleLoaded = true;
            if (this._data) {
                this.render();
            }
        }
        catch (error) {
            this._error = 'Failed to load MSA visualization library';
            this.render();
        }
    }
    // Public methods (needed by setters)
    updateApiUrl() {
        if (this._apiEndpoint && this._identifier) {
            const endpoint = this._apiEndpoint.replace(/\/$/, '');
            this._apiUrl = `${endpoint}/${this._identifier}`;
            this.loadDataFromApi();
        }
    }
    updateTrackConfig(config) {
        // For now, we'll re-render when config changes
        if (this._data) {
            this.render();
        }
    }
    async connectedCallback() {
        const apiEndpointAttr = this.getAttribute('api-endpoint');
        const identifierAttr = this.getAttribute('identifier');
        if (apiEndpointAttr && identifierAttr) {
            this.apiEndpoint = apiEndpointAttr;
            this.identifier = identifierAttr;
        }
    }
    disconnectedCallback() {
        // Clean up intersection observer
        if (this._scrollboxObserver) {
            this._scrollboxObserver.disconnect();
            this._scrollboxObserver = undefined;
        }
    }
    attributeChangedCallback(name, oldValue, newValue) {
        if (oldValue !== newValue) {
            switch (name) {
                case 'api-endpoint':
                    this.apiEndpoint = newValue;
                    break;
                case 'identifier':
                    this.identifier = newValue;
                    break;
                case 'height':
                    this.height = parseInt(newValue) || 400;
                    break;
                case 'width':
                    this.width = parseInt(newValue) || 800;
                    break;
                case 'label-width':
                    this.labelWidth = parseInt(newValue) || 200;
                    break;
            }
        }
    }
    async loadDataFromApi() {
        if (!this._apiUrl)
            return;
        this._loading = true;
        this._error = undefined;
        this.render();
        try {
            const data = await DataLoader.loadMSAData(this._apiUrl);
            if (validateMSAData(data)) {
                this._data = data;
                this._sequenceLength = Math.max(...data.sequences.map(seq => seq.sequence.length));
                // Always start at position 1 and set end based on sequence length
                this._displayStart = 1;
                this._displayEnd = this.getDefaultDisplayEnd(this._sequenceLength);
            }
            else {
                this._error = 'Invalid MSA data format';
            }
        }
        catch (error) {
            this._error = error instanceof Error ? error.message : 'Unknown error';
        }
        finally {
            this._loading = false;
            this.render();
        }
    }
    getDefaultDisplayEnd(sequenceLength, defaultValue = 80) {
        return Math.min(sequenceLength, defaultValue);
    }
    render() {
        if (this._loading) {
            this.innerHTML = '<div class="msa-loading">Loading...</div>';
            return;
        }
        if (this._error) {
            this.innerHTML = `<div class="msa-error">${this._error}</div>`;
            return;
        }
        if (!this._nightingaleLoaded) {
            this.innerHTML = '<div class="msa-loading">Loading components...</div>';
            return;
        }
        if (!this._data) {
            this.innerHTML = '<div class="msa-error">No data</div>';
            return;
        }
        this.renderTracks();
    }
    renderTracks() {
        if (!this._data)
            return;
        // Create track configuration
        const trackConfig = {
            height: this._height,
            width: this._width,
            labelWidth: this._labelWidth,
            sequenceLength: this._sequenceLength,
            displayStart: this._displayStart,
            displayEnd: this._displayEnd
        };
        const trackData = {
            msaData: this._data,
            notation: this._data.notation
        };
        // Create track instances
        this._navigationTrack = new NavigationTrack(trackConfig, trackData);
        this._msaTrack = new MSATrack(trackConfig, trackData);
        // Create secondary structure track if secondary structure data exists
        if (this._data.notation) {
            this._linksTrack = new LinksTrack(trackConfig, trackData);
            this._secondaryStructureTrack = new SequenceTrack({
                ...trackConfig,
                label: 'Secondary structure consensus',
                dataSource: 'notation',
                sequenceName: 'Notation'
            }, trackData);
        }
        // Create consensus track if consensus data exists
        if (this._data.consensus) {
            this._consensusTrack = new SequenceTrack({
                ...trackConfig,
                label: 'Consensus sequence',
                dataSource: 'consensus',
                sequenceName: 'Consensus'
            }, trackData);
        }
        // Generate HTML using track classes
        const navigationHTML = this._navigationTrack.createHTML();
        const linksHTML = this._linksTrack ? this._linksTrack.createHTML() : '';
        const secondaryStructureHTML = this._secondaryStructureTrack ? this._secondaryStructureTrack.createHTML() : '';
        const consensusHTML = this._consensusTrack ? this._consensusTrack.createHTML() : '';
        const msaHTML = this._msaTrack.createHTML();
        // Create single MSA track with all sequences in scrollbox
        const allSequences = this._data.sequences;
        // Single MSA track with all sequences
        const msaWithScrollbox = `
      <nightingale-scrollbox 
        id="msa-scrollbox" 
        root-margin="50px" 
        disable-scroll-with-ctrl
        style="width: 100%; display: block;">
        <nightingale-scrollbox-item id="msa-item-main">
          ${msaHTML}
        </nightingale-scrollbox-item>
      </nightingale-scrollbox>
    `;
        // Set up the main container with configurable width
        this.innerHTML = `
      <nightingale-manager style="width: ${this._width}px;">
        ${navigationHTML}
        ${linksHTML}
        ${secondaryStructureHTML}
        ${consensusHTML}
        ${msaWithScrollbox}
      </nightingale-manager>
    `;
        // Setup tracks after DOM is ready
        setTimeout(() => {
            const container = this.querySelector('nightingale-manager');
            if (container) {
                this._navigationTrack?.setup(container);
                this._linksTrack?.setup(container);
                this._secondaryStructureTrack?.setup(container);
                this._consensusTrack?.setup(container);
                this._msaTrack?.setup(container);
                // Set up MSA data for the single scrollbox item
                const scrollboxElement = container.querySelector('#msa-scrollbox');
                if (scrollboxElement) {
                    const msaElement = container.querySelector('#msa-track');
                    if (msaElement && allSequences.length > 0) {
                        msaElement.data = allSequences;
                    }
                }
                // Setup event delegation for label clicks
                this.setupEventDelegation();
            }
        }, 200);
    }
    setupEventDelegation() {
        this.removeEventListener('click', this.handleLabelClick);
        this.addEventListener('click', this.handleLabelClick);
    }
}
if (!customElements.get('msa-viewer')) {
    customElements.define('msa-viewer', MSAViewer);
}

function t(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function e$2(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return "m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)}function n$2(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return "a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const i$2=t=>(e,n)=>{void 0!==n?n.addInitializer((()=>{customElements.define(t,e);})):customElements.define(t,e);}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,r$2=globalThis,o$2=r$2.ShadowRoot&&(void 0===r$2.ShadyCSS||r$2.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$2=Symbol(),a$3=new WeakMap;let h$4=class h{constructor(t,e,n){if(this._$cssResult$=!0,n!==s$2)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e;}get styleSheet(){let t=this.o;const e=this.t;if(o$2&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=a$3.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&a$3.set(e,t));}return t}toString(){return this.cssText}};const l$5=o$2?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return (t=>new h$4("string"==typeof t?t:t+"",void 0,s$2))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:u$5,defineProperty:c$6,getOwnPropertyDescriptor:f$6,getOwnPropertyNames:d$6,getOwnPropertySymbols:p$6,getPrototypeOf:g$6}=Object,m$6=globalThis,v$6=m$6.trustedTypes,y$6=v$6?v$6.emptyScript:"",_$6=m$6.reactiveElementPolyfillSupport,w$6=(t,e)=>t,b$6={toAttribute(t,e){switch(e){case Boolean:t=t?y$6:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t);}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t);}catch(t){n=null;}}return n}},$$6=(t,e)=>!u$5(t,e),x$5={attribute:!0,type:String,converter:b$6,reflect:!1,hasChanged:$$6};Symbol.metadata??=Symbol("metadata"),m$6.litPropertyMetadata??=new WeakMap;let A$6 = class A extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t);}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=x$5){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(t,n,e);void 0!==i&&c$6(this.prototype,t,i);}}static getPropertyDescriptor(t,e,n){const{get:i,set:r}=f$6(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t;}};return {get(){return i?.call(this)},set(e){const o=i?.call(this);r.call(this,e),this.requestUpdate(t,o,n);},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??x$5}static _$Ei(){if(this.hasOwnProperty(w$6("elementProperties")))return;const t=g$6(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties);}static finalize(){if(this.hasOwnProperty(w$6("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(w$6("properties"))){const t=this.properties,e=[...d$6(t),...p$6(t)];for(const n of e)this.createProperty(n,t[n]);}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n);}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t);}this.elementStyles=this.finalizeStyles(this.styles);}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(l$5(t));}else void 0!==t&&e.push(l$5(t));return e}static _$Eu(t,e){const n=e.attribute;return !1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev();}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)));}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.();}removeController(t){this._$EO?.delete(t);}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t);}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return ((t,e)=>{if(o$2)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of e){const e=document.createElement("style"),i=r$2.litNonce;void 0!==i&&e.setAttribute("nonce",i),e.textContent=n.cssText,t.appendChild(e);}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()));}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()));}attributeChangedCallback(t,e,n){this._$AK(t,n);}_$EC(t,e){const n=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,n);if(void 0!==i&&!0===n.reflect){const r=(void 0!==n.converter?.toAttribute?n.converter:b$6).toAttribute(e,n.type);this._$Em=t,null==r?this.removeAttribute(i):this.setAttribute(i,r),this._$Em=null;}}_$AK(t,e){const n=this.constructor,i=n._$Eh.get(t);if(void 0!==i&&this._$Em!==i){const t=n.getPropertyOptions(i),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:b$6;this._$Em=i,this[i]=r.fromAttribute(e,t.type),this._$Em=null;}}requestUpdate(t,e,n){if(void 0!==t){if(n??=this.constructor.getPropertyOptions(t),!(n.hasChanged??$$6)(this[t],e))return;this.P(t,e,n);}!1===this.isUpdatePending&&(this._$ES=this._$ET());}P(t,e,n){this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t);}async _$ET(){this.isUpdatePending=!0;try{await this._$ES;}catch(t){Promise.reject(t);}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0;}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t)!0!==n.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],n);}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU();}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e);}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t);}_$EU(){this._$AL=new Map,this.isUpdatePending=!1;}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return !0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU();}updated(t){}firstUpdated(t){}};A$6.elementStyles=[],A$6.shadowRootOptions={mode:"open"},A$6[w$6("elementProperties")]=new Map,A$6[w$6("finalized")]=new Map,_$6?.({ReactiveElement:A$6}),(m$6.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const M$5={attribute:!0,type:String,converter:b$6,reflect:!1,hasChanged:$$6},S$6=(t=M$5,e,n)=>{const{kind:i,metadata:r}=n;let o=globalThis.litPropertyMetadata.get(r);if(void 0===o&&globalThis.litPropertyMetadata.set(r,o=new Map),o.set(n.name,t),"accessor"===i){const{name:i}=n;return {set(n){const r=e.get.call(this);e.set.call(this,n),this.requestUpdate(i,r,t);},init(e){return void 0!==e&&this.P(i,void 0,t),e}}}if("setter"===i){const{name:i}=n;return function(n){const r=this[i];e.call(this,n),this.requestUpdate(i,r,t);}}throw Error("Unsupported decorator location: "+i)};function E$6(t){return (e,n)=>"object"==typeof n?S$6(t,e,n):((t,e,n)=>{const i=e.hasOwnProperty(n);return e.constructor.createProperty(n,i?{...t,wrapped:!0}:t),i?Object.getOwnPropertyDescriptor(e,n):void 0})(t,e,n)}const k$5=(e,n)=>{class i extends e{constructor(){super(...arguments),this.width=null==n?void 0:n.width,this.height=null==n?void 0:n.height;}}return t([E$6({type:Number})],i.prototype,"width",void 0),t([E$6({type:Number,reflect:!0})],i.prototype,"height",void 0),i};function C$6(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function N$5(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function z$5(t){let e,n,i;function r(t,i,r=0,o=t.length){if(r<o){if(0!==e(i,i))return o;do{const e=r+o>>>1;n(t[e],i)<0?r=e+1:o=e;}while(r<o)}return r}return 2!==t.length?(e=C$6,n=(e,n)=>C$6(t(e),n),i=(e,n)=>t(e)-n):(e=t===C$6||t===N$5?t:P$6,n=t,i=t),{left:r,center:function(t,e,n=0,o=t.length){const s=r(t,e,n,o-1);return s>n&&i(t[s-1],e)>-i(t[s],e)?s-1:s},right:function(t,i,r=0,o=t.length){if(r<o){if(0!==e(i,i))return o;do{const e=r+o>>>1;n(t[e],i)<=0?r=e+1:o=e;}while(r<o)}return r}}}function P$6(){return 0}const T$5=z$5(C$6).right;z$5((function(t){return null===t?NaN:+t})).center;const R$6=Math.sqrt(50),H$5=Math.sqrt(10),O$6=Math.sqrt(2);function U$6(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=R$6?10:o>=H$5?5:o>=O$6?2:1;let a,h,l;return r<0?(l=Math.pow(10,-r)/s,a=Math.round(t*l),h=Math.round(e*l),a/l<t&&++a,h/l>e&&--h,l=-l):(l=Math.pow(10,r)*s,a=Math.round(t/l),h=Math.round(e/l),a*l<t&&++a,h*l>e&&--h),h<a&&.5<=n&&n<2?U$6(t,e,2*n):[a,h,l]}function D$5(t,e,n){return U$6(t=+t,e=+e,n=+n)[2]}var q$5={value:()=>{}};function j$5(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[];}return new B$5(i)}function B$5(t){this._=t;}function W$5(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function X$5(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=q$5,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}B$5.prototype=j$5.prototype={constructor:B$5,on:function(t,e){var n,i,r=this._,o=(i=r,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return {type:t,name:e}}))),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=o[s]).type)r[n]=X$5(r[n],t.name,e);else if(null==e)for(n in r)r[n]=X$5(r[n],t.name,null);return this}for(;++s<a;)if((n=(t=o[s]).type)&&(n=W$5(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new B$5(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r);},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n);}};var Y$5="http://www.w3.org/1999/xhtml",I$5={svg:"http://www.w3.org/2000/svg",xhtml:Y$5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function L$5(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),I$5.hasOwnProperty(e)?{space:I$5[e],local:t}:t}function V$5(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Y$5&&e.documentElement.namespaceURI===Y$5?e.createElement(t):e.createElementNS(n,t)}}function G$5(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function K$5(t){var e=L$5(t);return (e.local?G$5:V$5)(e)}function Z$5(){}function F$5(t){return null==t?Z$5:function(){return this.querySelector(t)}}function J$5(){return []}function Q$5(t){return null==t?J$5:function(){return this.querySelectorAll(t)}}function tt$5(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e;}}function et$5(t){return function(){return this.matches(t)}}function nt$5(t){return function(e){return e.matches(t)}}var it$5=Array.prototype.find;function rt$5(){return this.firstElementChild}var ot$5=Array.prototype.filter;function st$5(){return Array.from(this.children)}function at$5(t){return new Array(t.length)}function ht$5(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e;}function lt$5(t,e,n,i,r,o){for(var s,a=0,h=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],i[a]=s):n[a]=new ht$5(t,o[a]);for(;a<h;++a)(s=e[a])&&(r[a]=s);}function ut$5(t,e,n,i,r,o,s){var a,h,l,u=new Map,c=e.length,f=o.length,d=new Array(c);for(a=0;a<c;++a)(h=e[a])&&(d[a]=l=s.call(h,h.__data__,a,e)+"",u.has(l)?r[a]=h:u.set(l,h));for(a=0;a<f;++a)l=s.call(t,o[a],a,o)+"",(h=u.get(l))?(i[a]=h,h.__data__=o[a],u.delete(l)):n[a]=new ht$5(t,o[a]);for(a=0;a<c;++a)(h=e[a])&&u.get(d[a])===h&&(r[a]=h);}function ct$5(t){return t.__data__}function ft$5(t){return "object"==typeof t&&"length"in t?t:Array.from(t)}function dt$5(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function pt$5(t){return function(){this.removeAttribute(t);}}function gt$5(t){return function(){this.removeAttributeNS(t.space,t.local);}}function mt$5(t,e){return function(){this.setAttribute(t,e);}}function vt$5(t,e){return function(){this.setAttributeNS(t.space,t.local,e);}}function yt$5(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n);}}function _t$5(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n);}}function wt$5(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function bt$5(t){return function(){this.style.removeProperty(t);}}function $t$5(t,e,n){return function(){this.style.setProperty(t,e,n);}}function xt$5(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n);}}function At$5(t,e){return t.style.getPropertyValue(e)||wt$5(t).getComputedStyle(t,null).getPropertyValue(e)}function Mt$5(t){return function(){delete this[t];}}function St$5(t,e){return function(){this[t]=e;}}function Et$5(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n;}}function kt$5(t){return t.trim().split(/^|\s+/)}function Ct$5(t){return t.classList||new Nt$5(t)}function Nt$5(t){this._node=t,this._names=kt$5(t.getAttribute("class")||"");}function zt$5(t,e){for(var n=Ct$5(t),i=-1,r=e.length;++i<r;)n.add(e[i]);}function Pt$5(t,e){for(var n=Ct$5(t),i=-1,r=e.length;++i<r;)n.remove(e[i]);}function Tt$5(t){return function(){zt$5(this,t);}}function Rt$5(t){return function(){Pt$5(this,t);}}function Ht$5(t,e){return function(){(e.apply(this,arguments)?zt$5:Pt$5)(this,t);}}function Ot$5(){this.textContent="";}function Ut$5(t){return function(){this.textContent=t;}}function Dt$5(t){return function(){var e=t.apply(this,arguments);this.textContent=e??"";}}function qt$5(){this.innerHTML="";}function jt$5(t){return function(){this.innerHTML=t;}}function Bt$5(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??"";}}function Wt$5(){this.nextSibling&&this.parentNode.appendChild(this);}function Xt$5(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild);}function Yt$5(){return null}function It$5(){var t=this.parentNode;t&&t.removeChild(this);}function Lt$5(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vt$5(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Gt$5(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on;}}}function Kt$5(t,e,n){return function(){var i,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__);}}(e);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i];}}function Zt$5(t,e,n){var i=wt$5(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r);}function Ft$5(t,e){return function(){return Zt$5(this,t,e)}}function Jt$5(t,e){return function(){return Zt$5(this,t,e.apply(this,arguments))}}ht$5.prototype={constructor:ht$5,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Nt$5.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")));},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")));},contains:function(t){return this._names.indexOf(t)>=0}};var Qt$5=[null];function te$5(t,e){this._groups=t,this._parents=e;}function ee$5(){return new te$5([[document.documentElement]],Qt$5)}function ne$5(t){return "string"==typeof t?new te$5([[document.querySelector(t)]],[document.documentElement]):new te$5([[t]],Qt$5)}function ie$5(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return [t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return [t.pageX,t.pageY]}te$5.prototype=ee$5.prototype={constructor:te$5,select:function(t){"function"!=typeof t&&(t=F$5(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=e[r],h=a.length,l=i[r]=new Array(h),u=0;u<h;++u)(o=a[u])&&(s=t.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),l[u]=s);return new te$5(i,this._parents)},selectAll:function(t){t="function"==typeof t?tt$5(t):Q$5(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s,a=e[o],h=a.length,l=0;l<h;++l)(s=a[l])&&(i.push(t.call(s,s.__data__,l,a)),r.push(s));return new te$5(i,r)},selectChild:function(t){return this.select(null==t?rt$5:function(t){return function(){return it$5.call(this.children,t)}}("function"==typeof t?t:nt$5(t)))},selectChildren:function(t){return this.selectAll(null==t?st$5:function(t){return function(){return ot$5.call(this.children,t)}}("function"==typeof t?t:nt$5(t)))},filter:function(t){"function"!=typeof t&&(t=et$5(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,h=i[r]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&h.push(o);return new te$5(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,ct$5);var n,i=e?ut$5:lt$5,r=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var s=o.length,a=new Array(s),h=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],f=o[u],d=f.length,p=ft$5(t.call(c,c&&c.__data__,u,r)),g=p.length,m=h[u]=new Array(g),v=a[u]=new Array(g);i(c,f,m,v,l[u]=new Array(d),p,e);for(var y,_,w=0,b=0;w<g;++w)if(y=m[w]){for(w>=b&&(b=w+1);!(_=v[b])&&++b<g;);y._next=_||null;}}return (a=new te$5(a,r))._enter=h,a._exit=l,a},enter:function(){return new te$5(this._enter||this._groups.map(at$5),this._parents)},exit:function(){return new te$5(this._exit||this._groups.map(at$5),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return "function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),h=0;h<s;++h)for(var l,u=n[h],c=i[h],f=u.length,d=a[h]=new Array(f),p=0;p<f;++p)(l=u[p]||c[p])&&(d[p]=l);for(;h<r;++h)a[h]=n[h];return new te$5(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=dt$5);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],h=a.length,l=r[o]=new Array(h),u=0;u<h;++u)(s=a[u])&&(l[u]=s);l.sort(e);}return new te$5(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return !this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],s=0,a=o.length;s<a;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this},attr:function(t,e){var n=L$5(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?gt$5:pt$5:"function"==typeof e?n.local?_t$5:yt$5:n.local?vt$5:mt$5)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?bt$5:"function"==typeof e?xt$5:$t$5)(t,e,n??"")):At$5(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Mt$5:"function"==typeof e?Et$5:St$5)(t,e)):this.node()[t]},classed:function(t,e){var n=kt$5(t+"");if(arguments.length<2){for(var i=Ct$5(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return !1;return !0}return this.each(("function"==typeof e?Ht$5:e?Tt$5:Rt$5)(n,e))},text:function(t){return arguments.length?this.each(null==t?Ot$5:("function"==typeof t?Dt$5:Ut$5)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?qt$5:("function"==typeof t?Bt$5:jt$5)(t)):this.node().innerHTML},raise:function(){return this.each(Wt$5)},lower:function(){return this.each(Xt$5)},append:function(t){var e="function"==typeof t?t:K$5(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:K$5(t),i=null==e?Yt$5:"function"==typeof e?e:F$5(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(It$5)},clone:function(t){return this.select(t?Vt$5:Lt$5)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?Kt$5:Gt$5,i=0;i<s;++i)this.each(a(o[i],e,n));return this}var a=this.node().__on;if(a)for(var h,l=0,u=a.length;l<u;++l)for(i=0,h=a[l];i<s;++i)if((r=o[i]).type===h.type&&r.name===h.name)return h.value},dispatch:function(t,e){return this.each(("function"==typeof e?Jt$5:Ft$5)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,s=r.length;o<s;++o)(i=r[o])&&(yield i);}};const re$5={capture:!0,passive:!1};function oe$5(t){t.preventDefault(),t.stopImmediatePropagation();}function se$5(t,e,n){t.prototype=e.prototype=n,n.constructor=t;}function ae$5(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function he$5(){}var le$5=.7,ue$5=1/le$5,ce$5="\\s*([+-]?\\d+)\\s*",fe$5="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",de$5="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pe$5=/^#([0-9a-f]{3,8})$/,ge$5=new RegExp(`^rgb\\(${ce$5},${ce$5},${ce$5}\\)$`),me$5=new RegExp(`^rgb\\(${de$5},${de$5},${de$5}\\)$`),ve$5=new RegExp(`^rgba\\(${ce$5},${ce$5},${ce$5},${fe$5}\\)$`),ye$5=new RegExp(`^rgba\\(${de$5},${de$5},${de$5},${fe$5}\\)$`),_e$5=new RegExp(`^hsl\\(${fe$5},${de$5},${de$5}\\)$`),we$5=new RegExp(`^hsla\\(${fe$5},${de$5},${de$5},${fe$5}\\)$`),be$5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function $e$5(){return this.rgb().formatHex()}function xe$5(){return this.rgb().formatRgb()}function Ae$5(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pe$5.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Me$5(e):3===n?new ke$5(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Se$5(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Se$5(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ge$5.exec(t))?new ke$5(e[1],e[2],e[3],1):(e=me$5.exec(t))?new ke$5(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ve$5.exec(t))?Se$5(e[1],e[2],e[3],e[4]):(e=ye$5.exec(t))?Se$5(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=_e$5.exec(t))?Re$5(e[1],e[2]/100,e[3]/100,1):(e=we$5.exec(t))?Re$5(e[1],e[2]/100,e[3]/100,e[4]):be$5.hasOwnProperty(t)?Me$5(be$5[t]):"transparent"===t?new ke$5(NaN,NaN,NaN,0):null}function Me$5(t){return new ke$5(t>>16&255,t>>8&255,255&t,1)}function Se$5(t,e,n,i){return i<=0&&(t=e=n=NaN),new ke$5(t,e,n,i)}function Ee$5(t,e,n,i){return 1===arguments.length?function(t){return t instanceof he$5||(t=Ae$5(t)),t?new ke$5((t=t.rgb()).r,t.g,t.b,t.opacity):new ke$5}(t):new ke$5(t,e,n,i??1)}function ke$5(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i;}function Ce$5(){return `#${Te$5(this.r)}${Te$5(this.g)}${Te$5(this.b)}`}function Ne$5(){const t=ze$5(this.opacity);return `${1===t?"rgb(":"rgba("}${Pe$5(this.r)}, ${Pe$5(this.g)}, ${Pe$5(this.b)}${1===t?")":`, ${t})`}`}function ze$5(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Pe$5(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Te$5(t){return ((t=Pe$5(t))<16?"0":"")+t.toString(16)}function Re$5(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Oe$5(t,e,n,i)}function He$5(t){if(t instanceof Oe$5)return new Oe$5(t.h,t.s,t.l,t.opacity);if(t instanceof he$5||(t=Ae$5(t)),!t)return new Oe$5;if(t instanceof Oe$5)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,h=(o+r)/2;return a?(s=e===o?(n-i)/a+6*(n<i):n===o?(i-e)/a+2:(e-n)/a+4,a/=h<.5?o+r:2-o-r,s*=60):a=h>0&&h<1?0:s,new Oe$5(s,a,h,t.opacity)}function Oe$5(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i;}function Ue$5(t){return (t=(t||0)%360)<0?t+360:t}function De$5(t){return Math.max(0,Math.min(1,t||0))}function qe$5(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}se$5(he$5,Ae$5,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:$e$5,formatHex:$e$5,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return He$5(this).formatHsl()},formatRgb:xe$5,toString:xe$5}),se$5(ke$5,Ee$5,ae$5(he$5,{brighter(t){return t=null==t?ue$5:Math.pow(ue$5,t),new ke$5(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?le$5:Math.pow(le$5,t),new ke$5(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ke$5(Pe$5(this.r),Pe$5(this.g),Pe$5(this.b),ze$5(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ce$5,formatHex:Ce$5,formatHex8:function(){return `#${Te$5(this.r)}${Te$5(this.g)}${Te$5(this.b)}${Te$5(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ne$5,toString:Ne$5})),se$5(Oe$5,(function(t,e,n,i){return 1===arguments.length?He$5(t):new Oe$5(t,e,n,i??1)}),ae$5(he$5,{brighter(t){return t=null==t?ue$5:Math.pow(ue$5,t),new Oe$5(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?le$5:Math.pow(le$5,t),new Oe$5(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new ke$5(qe$5(t>=240?t-240:t+120,r,i),qe$5(t,r,i),qe$5(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Oe$5(Ue$5(this.h),De$5(this.s),De$5(this.l),ze$5(this.opacity))},displayable(){return (0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ze$5(this.opacity);return `${1===t?"hsl(":"hsla("}${Ue$5(this.h)}, ${100*De$5(this.s)}%, ${100*De$5(this.l)}%${1===t?")":`, ${t})`}`}}));var je$5=t=>()=>t;function Be$5(t){return 1==(t=+t)?We$5:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):je$5(isNaN(e)?n:e)}}function We$5(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):je$5(isNaN(t)?e:t)}var Xe$5=function t(e){var n=Be$5(e);function i(t,e){var i=n((t=Ee$5(t)).r,(e=Ee$5(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),s=We$5(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function Ye$5(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function Ie$5(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),s=new Array(i);for(n=0;n<r;++n)o[n]=Je$5(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=o[n](t);return s}}function Le$5(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Ve$5(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ge$5(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Je$5(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var Ke$5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ze$5=new RegExp(Ke$5.source,"g");function Fe$5(t,e){var n,i,r,o=Ke$5.lastIndex=Ze$5.lastIndex=0,s=-1,a=[],h=[];for(t+="",e+="";(n=Ke$5.exec(t))&&(i=Ze$5.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,h.push({i:s,x:Ve$5(n,i)})),o=Ze$5.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,i=0;i<e;++i)a[(n=h[i]).i]=n.x(t);return a.join("")})}function Je$5(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?je$5(e):("number"===r?Ve$5:"string"===r?(n=Ae$5(e))?(e=n,Xe$5):Fe$5:e instanceof Ae$5?Xe$5:e instanceof Date?Le$5:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?Ie$5:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ge$5:Ve$5:Ye$5))(t,e)}function Qe$5(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var tn$5,en$5=180/Math.PI,nn$5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rn$5(t,e,n,i,r,o){var s,a,h;return (s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(h=t*n+e*i)&&(n-=t*h,i-=e*h),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,h/=a),t*i<e*n&&(t=-t,e=-e,h=-h,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*en$5,skewX:Math.atan(h)*en$5,scaleX:s,scaleY:a}}function on$5(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],h=[];return o=t(o),s=t(s),function(t,i,r,o,s,a){if(t!==r||i!==o){var h=s.push("translate(",null,e,null,n);a.push({i:h-4,x:Ve$5(t,r)},{i:h-2,x:Ve$5(i,o)});}else (r||o)&&s.push("translate("+r+e+o+n);}(o.translateX,o.translateY,s.translateX,s.translateY,a,h),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Ve$5(t,e)})):e&&n.push(r(n)+"rotate("+e+i);}(o.rotate,s.rotate,a,h),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Ve$5(t,e)}):e&&n.push(r(n)+"skewX("+e+i);}(o.skewX,s.skewX,a,h),function(t,e,n,i,o,s){if(t!==n||e!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:Ve$5(t,n)},{i:a-2,x:Ve$5(e,i)});}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")");}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,h),o=s=null,function(t){for(var e,n=-1,i=h.length;++n<i;)a[(e=h[n]).i]=e.x(t);return a.join("")}}}var sn$5=on$5((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn$5:rn$5(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),an$5=on$5((function(t){return null==t?nn$5:(tn$5||(tn$5=document.createElementNS("http://www.w3.org/2000/svg","g")),tn$5.setAttribute("transform",t),(t=tn$5.transform.baseVal.consolidate())?rn$5((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn$5)}),", ",")",")");function hn$5(t){return ((t=Math.exp(t))+1/t)/2}var ln$5,un$5,cn$5=function t(e,n,i){function r(t,r){var o,s,a=t[0],h=t[1],l=t[2],u=r[0],c=r[1],f=r[2],d=u-a,p=c-h,g=d*d+p*p;if(g<1e-12)s=Math.log(f/l)/e,o=function(t){return [a+t*d,h+t*p,l*Math.exp(e*t*s)]};else {var m=Math.sqrt(g),v=(f*f-l*l+i*g)/(2*l*n*m),y=(f*f-l*l-i*g)/(2*f*n*m),_=Math.log(Math.sqrt(v*v+1)-v),w=Math.log(Math.sqrt(y*y+1)-y);s=(w-_)/e,o=function(t){var i,r=t*s,o=hn$5(_),u=l/(n*m)*(o*(i=e*r+_,((i=Math.exp(2*i))-1)/(i+1))-function(t){return ((t=Math.exp(t))-1/t)/2}(_));return [a+u*d,h+u*p,l*o/hn$5(e*r+_)]};}return o.duration=1e3*s*e/Math.SQRT2,o}return r.rho=function(e){var n=Math.max(.001,+e),i=n*n;return t(n,i,i*i)},r}(Math.SQRT2,2,4),fn$5=0,dn$5=0,pn$5=0,gn$5=0,mn$5=0,vn$5=0,yn$5="object"==typeof performance&&performance.now?performance:Date,_n$5="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17);};function wn$5(){return mn$5||(_n$5(bn$5),mn$5=yn$5.now()+vn$5)}function bn$5(){mn$5=0;}function $n$5(){this._call=this._time=this._next=null;}function xn$5(t,e,n){var i=new $n$5;return i.restart(t,e,n),i}function An$5(){mn$5=(gn$5=yn$5.now())+vn$5,fn$5=dn$5=0;try{!function(){wn$5(),++fn$5;for(var t,e=ln$5;e;)(t=mn$5-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fn$5;}();}finally{fn$5=0,function(){var t,e,n=ln$5,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ln$5=e);un$5=t,Sn$5(i);}(),mn$5=0;}}function Mn$5(){var t=yn$5.now(),e=t-gn$5;e>1e3&&(vn$5-=e,gn$5=t);}function Sn$5(t){fn$5||(dn$5&&(dn$5=clearTimeout(dn$5)),t-mn$5>24?(t<1/0&&(dn$5=setTimeout(An$5,t-yn$5.now()-vn$5)),pn$5&&(pn$5=clearInterval(pn$5))):(pn$5||(gn$5=yn$5.now(),pn$5=setInterval(Mn$5,1e3)),fn$5=1,_n$5(An$5)));}function En$5(t,e,n){var i=new $n$5;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e);}),e,n),i}$n$5.prototype=xn$5.prototype={constructor:$n$5,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?wn$5():+n)+(null==e?0:+e),this._next||un$5===this||(un$5?un$5._next=this:ln$5=this,un$5=this),this._call=t,this._time=n,Sn$5();},stop:function(){this._call&&(this._call=null,this._time=1/0,Sn$5());}};var kn$5=j$5("start","end","cancel","interrupt"),Cn$5=[];function Nn$5(t,e,n,i,r,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay);}function s(o){var l,u,c,f;if(1!==n.state)return h();for(l in r)if((f=r[l]).name===n.name){if(3===f.state)return En$5(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[l]):+l<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[l]);}if(En$5((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o));})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(c=n.tween.length),l=0,u=-1;l<c;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1;}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(h),n.state=5,1),o=-1,s=i.length;++o<s;)i[o].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),h());}function h(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition;}r[e]=n,n.timer=xn$5(o,0,n.time);}(t,n,{name:e,index:i,group:r,on:kn$5,tween:Cn$5,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0});}function zn$5(t,e){var n=Tn$5(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Pn$5(t,e){var n=Tn$5(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Tn$5(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Rn$5(t,e){var n,i,r,o=t.__transition,s=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete t.__transition;}}function Hn$5(t,e){var n,i;return function(){var r=Pn$5(this,t),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}r.tween=i;}}function On$5(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Pn$5(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},h=0,l=r.length;h<l;++h)if(r[h].name===e){r[h]=a;break}h===l&&r.push(a);}o.tween=r;}}function Un$5(t,e,n){var i=t._id;return t.each((function(){var t=Pn$5(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments);})),function(t){return Tn$5(t,i).value[e]}}function Dn$5(t,e){var n;return ("number"==typeof e?Ve$5:e instanceof Ae$5?Xe$5:(n=Ae$5(e))?(e=n,Xe$5):Fe$5)(t,e)}function qn$5(t){return function(){this.removeAttribute(t);}}function jn$5(t){return function(){this.removeAttributeNS(t.space,t.local);}}function Bn$5(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===i?r:r=e(i=s,n)}}function Wn$5(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===i?r:r=e(i=s,n)}}function Xn$5(t,e,n){var i,r,o;return function(){var s,a,h=n(this);if(null!=h)return (s=this.getAttribute(t))===(a=h+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,h));this.removeAttribute(t);}}function Yn$5(t,e,n){var i,r,o;return function(){var s,a,h=n(this);if(null!=h)return (s=this.getAttributeNS(t.space,t.local))===(a=h+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,h));this.removeAttributeNS(t.space,t.local);}}function In$5(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n));}}(t,r)),n}return r._value=e,r}function Ln$5(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n));}}(t,r)),n}return r._value=e,r}function Vn$5(t,e){return function(){zn$5(this,t).delay=+e.apply(this,arguments);}}function Gn$5(t,e){return e=+e,function(){zn$5(this,t).delay=e;}}function Kn$5(t,e){return function(){Pn$5(this,t).duration=+e.apply(this,arguments);}}function Zn$5(t,e){return e=+e,function(){Pn$5(this,t).duration=e;}}var Fn$5=ee$5.prototype.constructor;function Jn$5(t){return function(){this.style.removeProperty(t);}}var Qn$5=0;function ti$3(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i;}function ei$3(){return ++Qn$5}var ni$3=ee$5.prototype;ti$3.prototype={constructor:ti$3,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=F$5(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a,h,l=i[s],u=l.length,c=o[s]=new Array(u),f=0;f<u;++f)(a=l[f])&&(h=t.call(a,a.__data__,f,l))&&("__data__"in a&&(h.__data__=a.__data__),c[f]=h,Nn$5(c[f],e,n,f,c,Tn$5(a,n)));return new ti$3(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Q$5(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var h,l=i[a],u=l.length,c=0;c<u;++c)if(h=l[c]){for(var f,d=t.call(h,h.__data__,c,l),p=Tn$5(h,n),g=0,m=d.length;g<m;++g)(f=d[g])&&Nn$5(f,e,n,g,d,p);o.push(d),s.push(h);}return new ti$3(o,s,e,n)},selectChild:ni$3.selectChild,selectChildren:ni$3.selectChildren,filter:function(t){"function"!=typeof t&&(t=et$5(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,h=i[r]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&h.push(o);return new ti$3(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var h,l=e[a],u=n[a],c=l.length,f=s[a]=new Array(c),d=0;d<c;++d)(h=l[d]||u[d])&&(f[d]=h);for(;a<i;++a)s[a]=e[a];return new ti$3(s,this._parents,this._name,this._id)},selection:function(){return new Fn$5(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ei$3(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],h=a.length,l=0;l<h;++l)if(s=a[l]){var u=Tn$5(s,e);Nn$5(s,t,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease});}return new ti$3(i,this._parents,t,n)},call:ni$3.call,nodes:ni$3.nodes,node:ni$3.node,size:ni$3.size,empty:ni$3.empty,each:ni$3.each,on:function(t,e){var n=this._id;return arguments.length<2?Tn$5(this.node(),n).on.on(t):this.each(function(t,e,n){var i,r,o=function(t){return (t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?zn$5:Pn$5;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r;}}(n,t,e))},attr:function(t,e){var n=L$5(t),i="transform"===n?an$5:Dn$5;return this.attrTween(t,"function"==typeof e?(n.local?Yn$5:Xn$5)(n,i,Un$5(this,"attr."+t,e)):null==e?(n.local?jn$5:qn$5)(n):(n.local?Wn$5:Bn$5)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return (n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=L$5(t);return this.tween(n,(i.local?In$5:Ln$5)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?sn$5:Dn$5;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=At$5(this,t),s=(this.style.removeProperty(t),At$5(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}(t,i)).on("end.style."+t,Jn$5(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,o;return function(){var s=At$5(this,t),a=n(this),h=a+"";return null==a&&(this.style.removeProperty(t),h=a=At$5(this,t)),s===h?null:s===i&&h===r?o:(r=h,o=e(i=s,a))}}(t,i,Un$5(this,"style."+t,e))).each(function(t,e){var n,i,r,o,s="style."+e,a="end."+s;return function(){var h=Pn$5(this,t),l=h.on,u=null==h.value[s]?o||(o=Jn$5(e)):void 0;l===n&&r===u||(i=(n=l).copy()).on(a,r=u),h.on=i;}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,o=n+"";return function(){var s=At$5(this,t);return s===o?null:s===i?r:r=e(i=s,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return (i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&function(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n);}}(t,o,n)),i}return o._value=e,o}(t,e,n??""))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=e??"";}}(Un$5(this,"text",t)):function(t){return function(){this.textContent=t;}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return (e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){return function(e){this.textContent=t.call(this,e);}}(i)),e}return i._value=t,i}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this);}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Tn$5(this.node(),n).tween,o=0,s=r.length;o<s;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?Hn$5:On$5)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Vn$5:Gn$5)(e,t)):Tn$5(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Kn$5:Zn$5)(e,t)):Tn$5(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Pn$5(this,t).ease=e;}}(e,t)):Tn$5(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Pn$5(this,t).ease=n;}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(o,s){var a={value:s},h={value:function(){0==--r&&o();}};n.each((function(){var n=Pn$5(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(h)),n.on=e;})),0===r&&o();}))},[Symbol.iterator]:ni$3[Symbol.iterator]};var ii$3={time:null,delay:0,duration:250,ease:function(t){return ((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function ri$3(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function oi$3(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return [i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function si$3(t){return (t=oi$3(Math.abs(t)))?t[1]:NaN}ee$5.prototype.interrupt=function(t){return this.each((function(){Rn$5(this,t);}))},ee$5.prototype.transition=function(t){var e,n;t instanceof ti$3?(e=t._id,t=t._name):(e=ei$3(),(n=ii$3).time=wn$5(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],h=a.length,l=0;l<h;++l)(s=a[l])&&Nn$5(s,t,e,l,a,n||ri$3(s,e));return new ti$3(i,this._parents,t,e)};var ai$3,hi$3=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function li$3(t){if(!(e=hi$3.exec(t)))throw new Error("invalid format: "+t);var e;return new ui$3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ui$3(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+"";}function ci$3(t,e){var n=oi$3(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}li$3.prototype=ui$3.prototype,ui$3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var fi$3={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ci$3(100*t,e),r:ci$3,s:function(t,e){var n=oi$3(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(ai$3=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+oi$3(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function di$3(t){return t}var pi$3,gi$3,mi$3,vi$3=Array.prototype.map,yi$3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _i$3(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?di$3:(e=vi$3.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,o=[],s=0,a=e[0],h=0;r>0&&a>0&&(h+a+1>i&&(a=Math.max(1,i-h)),o.push(t.substring(r-=a,r+a)),!((h+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?di$3:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(vi$3.call(t.numerals,String)),h=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function c(t){var e=(t=li$3(t)).fill,n=t.align,c=t.sign,f=t.symbol,d=t.zero,p=t.width,g=t.comma,m=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):fi$3[y]||(void 0===m&&(m=12),v=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var _="$"===f?r:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===f?o:/[%p]/.test(y)?h:"",b=fi$3[y],$=/[defgprs%]/.test(y);function x(t){var r,o,h,f=_,x=w;if("c"===y)x=b(t)+x,t="";else {var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:b(Math.abs(t),m),v&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0);}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),A&&0==+t&&"+"!==c&&(A=!1),f=(A?"("===c?c:l:"-"===c||"("===c?"":c)+f,x=("s"===y?yi$3[8+ai$3/3]:"")+x+(A&&"("===c?")":""),$)for(r=-1,o=t.length;++r<o;)if(48>(h=t.charCodeAt(r))||h>57){x=(46===h?s+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}g&&!d&&(t=i(t,1/0));var M=f.length+t.length+x.length,S=M<p?new Array(p-M+1).join(e):"";switch(g&&d&&(t=i(S+t,S.length?p-x.length:1/0),S=""),n){case"<":t=f+t+x+S;break;case"=":t=f+S+t+x;break;case"^":t=S.slice(0,M=S.length>>1)+f+t+x+S.slice(M);break;default:t=S+f+t+x;}return a(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),x.toString=function(){return t+""},x}return {format:c,formatPrefix:function(t,e){var n=c(((t=li$3(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(si$3(e)/3))),r=Math.pow(10,-i),o=yi$3[8+i/3];return function(t){return n(r*t)+o}}}}function wi$3(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);}return this}function bi$3(t){return +t}pi$3=_i$3({thousands:",",grouping:[3],currency:["$",""]}),gi$3=pi$3.format,mi$3=pi$3.formatPrefix;var $i$3=[0,1];function xi$3(t){return t}function Ai$3(t,e){return (e-=t=+t)?function(n){return (n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n;}function Mi$3(t,e,n){var i=t[0],r=t[1],o=e[0],s=e[1];return r<i?(i=Ai$3(r,i),o=n(s,o)):(i=Ai$3(i,r),o=n(o,s)),function(t){return o(i(t))}}function Si$3(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=Ai$3(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=T$5(t,e,1,i)-1;return o[n](r[n](e))}}function Ei$3(){var t,e,n,i,r,o,s=$i$3,a=$i$3,h=Je$5,l=xi$3;function u(){var t=Math.min(s.length,a.length);return l!==xi$3&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(s[0],s[t-1])),i=t>2?Si$3:Mi$3,r=o=null,c}function c(e){return null==e||isNaN(e=+e)?n:(r||(r=i(s.map(t),a,h)))(t(l(e)))}return c.invert=function(n){return l(e((o||(o=i(a,s.map(t),Ve$5)))(n)))},c.domain=function(t){return arguments.length?(s=Array.from(t,bi$3),u()):s.slice()},c.range=function(t){return arguments.length?(a=Array.from(t),u()):a.slice()},c.rangeRound=function(t){return a=Array.from(t),h=Qe$5,u()},c.clamp=function(t){return arguments.length?(l=!!t||xi$3,u()):l!==xi$3},c.interpolate=function(t){return arguments.length?(h=t,u()):h},c.unknown=function(t){return arguments.length?(n=t,c):n},function(n,i){return t=n,e=i,u()}}function ki$3(t,e,n,i){var r,o=function(t,e,n){n=+n;const i=(e=+e)<(t=+t),r=i?D$5(e,t,n):D$5(t,e,n);return (i?-1:1)*(r<0?1/-r:r)}(t,e,n);switch((i=li$3(i??",f")).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(si$3(e)/3)))-si$3(Math.abs(t)))}(o,s))||(i.precision=r),mi$3(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,si$3(e)-si$3(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-si$3(Math.abs(t)))}(o))||(i.precision=r-2*("%"===i.type));}return gi$3(i)}function Ci$3(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return [];if((t=+t)==(e=+e))return [t];const i=e<t,[r,o,s]=i?U$6(e,t,n):U$6(t,e,n);if(!(o>=r))return [];const a=o-r+1,h=new Array(a);if(i)if(s<0)for(let t=0;t<a;++t)h[t]=(o-t)/-s;else for(let t=0;t<a;++t)h[t]=(o-t)*s;else if(s<0)for(let t=0;t<a;++t)h[t]=(r+t)/-s;else for(let t=0;t<a;++t)h[t]=(r+t)*s;return h}(n[0],n[n.length-1],t??10)},t.tickFormat=function(t,n){var i=e();return ki$3(i[0],i[i.length-1],t??10,n)},t.nice=function(n){null==n&&(n=10);var i,r,o=e(),s=0,a=o.length-1,h=o[s],l=o[a],u=10;for(l<h&&(r=h,h=l,l=r,r=s,s=a,a=r);u-- >0;){if((r=D$5(h,l,n))===i)return o[s]=h,o[a]=l,e(o);if(r>0)h=Math.floor(h/r)*r,l=Math.ceil(l/r)*r;else {if(!(r<0))break;h=Math.ceil(h*r)/r,l=Math.floor(l*r)/r;}i=r;}return t},t}function Ni$3(){var t=Ei$3()(xi$3,xi$3);return t.copy=function(){return e=t,Ni$3().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e;},wi$3.apply(t,arguments),Ci$3(t)}var zi$3=t=>()=>t;function Pi$3(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}});}function Ti$3(t,e,n){this.k=t,this.x=e,this.y=n;}Ti$3.prototype={constructor:Ti$3,scale:function(t){return 1===t?this:new Ti$3(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Ti$3(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return [t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return [(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return (t-this.x)/this.k},invertY:function(t){return (t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return "translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ri$3=new Ti$3(1,0,0);function Hi$3(t){t.stopImmediatePropagation();}function Oi$3(t){t.preventDefault(),t.stopImmediatePropagation();}function Ui$3(t){return !(t.ctrlKey&&"wheel"!==t.type||t.button)}function Di$3(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function qi$3(){return this.__zoom||Ri$3}function ji$3(t){return -t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Bi$3(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wi$3(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Xi$3(){var t,e,n,i=Ui$3,r=Di$3,o=Wi$3,s=ji$3,a=Bi$3,h=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,c=cn$5,f=j$5("start","zoom","end"),d=0,p=10;function g(t){t.property("__zoom",qi$3).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",A).filter(a).on("touchstart.zoom",M).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)");}function m(t,e){return (e=Math.max(h[0],Math.min(h[1],e)))===t.k?t:new Ti$3(e,t.x,t.y)}function v(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new Ti$3(t.k,i,r)}function y(t){return [(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function _(t,e,n,i){t.on("start.zoom",(function(){w(this,arguments).event(i).start();})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(i).end();})).tween("zoom",(function(){var t=this,o=arguments,s=w(t,o).event(i),a=r.apply(t,o),h=null==n?y(a):"function"==typeof n?n.apply(t,o):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=t.__zoom,f="function"==typeof e?e.apply(t,o):e,d=c(u.invert(h).concat(l/u.k),f.invert(h).concat(l/f.k));return function(t){if(1===t)t=f;else {var e=d(t),n=l/e[2];t=new Ti$3(n,h[0]-e[0]*n,h[1]-e[1]*n);}s.zoom(null,t);}}));}function w(t,e,n){return !n&&t.__zooming||new b(t,e)}function b(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=r.apply(t,e),this.taps=0;}function $(t,...e){if(i.apply(this,arguments)){var n=w(this,e).event(t),r=this.__zoom,a=Math.max(h[0],Math.min(h[1],r.k*Math.pow(2,s.apply(this,arguments)))),u=ie$5(t);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=r.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else {if(r.k===a)return;n.mouse=[u,r.invert(u)],Rn$5(this),n.start();}Oi$3(t),n.wheel=setTimeout((function(){n.wheel=null,n.end();}),150),n.zoom("mouse",o(v(m(r,a),n.mouse[0],n.mouse[1]),n.extent,l));}}function x(t,...e){if(!n&&i.apply(this,arguments)){var r=t.currentTarget,s=w(this,e,!0).event(t),a=ne$5(t.view).on("mousemove.zoom",(function(t){if(Oi$3(t),!s.moved){var e=t.clientX-u,n=t.clientY-c;s.moved=e*e+n*n>d;}s.event(t).zoom("mouse",o(v(s.that.__zoom,s.mouse[0]=ie$5(t,r),s.mouse[1]),s.extent,l));}),!0).on("mouseup.zoom",(function(t){a.on("mousemove.zoom mouseup.zoom",null),function(t,e){var n=t.document.documentElement,i=ne$5(t).on("dragstart.drag",null);e&&(i.on("click.drag",oe$5,re$5),setTimeout((function(){i.on("click.drag",null);}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect);}(t.view,s.moved),Oi$3(t),s.event(t).end();}),!0),h=ie$5(t,r),u=t.clientX,c=t.clientY;!function(t){var e=t.document.documentElement,n=ne$5(t).on("dragstart.drag",oe$5,re$5);"onselectstart"in e?n.on("selectstart.drag",oe$5,re$5):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none");}(t.view),Hi$3(t),s.mouse=[h,this.__zoom.invert(h)],Rn$5(this),s.start();}}function A(t,...e){if(i.apply(this,arguments)){var n=this.__zoom,s=ie$5(t.changedTouches?t.changedTouches[0]:t,this),a=n.invert(s),h=n.k*(t.shiftKey?.5:2),c=o(v(m(n,h),s,a),r.apply(this,e),l);Oi$3(t),u>0?ne$5(this).transition().duration(u).call(_,c,s,t):ne$5(this).call(g.transform,c,s,t);}}function M(n,...r){if(i.apply(this,arguments)){var o,s,a,h,l=n.touches,u=l.length,c=w(this,r,n.changedTouches.length===u).event(n);for(Hi$3(n),s=0;s<u;++s)h=[h=ie$5(a=l[s],this),this.__zoom.invert(h),a.identifier],c.touch0?c.touch1||c.touch0[2]===h[2]||(c.touch1=h,c.taps=0):(c.touch0=h,o=!0,c.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(c.taps<2&&(e=h[0],t=setTimeout((function(){t=null;}),500)),Rn$5(this),c.start());}}function S(t,...e){if(this.__zooming){var n,i,r,s,a=w(this,e).event(t),h=t.changedTouches,u=h.length;for(Oi$3(t),n=0;n<u;++n)r=ie$5(i=h[n],this),a.touch0&&a.touch0[2]===i.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===i.identifier&&(a.touch1[0]=r);if(i=a.that.__zoom,a.touch1){var c=a.touch0[0],f=a.touch0[1],d=a.touch1[0],p=a.touch1[1],g=(g=d[0]-c[0])*g+(g=d[1]-c[1])*g,y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y;i=m(i,Math.sqrt(g/y)),r=[(c[0]+d[0])/2,(c[1]+d[1])/2],s=[(f[0]+p[0])/2,(f[1]+p[1])/2];}else {if(!a.touch0)return;r=a.touch0[0],s=a.touch0[1];}a.zoom("touch",o(v(i,r,s),a.extent,l));}}function E(t,...i){if(this.__zooming){var r,o,s=w(this,i).event(t),a=t.changedTouches,h=a.length;for(Hi$3(t),n&&clearTimeout(n),n=setTimeout((function(){n=null;}),500),r=0;r<h;++r)o=a[r],s.touch0&&s.touch0[2]===o.identifier?delete s.touch0:s.touch1&&s.touch1[2]===o.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(o=ie$5(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<p)){var l=ne$5(this).on("dblclick.zoom");l&&l.apply(this,arguments);}}}return g.transform=function(t,e,n,i){var r=t.selection?t.selection():t;r.property("__zoom",qi$3),t!==r?_(t,e,n,i):r.interrupt().each((function(){w(this,arguments).event(i).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end();}));},g.scaleBy=function(t,e,n,i){g.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,i);},g.scaleTo=function(t,e,n,i){g.transform(t,(function(){var t=r.apply(this,arguments),i=this.__zoom,s=null==n?y(t):"function"==typeof n?n.apply(this,arguments):n,a=i.invert(s),h="function"==typeof e?e.apply(this,arguments):e;return o(v(m(i,h),s,a),t,l)}),n,i);},g.translateBy=function(t,e,n,i){g.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),l)}),null,i);},g.translateTo=function(t,e,n,i,s){g.transform(t,(function(){var t=r.apply(this,arguments),s=this.__zoom,a=null==i?y(t):"function"==typeof i?i.apply(this,arguments):i;return o(Ri$3.translate(a[0],a[1]).scale(s.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,l)}),i,s);},b.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=ne$5(this.that).datum();f.call(t,this.that,new Pi$3(t,{sourceEvent:this.sourceEvent,target:g,type:t,transform:this.that.__zoom,dispatch:f}),e);}},g.wheelDelta=function(t){return arguments.length?(s="function"==typeof t?t:zi$3(+t),g):s},g.filter=function(t){return arguments.length?(i="function"==typeof t?t:zi$3(!!t),g):i},g.touchable=function(t){return arguments.length?(a="function"==typeof t?t:zi$3(!!t),g):a},g.extent=function(t){return arguments.length?(r="function"==typeof t?t:zi$3([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):r},g.scaleExtent=function(t){return arguments.length?(h[0]=+t[0],h[1]=+t[1],g):[h[0],h[1]]},g.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],g):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},g.constrain=function(t){return arguments.length?(o=t,g):o},g.duration=function(t){return arguments.length?(u=+t,g):u},g.interpolate=function(t){return arguments.length?(c=t,g):c},g.on=function(){var t=f.on.apply(f,arguments);return t===f?g:t},g.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,g):Math.sqrt(d)},g.tapDistance=function(t){return arguments.length?(p=+t,g):p},g}Ti$3.prototype;const Ii$3={"display-start":1,"display-end":-1,length:0},Li$3=(i,r={})=>{var o,s;class a extends i{constructor(){super(...arguments),o.set(this,{...Ii$3,...r}),s.set(this,e$2(this,o,"f").length),this["display-start"]=e$2(this,o,"f")["display-start"],this["display-end"]=e$2(this,o,"f")["display-end"];}get length(){return e$2(this,s,"f")}set length(t){n$2(this,s,t,"f"),(this["display-end"]||0)>e$2(this,s,"f")&&(this["display-end"]=this.length);}}return o=new WeakMap,s=new WeakMap,t([E$6({type:Number,reflect:!0})],a.prototype,"length",null),t([E$6({type:Number,reflect:!0})],a.prototype,"display-start",void 0),t([E$6({type:Number,reflect:!0})],a.prototype,"display-end",void 0),a},Vi$3="#FFFFFFDD",Gi$3={"margin-top":0,"margin-bottom":0,"margin-left":10,"margin-right":10,"margin-color":Vi$3},Ki$3=(n,i={})=>{var r;class o extends(k$5(n)){constructor(){var t;super(...arguments),r.set(this,{...Gi$3,...i}),this["margin-top"]=e$2(this,r,"f")["margin-top"],this["margin-bottom"]=e$2(this,r,"f")["margin-bottom"],this["margin-left"]=e$2(this,r,"f")["margin-left"],this["margin-right"]=e$2(this,r,"f")["margin-right"],this["margin-color"]=null!==(t=e$2(this,r,"f")["margin-color"])&&void 0!==t?t:Vi$3;}getWidthWithMargins(){return this.width?this.width-this["margin-left"]-this["margin-right"]:0}getHeightWithMargins(){return this.height?this.height-this["margin-top"]-this["margin-bottom"]:0}renderMarginOnGroup(t){t&&(t.select("rect").empty()&&(t.append("rect").style("pointer-events","none").attr("class","margin-left"),t.append("rect").style("pointer-events","none").attr("class","margin-right"),t.append("rect").style("pointer-events","none").attr("class","margin-top"),t.append("rect").style("pointer-events","none").attr("class","margin-bottom")),t.select("rect.margin-left").attr("fill",this["margin-color"]).attr("x",0).attr("y",0).attr("width",this["margin-left"]).attr("height",this.height),t.select("rect.margin-right").attr("fill",this["margin-color"]).attr("x",this.width-this["margin-right"]).attr("y",0).attr("width",this["margin-right"]).attr("height",this.height),t.select("rect.margin-top").attr("fill",this["margin-color"]).attr("x",this["margin-left"]).attr("y",0).attr("width",this.width-this["margin-left"]-this["margin-right"]).attr("height",this["margin-top"]),t.select("rect.margin-bottom").attr("fill",this["margin-color"]).attr("x",this["margin-left"]).attr("y",this.height-this["margin-bottom"]).attr("width",this.width-this["margin-left"]-this["margin-right"]).attr("height",this["margin-bottom"]));}}return r=new WeakMap,t([E$6({type:Number})],o.prototype,"margin-top",void 0),t([E$6({type:Number})],o.prototype,"margin-bottom",void 0),t([E$6({type:Number})],o.prototype,"margin-left",void 0),t([E$6({type:Number})],o.prototype,"margin-right",void 0),t([E$6({type:String})],o.prototype,"margin-color",void 0),o},Zi$3={"min-width":10,"min-height":10},Fi$3=(n,i={})=>{var r;class o extends(k$5(n)){constructor(){super(...arguments),r.set(this,{...Zi$3,...i}),this["min-width"]=e$2(this,r,"f")["min-width"],this["min-height"]=e$2(this,r,"f")["min-height"];}onDimensionsChange(){}connectedCallback(){var t,e;super.connectedCallback(),null!==(t=this.width)&&void 0!==t||(this.width=this["min-width"]),null!==(e=this.height)&&void 0!==e||(this.height=this["min-height"]),null===this.getAttribute("width")&&(this.style.width="100%"),null===this.getAttribute("height")&&(this.style.height="100%"),Ji$3.observe(this);}disconnectedCallback(){Ji$3.unobserve(this),super.disconnectedCallback();}}return r=new WeakMap,t([E$6({type:Number,reflect:!0})],o.prototype,"min-width",void 0),t([E$6({type:Number,reflect:!0})],o.prototype,"min-height",void 0),o},Ji$3=new ResizeObserver((t=>{window.requestAnimationFrame((()=>{var e,n;for(const i of t){const t=null===(e=i.contentBoxSize)||void 0===e?void 0:e[0].inlineSize,r=null===(n=i.contentBoxSize)||void 0===n?void 0:n[0].blockSize;void 0!==t&&void 0!==r&&Qi$3(i.target,t,r);}}));}));function Qi$3(t,e,n){e=Math.max(e,t["min-width"]),n=Math.max(n,t["min-height"]);let i=!1;e!==t.width&&null===t.getAttribute("width")&&(t.width=e,i=!0),n!==t.height&&null===t.getAttribute("height")&&(t.height=n,i=!0),i&&t.onDimensionsChange();}const tr$5=t=>class extends t{connectedCallback(){this.closest("nightingale-manager")&&customElements.whenDefined("nightingale-manager").then((()=>{this.manager=this.closest("nightingale-manager"),this.manager&&this.manager.register(this);})),super.connectedCallback();}disconnectedCallback(){this.manager&&this.manager.unregister(this),super.disconnectedCallback();}};let er$5 = class er{constructor({min:t=-1/0,max:e=1/0}={}){this.segments=[],this.max=e,this.min=t,this.regionString=null;}encode(t=!1){return this.segments.map((({start:e,end:n})=>{if(t)return `${e}:${n}`;return `${e===this.min?"":e}:${n===this.max?"":n}`})).join(",")}decode(t){void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((t=>{const[e,n,i]=t.split(":");if(void 0!==i)throw new Error(`there should be at most 1 ':' per region. Region: ${t}`);let r=e?Number(e):this.min,o=n?Number(n):this.max;if(r>o&&([r,o]=[o,r]),r<this.min&&(r=this.min),o>this.max&&(o=this.max),Number.isNaN(r))throw new Error(`The parsed value of ${e} is NaN. Region: ${t}`);if(Number.isNaN(o))throw new Error(`The parsed value of ${n} is NaN. Region: ${t}`);return {start:r,end:o}})):this.segments=[];}};const nr$5=(t,e)=>t?e?`${t},${e}`:t:e,ir$5={highlight:null,"highlight-color":"#FFEB3B66"},rr$5=(i,r={})=>{var o,s;class a extends i{constructor(...t){super(...t),o.set(this,{...ir$5,...r}),this.highlight=e$2(this,o,"f").highlight,this["highlight-color"]=e$2(this,o,"f")["highlight-color"],s.set(this,void 0),this.highlightedRegion=new er$5({min:1}),n$2(this,s,null,"f");}set fixedHighlight(t){n$2(this,s,t,"f"),this.highlightedRegion.decode(nr$5(this.highlight||"",e$2(this,s,"f")||"")),this.updateHighlight();}attributeChangedCallback(t,n,i){super.attributeChangedCallback(t,n,i),"null"===i&&(i=null),n!==i&&("length"===t&&(this.highlightedRegion.max=Number(i)),"highlight"===t&&this.highlightedRegion.decode(nr$5(i||"",e$2(this,s,"f")||"")));}updateHighlight(){}}return o=new WeakMap,s=new WeakMap,t([E$6({type:String,reflect:!0})],a.prototype,"highlight",void 0),t([E$6({type:String,reflect:!0})],a.prototype,"highlight-color",void 0),a};let or$5 = class or{constructor(t){this.target=t,this.scrollRequiresCtrl=!1,this.currentWheelGesture={lastTimestamp:0,lastAbsDelta:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1},this.target.on("wheel.WheelHelper",(t=>this.handleWheel(t)));}dispose(){this.target.on("wheel.WheelHelper",null);}wheelAction(t){const e=t.ctrlKey&&0===t.deltaMode&&0===t.deltaX&&t.deltaY!==Math.floor(t.deltaY),n=Math.abs(t.deltaX)>Math.abs(t.deltaY),i=Math.abs(t.deltaX)<Math.abs(t.deltaY),r=1===t.deltaMode?25:t.deltaMode?500:1,o=e||!this.scrollRequiresCtrl&&(this.currentWheelGesture.ctrlKey||this.currentWheelGesture.metaKey)?10:1;return e?{kind:"zoom",delta:.002*-t.deltaY*r*o}:n?{kind:"pan",deltaX:-t.deltaX*r*o,deltaY:0}:i?this.currentWheelGesture.shiftKey?{kind:"pan",deltaX:-t.deltaY*r*o,deltaY:0}:!this.scrollRequiresCtrl||this.currentWheelGesture.ctrlKey||this.currentWheelGesture.metaKey?{kind:"zoom",delta:.002*-t.deltaY*r*o}:{kind:"ignore"}:{kind:"pan",deltaX:0,deltaY:0}}handleWheel(t){var e;this.updateCurrentWheelGesture(t);const n=this.wheelAction(t);"ignore"!==n.kind&&t.preventDefault(),"pan"===n.kind&&(null===(e=this.handlePan)||void 0===e||e.call(this,n.deltaX));}updateCurrentWheelGesture(t){const e=Date.now(),n=Math.max(Math.abs(t.deltaX),Math.abs(t.deltaY));(0!==t.deltaMode||e>this.currentWheelGesture.lastTimestamp+150||n>=120||n>this.currentWheelGesture.lastAbsDelta+5)&&(this.currentWheelGesture.ctrlKey=t.ctrlKey,this.currentWheelGesture.shiftKey=t.shiftKey,this.currentWheelGesture.altKey=t.altKey,this.currentWheelGesture.metaKey=t.metaKey),this.currentWheelGesture.lastTimestamp=e,this.currentWheelGesture.lastAbsDelta=n;}};const sr$5=["length","width","height"],ar$5=e=>{class n extends(Ki$3(Li$3(Fi$3(k$5(e))))){constructor(){super(...arguments),this.dontDispatch=!1,this["use-ctrl-to-zoom"]=!1,this.requestZoomRefreshed=()=>{this._zoomRefreshedRequested||(this._zoomRefreshedRequested=!0,requestAnimationFrame((()=>{this._zoomRefreshedRequested=!1,this.zoomRefreshed();})));},this._zoomRefreshedRequested=!1;}get svg(){return this._svg}set svg(t){this._svg=t,this.addZoomBehavior();}attributeChangedCallback(t,e,n){super.attributeChangedCallback(t,e,n);e!==("null"===n?null:n)&&(sr$5.includes(t)&&(this.adjustZoomConstraints(),this.adjustZoom()),"display-start"!==t&&"display-end"!==t||this.adjustZoom(),"use-ctrl-to-zoom"==t&&this.wheelHelper&&(this.wheelHelper.scrollRequiresCtrl=this["use-ctrl-to-zoom"]),this.requestZoomRefreshed());}onDimensionsChange(){var t,e;super.onDimensionsChange(),null===(t=this.svg)||void 0===t||t.attr("width",this.width),null===(e=this.svg)||void 0===e||e.attr("height",this.height),this.adjustZoomConstraints(),this.adjustZoom(),this.requestZoomRefreshed();}addZoomBehavior(){var t,e;this.svg&&(null===(t=this.zoomBehavior)||void 0===t||t.on("zoom",null),null===(e=this.wheelHelper)||void 0===e||e.dispose(),this.wheelHelper=new or$5(this.svg),this.wheelHelper.scrollRequiresCtrl=this["use-ctrl-to-zoom"],this.wheelHelper.handlePan=t=>{var e;this.svg&&(null===(e=this.zoomBehavior)||void 0===e||e.translateBy(this.svg,.6*t/this.getSingleBaseWidth(),0));},this.zoomBehavior=Xi$3(),this.zoomBehavior.filter((t=>{var e;return !(t instanceof WheelEvent)||"zoom"===(null===(e=this.wheelHelper)||void 0===e?void 0:e.wheelAction(t).kind)})),this.zoomBehavior.wheelDelta((t=>{var e;const n=null===(e=this.wheelHelper)||void 0===e?void 0:e.wheelAction(t);return "zoom"===(null==n?void 0:n.kind)?1*n.delta:0})),this.zoomBehavior.on("zoom",(t=>this.handleZoom(t))),this.svg.call(this.zoomBehavior),this.adjustZoomConstraints(),this.adjustZoom(),this.requestZoomRefreshed());}handleZoom(t){if(!this.dontDispatch){const[e,n]=this.viewport();this.dispatchDisplayRange(t.transform.invertX(e),t.transform.invertX(n)-1);}}dispatchDisplayRange(t,e){var n;t=Math.max(t,1),e=Math.min(e,null!==(n=this.length)&&void 0!==n?n:1),t===this["display-start"]&&e===this["display-end"]||this.dispatchEvent(new CustomEvent("change",{detail:{"display-start":t,"display-end":e},bubbles:!0,cancelable:!0}));}adjustZoomConstraints(){var t;if(!this.zoomBehavior)return;const e=null!==(t=this.length)&&void 0!==t?t:1,[n,i]=this.viewport(),r=i-n,o=r/e,s=Math.max(r/2,o);this.zoomBehavior.translateExtent([[1,0],[e+1,0]]),this.zoomBehavior.scaleExtent([o,s]),this.zoomBehavior.extent([[n,0],[i,0]]);}adjustZoom(){if(!this.svg)return;if(!this.zoomBehavior)return;const t=this.displayRange(),e=this.viewport();this.xScale=Ni$3(t,e),this.dontDispatch=!0,this.zoomBehavior.transform(this.svg,function(t,e){const n=(e[1]-e[0])/(t[1]-t[0]),i=e[0]-n*t[0],r=0;return new Ti$3(n,i,r)}(t,e)),this.dontDispatch=!1;}viewport(){return [this["margin-left"],this.width-this["margin-right"]]}displayRange(){var t,e;return [null!==(t=this["display-start"])&&void 0!==t?t:1,(void 0===this["display-end"]||-1===this["display-end"]?null!==(e=this.length)&&void 0!==e?e:1:this["display-end"])+1]}updateScaleDomain(){this.adjustZoomConstraints();}applyZoomTranslation(){this.adjustZoom(),this.requestZoomRefreshed();}zoomRefreshed(){}getXFromSeqPosition(t){return this.xScale?this.xScale(t):-1}getSeqPositionFromX(t){var e;return null===(e=this.xScale)||void 0===e?void 0:e.invert(t)}getSingleBaseWidth(){return this.xScale?this.xScale(2)-this.xScale(1):-1}}return t([E$6({type:Boolean})],n.prototype,"use-ctrl-to-zoom",void 0),n};const lr$5="highlight-event";function ur$5(t,e=null,n=!1,i=!1,r,o,s,a,h){e&&(e=(null==e?void 0:e.feature)||e);const l={eventType:t,feature:e,target:s,parentEvent:a,coords:a&&"pageX"in a&&"pageY"in a?[a.pageX,a.pageY]:null};return n&&((null==e?void 0:e.fragments)?l.highlight=((null==e?void 0:e.fragments)||[]).map((t=>`${t.start}:${t.end}`)).join(","):(null==a?void 0:a.shiftKey)&&(null==h?void 0:h.highlight)?l.highlight=`${h.highlight},${r}:${o}`:l.highlight=r&&o?`${r}:${o}`:void 0),i&&(l.selectedId=null==e?void 0:e.accession),new CustomEvent("change",{detail:l,bubbles:!0,cancelable:!0})}function cr$5(t,e){t.on("mouseover",(function(t,n){var i,r;e.dispatchEvent(ur$5("mouseover",n,"onmouseover"===e.getAttribute(lr$5),!1,null!==(i=n.start)&&void 0!==i?i:n.position,null!==(r=n.end)&&void 0!==r?r:n.position,this,t));})).on("mouseout",(()=>{e.dispatchEvent(ur$5("mouseout",null,"onmouseover"===e.getAttribute(lr$5)));})).on("click",(function(t,n){var i,r;e.dispatchEvent(ur$5("click",n,"onclick"===e.getAttribute(lr$5),!0,null!==(i=n.start)&&void 0!==i?i:n.position,null!==(r=n.end)&&void 0!==r?r:n.position,this,t,e));}));}const wr$4=t=>(e,n)=>{window.customElements.get(t)||(n?i$2(t)(e,n):i$2(t)(e));}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,br$4=globalThis,$r$4=br$4.trustedTypes,xr$4=$r$4?$r$4.createPolicy("lit-html",{createHTML:t=>t}):void 0,Ar$4="$lit$",Mr$4=`lit$${Math.random().toFixed(9).slice(2)}$`,Sr$4="?"+Mr$4,Er$4=`<${Sr$4}>`,kr$4=document,Cr$4=()=>kr$4.createComment(""),Nr$4=t=>null===t||"object"!=typeof t&&"function"!=typeof t,zr$2=Array.isArray,Pr$4="[ \t\n\f\r]",Tr$4=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Rr$3=/-->/g,Hr$3=/>/g,Or$4=RegExp(`>|${Pr$4}(?:([^\\s"'>=/]+)(${Pr$4}*=${Pr$4}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Ur$4=/'/g,Dr$2=/"/g,qr$3=/^(?:script|style|textarea|title)$/i,jr$3=Symbol.for("lit-noChange"),Br$3=Symbol.for("lit-nothing"),Wr$2=new WeakMap,Xr$2=kr$4.createTreeWalker(kr$4,129);function Yr$2(t,e){if(!zr$2(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==xr$4?xr$4.createHTML(e):e}const Ir$2=(t,e)=>{const n=t.length-1,i=[];let r,o=2===e?"<svg>":3===e?"<math>":"",s=Tr$4;for(let e=0;e<n;e++){const n=t[e];let a,h,l=-1,u=0;for(;u<n.length&&(s.lastIndex=u,h=s.exec(n),null!==h);)u=s.lastIndex,s===Tr$4?"!--"===h[1]?s=Rr$3:void 0!==h[1]?s=Hr$3:void 0!==h[2]?(qr$3.test(h[2])&&(r=RegExp("</"+h[2],"g")),s=Or$4):void 0!==h[3]&&(s=Or$4):s===Or$4?">"===h[0]?(s=r??Tr$4,l=-1):void 0===h[1]?l=-2:(l=s.lastIndex-h[2].length,a=h[1],s=void 0===h[3]?Or$4:'"'===h[3]?Dr$2:Ur$4):s===Dr$2||s===Ur$4?s=Or$4:s===Rr$3||s===Hr$3?s=Tr$4:(s=Or$4,r=void 0);const c=s===Or$4&&t[e+1].startsWith("/>")?" ":"";o+=s===Tr$4?n+Er$4:l>=0?(i.push(a),n.slice(0,l)+Ar$4+n.slice(l)+Mr$4+c):n+Mr$4+(-2===l?e:c);}return [Yr$2(t,o+(t[n]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),i]};let Lr$2 = class Lr{constructor({strings:t,_$litType$:e},n){let i;this.parts=[];let r=0,o=0;const s=t.length-1,a=this.parts,[h,l]=Ir$2(t,e);if(this.el=Lr.createElement(h,n),Xr$2.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes);}for(;null!==(i=Xr$2.nextNode())&&a.length<s;){if(1===i.nodeType){if(i.hasAttributes())for(const t of i.getAttributeNames())if(t.endsWith(Ar$4)){const e=l[o++],n=i.getAttribute(t).split(Mr$4),s=/([.?@])?(.*)/.exec(e);a.push({type:1,index:r,name:s[2],strings:n,ctor:"."===s[1]?Fr$2:"?"===s[1]?Jr$2:"@"===s[1]?Qr$2:Zr$2}),i.removeAttribute(t);}else t.startsWith(Mr$4)&&(a.push({type:6,index:r}),i.removeAttribute(t));if(qr$3.test(i.tagName)){const t=i.textContent.split(Mr$4),e=t.length-1;if(e>0){i.textContent=$r$4?$r$4.emptyScript:"";for(let n=0;n<e;n++)i.append(t[n],Cr$4()),Xr$2.nextNode(),a.push({type:2,index:++r});i.append(t[e],Cr$4());}}}else if(8===i.nodeType)if(i.data===Sr$4)a.push({type:2,index:r});else {let t=-1;for(;-1!==(t=i.data.indexOf(Mr$4,t+1));)a.push({type:7,index:r}),t+=Mr$4.length-1;}r++;}}static createElement(t,e){const n=kr$4.createElement("template");return n.innerHTML=t,n}};function Vr$2(t,e,n=t,i){if(e===jr$3)return e;let r=void 0!==i?n._$Co?.[i]:n._$Cl;const o=Nr$4(e)?void 0:e._$litDirective$;return r?.constructor!==o&&(r?._$AO?.(!1),void 0===o?r=void 0:(r=new o(t),r._$AT(t,n,i)),void 0!==i?(n._$Co??=[])[i]=r:n._$Cl=r),void 0!==r&&(e=Vr$2(t,r._$AS(t,e.values),r,i)),e}let Gr$2 = class Gr{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e;}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,i=(t?.creationScope??kr$4).importNode(e,!0);Xr$2.currentNode=i;let r=Xr$2.nextNode(),o=0,s=0,a=n[0];for(;void 0!==a;){if(o===a.index){let e;2===a.type?e=new Kr$2(r,r.nextSibling,this,t):1===a.type?e=new a.ctor(r,a.name,a.strings,this,t):6===a.type&&(e=new to$1(r,this,t)),this._$AV.push(e),a=n[++s];}o!==a?.index&&(r=Xr$2.nextNode(),o++);}return Xr$2.currentNode=kr$4,i}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++;}};let Kr$2 = class Kr{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,i){this.type=2,this._$AH=Br$3,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0;}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Vr$2(this,t,e),Nr$4(t)?t===Br$3||null==t||""===t?(this._$AH!==Br$3&&this._$AR(),this._$AH=Br$3):t!==this._$AH&&t!==jr$3&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>zr$2(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t);}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t));}_(t){this._$AH!==Br$3&&Nr$4(this._$AH)?this._$AA.nextSibling.data=t:this.T(kr$4.createTextNode(t)),this._$AH=t;}$(t){const{values:e,_$litType$:n}=t,i="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=Lr$2.createElement(Yr$2(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(e);else {const t=new Gr$2(i,this),n=t.u(this.options);t.p(e),this.T(n),this._$AH=t;}}_$AC(t){let e=Wr$2.get(t.strings);return void 0===e&&Wr$2.set(t.strings,e=new Lr$2(t)),e}k(t){zr$2(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,i=0;for(const r of t)i===e.length?e.push(n=new Kr(this.O(Cr$4()),this.O(Cr$4()),this,this.options)):n=e[i],n._$AI(r),i++;i<e.length&&(this._$AR(n&&n._$AB.nextSibling,i),e.length=i);}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e;}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t));}};let Zr$2 = class Zr{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,i,r){this.type=1,this._$AH=Br$3,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Br$3;}_$AI(t,e=this,n,i){const r=this.strings;let o=!1;if(void 0===r)t=Vr$2(this,t,e,0),o=!Nr$4(t)||t!==this._$AH&&t!==jr$3,o&&(this._$AH=t);else {const i=t;let s,a;for(t=r[0],s=0;s<r.length-1;s++)a=Vr$2(this,i[n+s],e,s),a===jr$3&&(a=this._$AH[s]),o||=!Nr$4(a)||a!==this._$AH[s],a===Br$3?t=Br$3:t!==Br$3&&(t+=(a??"")+r[s+1]),this._$AH[s]=a;}o&&!i&&this.j(t);}j(t){t===Br$3?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"");}};let Fr$2 = class Fr extends Zr$2{constructor(){super(...arguments),this.type=3;}j(t){this.element[this.name]=t===Br$3?void 0:t;}};let Jr$2 = class Jr extends Zr$2{constructor(){super(...arguments),this.type=4;}j(t){this.element.toggleAttribute(this.name,!!t&&t!==Br$3);}};let Qr$2 = class Qr extends Zr$2{constructor(t,e,n,i,r){super(t,e,n,i,r),this.type=5;}_$AI(t,e=this){if((t=Vr$2(this,t,e,0)??Br$3)===jr$3)return;const n=this._$AH,i=t===Br$3&&n!==Br$3||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,r=t!==Br$3&&(n===Br$3||i);i&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,t),this._$AH=t;}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t);}};let to$1 = class to{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n;}get _$AU(){return this._$AM._$AU}_$AI(t){Vr$2(this,t);}};const eo$1=br$4.litHtmlPolyfillSupport;eo$1?.(Lr$2,Kr$2),(br$4.litHtmlVersions??=[]).push("3.2.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let no$1 = class no extends A$6{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0;}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{const i=n?.renderBefore??e;let r=i._$litPart$;if(void 0===r){const t=n?.renderBefore??null;i._$litPart$=r=new Kr$2(e.insertBefore(Cr$4(),t),t,void 0,n??{});}return r._$AI(t),r})(e,this.renderRoot,this.renderOptions);}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0);}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1);}render(){return jr$3}};no$1._$litElement$=!0,no$1.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:no$1});const io$1=globalThis.litElementPolyfillSupport;io$1?.({LitElement:no$1}),(globalThis.litElementVersions??=[]).push("4.1.1");let ro$1 = class ro extends no$1{connectedCallback(){super.connectedCallback(),this.style.display="inline-block",this.style.lineHeight="0";}createRenderRoot(){return this}};

function h$3(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const l$4=globalThis,u$4=l$4.ShadowRoot&&(void 0===l$4.ShadyCSS||l$4.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,c$5=Symbol(),f$5=new WeakMap;let p$5=class p{constructor(t,e,n){if(this._$cssResult$=!0,n!==c$5)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e;}get styleSheet(){let t=this.o;const e=this.t;if(u$4&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=f$5.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&f$5.set(e,t));}return t}toString(){return this.cssText}};const d$5=u$4?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return (t=>new p$5("string"==typeof t?t:t+"",void 0,c$5))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:v$5,defineProperty:g$5,getOwnPropertyDescriptor:y$5,getOwnPropertyNames:m$5,getOwnPropertySymbols:_$5,getPrototypeOf:b$5}=Object,w$5=globalThis,$$5=w$5.trustedTypes,x$4=$$5?$$5.emptyScript:"",A$5=w$5.reactiveElementPolyfillSupport,S$5=(t,e)=>t,E$5={toAttribute(t,e){switch(e){case Boolean:t=t?x$4:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t);}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t);}catch(t){n=null;}}return n}},C$5=(t,e)=>!v$5(t,e),P$5={attribute:!0,type:String,converter:E$5,reflect:!1,hasChanged:C$5};Symbol.metadata??=Symbol("metadata"),w$5.litPropertyMetadata??=new WeakMap;let k$4 = class k extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t);}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=P$5){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(t,n,e);void 0!==i&&g$5(this.prototype,t,i);}}static getPropertyDescriptor(t,e,n){const{get:i,set:r}=y$5(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t;}};return {get(){return i?.call(this)},set(e){const o=i?.call(this);r.call(this,e),this.requestUpdate(t,o,n);},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??P$5}static _$Ei(){if(this.hasOwnProperty(S$5("elementProperties")))return;const t=b$5(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties);}static finalize(){if(this.hasOwnProperty(S$5("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(S$5("properties"))){const t=this.properties,e=[...m$5(t),..._$5(t)];for(const n of e)this.createProperty(n,t[n]);}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n);}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t);}this.elementStyles=this.finalizeStyles(this.styles);}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(d$5(t));}else void 0!==t&&e.push(d$5(t));return e}static _$Eu(t,e){const n=e.attribute;return !1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev();}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)));}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.();}removeController(t){this._$EO?.delete(t);}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t);}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return ((t,e)=>{if(u$4)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of e){const e=document.createElement("style"),i=l$4.litNonce;void 0!==i&&e.setAttribute("nonce",i),e.textContent=n.cssText,t.appendChild(e);}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()));}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()));}attributeChangedCallback(t,e,n){this._$AK(t,n);}_$EC(t,e){const n=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,n);if(void 0!==i&&!0===n.reflect){const r=(void 0!==n.converter?.toAttribute?n.converter:E$5).toAttribute(e,n.type);this._$Em=t,null==r?this.removeAttribute(i):this.setAttribute(i,r),this._$Em=null;}}_$AK(t,e){const n=this.constructor,i=n._$Eh.get(t);if(void 0!==i&&this._$Em!==i){const t=n.getPropertyOptions(i),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:E$5;this._$Em=i,this[i]=r.fromAttribute(e,t.type),this._$Em=null;}}requestUpdate(t,e,n){if(void 0!==t){if(n??=this.constructor.getPropertyOptions(t),!(n.hasChanged??C$5)(this[t],e))return;this.P(t,e,n);}!1===this.isUpdatePending&&(this._$ES=this._$ET());}P(t,e,n){this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t);}async _$ET(){this.isUpdatePending=!0;try{await this._$ES;}catch(t){Promise.reject(t);}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0;}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t)!0!==n.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],n);}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU();}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e);}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t);}_$EU(){this._$AL=new Map,this.isUpdatePending=!1;}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return !0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU();}updated(t){}firstUpdated(t){}};k$4.elementStyles=[],k$4.shadowRootOptions={mode:"open"},k$4[S$5("elementProperties")]=new Map,k$4[S$5("finalized")]=new Map,A$5?.({ReactiveElement:k$4}),(w$5.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const M$4=globalThis,T$4=M$4.trustedTypes,O$5=T$4?T$4.createPolicy("lit-html",{createHTML:t=>t}):void 0,N$4="$lit$",j$4=`lit$${Math.random().toFixed(9).slice(2)}$`,q$4="?"+j$4,H$4=`<${q$4}>`,R$5=document,B$4=()=>R$5.createComment(""),W$4=t=>null===t||"object"!=typeof t&&"function"!=typeof t,L$4=Array.isArray,U$5="[ \t\n\f\r]",F$4=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,z$4=/-->/g,I$4=/>/g,X$4=RegExp(`>|${U$5}(?:([^\\s"'>=/]+)(${U$5}*=${U$5}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Y$4=/'/g,D$4=/"/g,V$4=/^(?:script|style|textarea|title)$/i,G$4=(t=>(e,...n)=>({_$litType$:t,strings:e,values:n}))(1),K$4=Symbol.for("lit-noChange"),Z$4=Symbol.for("lit-nothing"),Q$4=new WeakMap,J$4=R$5.createTreeWalker(R$5,129);function tt$4(t,e){if(!L$4(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==O$5?O$5.createHTML(e):e}const et$4=(t,e)=>{const n=t.length-1,i=[];let r,o=2===e?"<svg>":3===e?"<math>":"",s=F$4;for(let e=0;e<n;e++){const n=t[e];let a,h,l=-1,u=0;for(;u<n.length&&(s.lastIndex=u,h=s.exec(n),null!==h);)u=s.lastIndex,s===F$4?"!--"===h[1]?s=z$4:void 0!==h[1]?s=I$4:void 0!==h[2]?(V$4.test(h[2])&&(r=RegExp("</"+h[2],"g")),s=X$4):void 0!==h[3]&&(s=X$4):s===X$4?">"===h[0]?(s=r??F$4,l=-1):void 0===h[1]?l=-2:(l=s.lastIndex-h[2].length,a=h[1],s=void 0===h[3]?X$4:'"'===h[3]?D$4:Y$4):s===D$4||s===Y$4?s=X$4:s===z$4||s===I$4?s=F$4:(s=X$4,r=void 0);const c=s===X$4&&t[e+1].startsWith("/>")?" ":"";o+=s===F$4?n+H$4:l>=0?(i.push(a),n.slice(0,l)+N$4+n.slice(l)+j$4+c):n+j$4+(-2===l?e:c);}return [tt$4(t,o+(t[n]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),i]};let nt$4 = class nt{constructor({strings:t,_$litType$:e},n){let i;this.parts=[];let r=0,o=0;const s=t.length-1,a=this.parts,[h,l]=et$4(t,e);if(this.el=nt.createElement(h,n),J$4.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes);}for(;null!==(i=J$4.nextNode())&&a.length<s;){if(1===i.nodeType){if(i.hasAttributes())for(const t of i.getAttributeNames())if(t.endsWith(N$4)){const e=l[o++],n=i.getAttribute(t).split(j$4),s=/([.?@])?(.*)/.exec(e);a.push({type:1,index:r,name:s[2],strings:n,ctor:"."===s[1]?at$4:"?"===s[1]?ht$4:"@"===s[1]?lt$4:st$4}),i.removeAttribute(t);}else t.startsWith(j$4)&&(a.push({type:6,index:r}),i.removeAttribute(t));if(V$4.test(i.tagName)){const t=i.textContent.split(j$4),e=t.length-1;if(e>0){i.textContent=T$4?T$4.emptyScript:"";for(let n=0;n<e;n++)i.append(t[n],B$4()),J$4.nextNode(),a.push({type:2,index:++r});i.append(t[e],B$4());}}}else if(8===i.nodeType)if(i.data===q$4)a.push({type:2,index:r});else {let t=-1;for(;-1!==(t=i.data.indexOf(j$4,t+1));)a.push({type:7,index:r}),t+=j$4.length-1;}r++;}}static createElement(t,e){const n=R$5.createElement("template");return n.innerHTML=t,n}};function it$4(t,e,n=t,i){if(e===K$4)return e;let r=void 0!==i?n._$Co?.[i]:n._$Cl;const o=W$4(e)?void 0:e._$litDirective$;return r?.constructor!==o&&(r?._$AO?.(!1),void 0===o?r=void 0:(r=new o(t),r._$AT(t,n,i)),void 0!==i?(n._$Co??=[])[i]=r:n._$Cl=r),void 0!==r&&(e=it$4(t,r._$AS(t,e.values),r,i)),e}let rt$4 = class rt{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e;}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,i=(t?.creationScope??R$5).importNode(e,!0);J$4.currentNode=i;let r=J$4.nextNode(),o=0,s=0,a=n[0];for(;void 0!==a;){if(o===a.index){let e;2===a.type?e=new ot$4(r,r.nextSibling,this,t):1===a.type?e=new a.ctor(r,a.name,a.strings,this,t):6===a.type&&(e=new ut$4(r,this,t)),this._$AV.push(e),a=n[++s];}o!==a?.index&&(r=J$4.nextNode(),o++);}return J$4.currentNode=R$5,i}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++;}};let ot$4 = class ot{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,i){this.type=2,this._$AH=Z$4,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0;}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=it$4(this,t,e),W$4(t)?t===Z$4||null==t||""===t?(this._$AH!==Z$4&&this._$AR(),this._$AH=Z$4):t!==this._$AH&&t!==K$4&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>L$4(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t);}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t));}_(t){this._$AH!==Z$4&&W$4(this._$AH)?this._$AA.nextSibling.data=t:this.T(R$5.createTextNode(t)),this._$AH=t;}$(t){const{values:e,_$litType$:n}=t,i="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=nt$4.createElement(tt$4(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(e);else {const t=new rt$4(i,this),n=t.u(this.options);t.p(e),this.T(n),this._$AH=t;}}_$AC(t){let e=Q$4.get(t.strings);return void 0===e&&Q$4.set(t.strings,e=new nt$4(t)),e}k(t){L$4(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,i=0;for(const r of t)i===e.length?e.push(n=new ot(this.O(B$4()),this.O(B$4()),this,this.options)):n=e[i],n._$AI(r),i++;i<e.length&&(this._$AR(n&&n._$AB.nextSibling,i),e.length=i);}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e;}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t));}};let st$4 = class st{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,i,r){this.type=1,this._$AH=Z$4,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Z$4;}_$AI(t,e=this,n,i){const r=this.strings;let o=!1;if(void 0===r)t=it$4(this,t,e,0),o=!W$4(t)||t!==this._$AH&&t!==K$4,o&&(this._$AH=t);else {const i=t;let s,a;for(t=r[0],s=0;s<r.length-1;s++)a=it$4(this,i[n+s],e,s),a===K$4&&(a=this._$AH[s]),o||=!W$4(a)||a!==this._$AH[s],a===Z$4?t=Z$4:t!==Z$4&&(t+=(a??"")+r[s+1]),this._$AH[s]=a;}o&&!i&&this.j(t);}j(t){t===Z$4?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"");}};let at$4 = class at extends st$4{constructor(){super(...arguments),this.type=3;}j(t){this.element[this.name]=t===Z$4?void 0:t;}};let ht$4 = class ht extends st$4{constructor(){super(...arguments),this.type=4;}j(t){this.element.toggleAttribute(this.name,!!t&&t!==Z$4);}};let lt$4 = class lt extends st$4{constructor(t,e,n,i,r){super(t,e,n,i,r),this.type=5;}_$AI(t,e=this){if((t=it$4(this,t,e,0)??Z$4)===K$4)return;const n=this._$AH,i=t===Z$4&&n!==Z$4||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,r=t!==Z$4&&(n===Z$4||i);i&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,t),this._$AH=t;}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t);}};let ut$4 = class ut{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n;}get _$AU(){return this._$AM._$AU}_$AI(t){it$4(this,t);}};const ct$4=M$4.litHtmlPolyfillSupport;ct$4?.(nt$4,ot$4),(M$4.litHtmlVersions??=[]).push("3.2.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let ft$4=class ft extends k$4{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0;}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{const i=n?.renderBefore??e;let r=i._$litPart$;if(void 0===r){const t=n?.renderBefore??null;i._$litPart$=r=new ot$4(e.insertBefore(B$4(),t),t,void 0,n??{});}return r._$AI(t),r})(e,this.renderRoot,this.renderOptions);}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0);}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1);}render(){return K$4}};ft$4._$litElement$=!0,ft$4.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:ft$4});const pt$4=globalThis.litElementPolyfillSupport;pt$4?.({LitElement:ft$4}),(globalThis.litElementVersions??=[]).push("4.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const dt$4=t=>(e,n)=>{void 0!==n?n.addInitializer((()=>{customElements.define(t,e);})):customElements.define(t,e);}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,vt$4={attribute:!0,type:String,converter:E$5,reflect:!1,hasChanged:C$5},gt$4=(t=vt$4,e,n)=>{const{kind:i,metadata:r}=n;let o=globalThis.litPropertyMetadata.get(r);if(void 0===o&&globalThis.litPropertyMetadata.set(r,o=new Map),o.set(n.name,t),"accessor"===i){const{name:i}=n;return {set(n){const r=e.get.call(this);e.set.call(this,n),this.requestUpdate(i,r,t);},init(e){return void 0!==e&&this.P(i,void 0,t),e}}}if("setter"===i){const{name:i}=n;return function(n){const r=this[i];e.call(this,n),this.requestUpdate(i,r,t);}}throw Error("Unsupported decorator location: "+i)};function yt$4(t){return (e,n)=>"object"==typeof n?gt$4(t,e,n):((t,e,n)=>{const i=e.hasOwnProperty(n);return e.constructor.createProperty(n,i?{...t,wrapped:!0}:t),i?Object.getOwnPropertyDescriptor(e,n):void 0})(t,e,n)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function mt$4(t){return yt$4({...t,state:!0,attribute:!1})}var _t$4="object"==typeof global&&global&&global.Object===Object&&global,bt$4="object"==typeof self&&self&&self.Object===Object&&self,wt$4=_t$4||bt$4||Function("return this")(),$t$4=wt$4.Symbol,xt$4=Object.prototype,At$4=xt$4.hasOwnProperty,St$4=xt$4.toString,Et$4=$t$4?$t$4.toStringTag:void 0;var Ct$4=Object.prototype.toString;var Pt$4=$t$4?$t$4.toStringTag:void 0;function kt$4(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Pt$4&&Pt$4 in Object(t)?function(t){var e=At$4.call(t,Et$4),n=t[Et$4];try{t[Et$4]=void 0;var i=!0;}catch(t){}var r=St$4.call(t);return i&&(e?t[Et$4]=n:delete t[Et$4]),r}(t):function(t){return Ct$4.call(t)}(t)}function Mt$4(t){return null!=t&&"object"==typeof t}function Tt$4(t){return "symbol"==typeof t||Mt$4(t)&&"[object Symbol]"==kt$4(t)}var Ot$4=Array.isArray,Nt$4=$t$4?$t$4.prototype:void 0,jt$4=Nt$4?Nt$4.toString:void 0;function qt$4(t){if("string"==typeof t)return t;if(Ot$4(t))return function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}(t,qt$4)+"";if(Tt$4(t))return jt$4?jt$4.call(t):"";var e=t+"";return "0"==e&&1/t==-1/0?"-0":e}function Ht$4(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Rt$4=/^\s+|\s+$/g,Bt$4=/^[-+]0x[0-9a-f]+$/i,Wt$4=/^0b[01]+$/i,Lt$4=/^0o[0-7]+$/i,Ut$4=parseInt;function Ft$4(t){if("number"==typeof t)return t;if(Tt$4(t))return NaN;if(Ht$4(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ht$4(e)?e+"":e;}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Rt$4,"");var n=Wt$4.test(t);return n||Lt$4.test(t)?Ut$4(t.slice(2),n?2:8):Bt$4.test(t)?NaN:+t}var zt$4=1/0;function It$4(t){var e=function(t){return t?(t=Ft$4(t))===zt$4||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),n=e%1;return e==e?n?e-n:e:0}function Xt$4(t){return t}function Yt$4(t){if(!Ht$4(t))return !1;var e=kt$4(t);return "[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var Dt$4,Vt$4=wt$4["__core-js_shared__"],Gt$4=(Dt$4=/[^.]+$/.exec(Vt$4&&Vt$4.keys&&Vt$4.keys.IE_PROTO||""))?"Symbol(src)_1."+Dt$4:"";var Kt$4=Function.prototype.toString;function Zt$4(t){if(null!=t){try{return Kt$4.call(t)}catch(t){}try{return t+""}catch(t){}}return ""}var Qt$4=/^\[object .+?Constructor\]$/,Jt$4=Function.prototype,te$4=Object.prototype,ee$4=Jt$4.toString,ne$4=te$4.hasOwnProperty,ie$4=RegExp("^"+ee$4.call(ne$4).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function re$4(t){return !(!Ht$4(t)||(e=t,Gt$4&&Gt$4 in e))&&(Yt$4(t)?ie$4:Qt$4).test(Zt$4(t));var e;}function oe$4(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return re$4(n)?n:void 0}var se$4=oe$4(wt$4,"WeakMap"),ae$4=/^(?:0|[1-9]\d*)$/;function he$4(t,e){var n=typeof t;return !!(e=e??9007199254740991)&&("number"==n||"symbol"!=n&&ae$4.test(t))&&t>-1&&t%1==0&&t<e}function le$4(t,e){return t===e||t!=t&&e!=e}function ue$4(t){return "number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var ce$4=Object.prototype;function fe$4(t){return Mt$4(t)&&"[object Arguments]"==kt$4(t)}var pe$4=Object.prototype,de$4=pe$4.hasOwnProperty,ve$4=pe$4.propertyIsEnumerable,ge$4=fe$4(function(){return arguments}())?fe$4:function(t){return Mt$4(t)&&de$4.call(t,"callee")&&!ve$4.call(t,"callee")};var ye$4="object"==typeof exports&&exports&&!exports.nodeType&&exports,me$4=ye$4&&"object"==typeof module&&module&&!module.nodeType&&module,_e$4=me$4&&me$4.exports===ye$4?wt$4.Buffer:void 0,be$4=(_e$4?_e$4.isBuffer:void 0)||function(){return !1},we$4={};we$4["[object Float32Array]"]=we$4["[object Float64Array]"]=we$4["[object Int8Array]"]=we$4["[object Int16Array]"]=we$4["[object Int32Array]"]=we$4["[object Uint8Array]"]=we$4["[object Uint8ClampedArray]"]=we$4["[object Uint16Array]"]=we$4["[object Uint32Array]"]=!0,we$4["[object Arguments]"]=we$4["[object Array]"]=we$4["[object ArrayBuffer]"]=we$4["[object Boolean]"]=we$4["[object DataView]"]=we$4["[object Date]"]=we$4["[object Error]"]=we$4["[object Function]"]=we$4["[object Map]"]=we$4["[object Number]"]=we$4["[object Object]"]=we$4["[object RegExp]"]=we$4["[object Set]"]=we$4["[object String]"]=we$4["[object WeakMap]"]=!1;var $e$4,xe$4="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ae$4=xe$4&&"object"==typeof module&&module&&!module.nodeType&&module,Se$4=Ae$4&&Ae$4.exports===xe$4&&_t$4.process,Ee$4=function(){try{var t=Ae$4&&Ae$4.require&&Ae$4.require("util").types;return t||Se$4&&Se$4.binding&&Se$4.binding("util")}catch(t){}}(),Ce$4=Ee$4&&Ee$4.isTypedArray,Pe$4=Ce$4?($e$4=Ce$4,function(t){return $e$4(t)}):function(t){return Mt$4(t)&&ue$4(t.length)&&!!we$4[kt$4(t)]},ke$4=Object.prototype.hasOwnProperty;function Me$4(t,e){var n=Ot$4(t),i=!n&&ge$4(t),r=!n&&!i&&be$4(t),o=!n&&!i&&!r&&Pe$4(t),s=n||i||r||o,a=s?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],h=a.length;for(var l in t)!ke$4.call(t,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||he$4(l,h))||a.push(l);return a}var Te$4=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),Oe$4=Object.prototype.hasOwnProperty;function Ne$4(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||ce$4))return Te$4(t);var e,n,i=[];for(var r in Object(t))Oe$4.call(t,r)&&"constructor"!=r&&i.push(r);return i}function je$4(t){return null!=(e=t)&&ue$4(e.length)&&!Yt$4(e)?Me$4(t):Ne$4(t);var e;}var qe$4=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,He$4=/^\w*$/;function Re$4(t,e){if(Ot$4(t))return !1;var n=typeof t;return !("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Tt$4(t))||(He$4.test(t)||!qe$4.test(t)||null!=e&&t in Object(e))}var Be$4=oe$4(Object,"create");var We$4=Object.prototype.hasOwnProperty;var Le$4=Object.prototype.hasOwnProperty;function Ue$4(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1]);}}function Fe$4(t,e){for(var n=t.length;n--;)if(le$4(t[n][0],e))return n;return -1}Ue$4.prototype.clear=function(){this.__data__=Be$4?Be$4(null):{},this.size=0;},Ue$4.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ue$4.prototype.get=function(t){var e=this.__data__;if(Be$4){var n=e[t];return "__lodash_hash_undefined__"===n?void 0:n}return We$4.call(e,t)?e[t]:void 0},Ue$4.prototype.has=function(t){var e=this.__data__;return Be$4?void 0!==e[t]:Le$4.call(e,t)},Ue$4.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Be$4&&void 0===e?"__lodash_hash_undefined__":e,this};var ze$4=Array.prototype.splice;function Ie$4(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1]);}}Ie$4.prototype.clear=function(){this.__data__=[],this.size=0;},Ie$4.prototype.delete=function(t){var e=this.__data__,n=Fe$4(e,t);return !(n<0)&&(n==e.length-1?e.pop():ze$4.call(e,n,1),--this.size,!0)},Ie$4.prototype.get=function(t){var e=this.__data__,n=Fe$4(e,t);return n<0?void 0:e[n][1]},Ie$4.prototype.has=function(t){return Fe$4(this.__data__,t)>-1},Ie$4.prototype.set=function(t,e){var n=this.__data__,i=Fe$4(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};var Xe$4=oe$4(wt$4,"Map");function Ye$4(t,e){var n,i,r=t.__data__;return ("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function De$4(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1]);}}De$4.prototype.clear=function(){this.size=0,this.__data__={hash:new Ue$4,map:new(Xe$4||Ie$4),string:new Ue$4};},De$4.prototype.delete=function(t){var e=Ye$4(this,t).delete(t);return this.size-=e?1:0,e},De$4.prototype.get=function(t){return Ye$4(this,t).get(t)},De$4.prototype.has=function(t){return Ye$4(this,t).has(t)},De$4.prototype.set=function(t,e){var n=Ye$4(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function Ve$4(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Ve$4.Cache||De$4),n}Ve$4.Cache=De$4;var Ge$4=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ke$4=/\\(\\)?/g,Ze$4=function(t){var e=Ve$4(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ge$4,(function(t,n,i,r){e.push(i?r.replace(Ke$4,"$1"):n||t);})),e}));function Qe$4(t){return null==t?"":qt$4(t)}function Je$4(t,e){return Ot$4(t)?t:Re$4(t,e)?[t]:Ze$4(Qe$4(t))}function tn$4(t){if("string"==typeof t||Tt$4(t))return t;var e=t+"";return "0"==e&&1/t==-1/0?"-0":e}function en$4(t,e){for(var n=0,i=(e=Je$4(e,t)).length;null!=t&&n<i;)t=t[tn$4(e[n++])];return n&&n==i?t:void 0}var nn$4=wt$4.isFinite,rn$4=Math.min;function on$4(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=Ft$4(n))==n?n:0),void 0!==e&&(e=(e=Ft$4(e))==e?e:0),function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}(Ft$4(t),e,n)}function sn$4(t){var e=this.__data__=new Ie$4(t);this.size=e.size;}sn$4.prototype.clear=function(){this.__data__=new Ie$4,this.size=0;},sn$4.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},sn$4.prototype.get=function(t){return this.__data__.get(t)},sn$4.prototype.has=function(t){return this.__data__.has(t)},sn$4.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ie$4){var i=n.__data__;if(!Xe$4||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new De$4(i);}return n.set(t,e),this.size=n.size,this};var an$4=Object.prototype.propertyIsEnumerable,hn$4=Object.getOwnPropertySymbols,ln$4=hn$4?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s);}return o}(hn$4(t),(function(e){return an$4.call(t,e)})))}:function(){return []};function un$4(t){return function(t,e,n){var i=e(t);return Ot$4(t)?i:function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}(i,n(t))}(t,je$4,ln$4)}var cn$4=oe$4(wt$4,"DataView"),fn$4=oe$4(wt$4,"Promise"),pn$4=oe$4(wt$4,"Set"),dn$4="[object Map]",vn$4="[object Promise]",gn$4="[object Set]",yn$4="[object WeakMap]",mn$4="[object DataView]",_n$4=Zt$4(cn$4),bn$4=Zt$4(Xe$4),wn$4=Zt$4(fn$4),$n$4=Zt$4(pn$4),xn$4=Zt$4(se$4),An$4=kt$4;(cn$4&&An$4(new cn$4(new ArrayBuffer(1)))!=mn$4||Xe$4&&An$4(new Xe$4)!=dn$4||fn$4&&An$4(fn$4.resolve())!=vn$4||pn$4&&An$4(new pn$4)!=gn$4||se$4&&An$4(new se$4)!=yn$4)&&(An$4=function(t){var e=kt$4(t),n="[object Object]"==e?t.constructor:void 0,i=n?Zt$4(n):"";if(i)switch(i){case _n$4:return mn$4;case bn$4:return dn$4;case wn$4:return vn$4;case $n$4:return gn$4;case xn$4:return yn$4}return e});var Sn$4=wt$4.Uint8Array;function En$4(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new De$4;++e<n;)this.add(t[e]);}function Cn$4(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return !0;return !1}En$4.prototype.add=En$4.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},En$4.prototype.has=function(t){return this.__data__.has(t)};function Pn$4(t,e,n,i,r,o){var s=1&n,a=t.length,h=e.length;if(a!=h&&!(s&&h>a))return !1;var l=o.get(t);if(l&&o.get(e))return l==e;var u=-1,c=!0,f=2&n?new En$4:void 0;for(o.set(t,e),o.set(e,t);++u<a;){var p=t[u],d=e[u];if(i)var v=s?i(d,p,u,e,t,o):i(p,d,u,t,e,o);if(void 0!==v){if(v)continue;c=!1;break}if(f){if(!Cn$4(e,(function(t,e){if(s=e,!f.has(s)&&(p===t||r(p,t,n,i,o)))return f.push(e);var s;}))){c=!1;break}}else if(p!==d&&!r(p,d,n,i,o)){c=!1;break}}return o.delete(t),o.delete(e),c}function kn$4(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t];})),n}function Mn$4(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t;})),n}var Tn$4=$t$4?$t$4.prototype:void 0,On$4=Tn$4?Tn$4.valueOf:void 0;var Nn$4=Object.prototype.hasOwnProperty;var jn$4="[object Arguments]",qn$4="[object Array]",Hn$4="[object Object]",Rn$4=Object.prototype.hasOwnProperty;function Bn$4(t,e,n,i,r,o){var s=Ot$4(t),a=Ot$4(e),h=s?qn$4:An$4(t),l=a?qn$4:An$4(e),u=(h=h==jn$4?Hn$4:h)==Hn$4,c=(l=l==jn$4?Hn$4:l)==Hn$4,f=h==l;if(f&&be$4(t)){if(!be$4(e))return !1;s=!0,u=!1;}if(f&&!u)return o||(o=new sn$4),s||Pe$4(t)?Pn$4(t,e,n,i,r,o):function(t,e,n,i,r,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return !1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return !(t.byteLength!=e.byteLength||!o(new Sn$4(t),new Sn$4(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return le$4(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=kn$4;case"[object Set]":var h=1&i;if(a||(a=Mn$4),t.size!=e.size&&!h)return !1;var l=s.get(t);if(l)return l==e;i|=2,s.set(t,e);var u=Pn$4(a(t),a(e),i,r,o,s);return s.delete(t),u;case"[object Symbol]":if(On$4)return On$4.call(t)==On$4.call(e)}return !1}(t,e,h,n,i,r,o);if(!(1&n)){var p=u&&Rn$4.call(t,"__wrapped__"),d=c&&Rn$4.call(e,"__wrapped__");if(p||d){var v=p?t.value():t,g=d?e.value():e;return o||(o=new sn$4),r(v,g,n,i,o)}}return !!f&&(o||(o=new sn$4),function(t,e,n,i,r,o){var s=1&n,a=un$4(t),h=a.length;if(h!=un$4(e).length&&!s)return !1;for(var l=h;l--;){var u=a[l];if(!(s?u in e:Nn$4.call(e,u)))return !1}var c=o.get(t);if(c&&o.get(e))return c==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=s;++l<h;){var d=t[u=a[l]],v=e[u];if(i)var g=s?i(v,d,u,e,t,o):i(d,v,u,t,e,o);if(!(void 0===g?d===v||r(d,v,n,i,o):g)){f=!1;break}p||(p="constructor"==u);}if(f&&!p){var y=t.constructor,m=e.constructor;y==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m||(f=!1);}return o.delete(t),o.delete(e),f}(t,e,n,i,r,o))}function Wn$4(t,e,n,i,r){return t===e||(null==t||null==e||!Mt$4(t)&&!Mt$4(e)?t!=t&&e!=e:Bn$4(t,e,n,i,Wn$4,r))}function Ln$4(t){return t==t&&!Ht$4(t)}function Un$4(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function Fn$4(t){var e=function(t){for(var e=je$4(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Ln$4(r)];}return e}(t);return 1==e.length&&e[0][2]?Un$4(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,i){var r=n.length,o=r;if(null==t)return !o;for(t=Object(t);r--;){var s=n[r];if(s[2]?s[1]!==t[s[0]]:!(s[0]in t))return !1}for(;++r<o;){var a=(s=n[r])[0],h=t[a],l=s[1];if(s[2]){if(void 0===h&&!(a in t))return !1}else if(!Wn$4(l,h,3,i,new sn$4))return !1}return !0}(n,0,e)}}function zn$4(t,e){return null!=t&&e in Object(t)}function In$4(t,e){return null!=t&&function(t,e,n){for(var i=-1,r=(e=Je$4(e,t)).length,o=!1;++i<r;){var s=tn$4(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s];}return o||++i!=r?o:!!(r=null==t?0:t.length)&&ue$4(r)&&he$4(s,r)&&(Ot$4(t)||ge$4(t))}(t,e,zn$4)}function Xn$4(t,e){return Re$4(t)&&Ln$4(e)?Un$4(tn$4(t),e):function(n){var i=function(t,e,n){var i=null==t?void 0:en$4(t,e);return void 0===i?n:i}(n,t);return void 0===i&&i===e?In$4(n,t):Wn$4(e,i,3)}}function Yn$4(t){return Re$4(t)?(e=tn$4(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return en$4(e,t)}}(t);var e;}var Dn$4=function(t){var e=Math[t];return function(t,n){if(t=Ft$4(t),(n=null==n?0:rn$4(It$4(n),292))&&nn$4(t)){var i=(Qe$4(t)+"e").split("e");return +((i=(Qe$4(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}("floor");function Vn$4(t,e){return Wn$4(t,e)}function Gn$4(t,e){return t<e}function Kn$4(t,e){return t&&t.length?function(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],s=e(o);if(null!=s&&(void 0===a?s==s&&!Tt$4(s):n(s,a)))var a=s,h=o;}return h}(t,"function"==typeof(n=e)?n:null==n?Xt$4:"object"==typeof n?Ot$4(n)?Xn$4(n[0],n[1]):Fn$4(n):Yn$4(n),Gn$4):void 0;var n;}const Zn$4=t=>Object.entries(t).map((([t,e])=>`${t}: ${e};`)).join(" ");let Qn$4=class Qn extends ft$4{constructor(){super(...arguments),this.overflow="auto",this.overflowX="initial",this.overflowY="initial",this.width=0,this.height=0,this.fullHeight=0,this.fullWidth=0,this.positionX="bottom",this.positionY="right",this._x=0,this._y=0,this.onScroll=t=>{var e,n;const{showX:i,showY:r}=this.shouldShow(),o={xMovement:((null===(e=this.el)||void 0===e?void 0:e.scrollLeft)||0)-(i?this.x:0),yMovement:((null===(n=this.el)||void 0===n?void 0:n.scrollTop)||0)-(r?this.y:0)};0===o.xMovement&&0===o.yMovement||this.dispatchEvent(new CustomEvent("fake-scroll",{bubbles:!0,detail:{movement:o,sourceEvent:t}}));};}set x(t){this._x=Number(t),this.el&&(this.el.scrollLeft=this.x);}get x(){return this._x}set y(t){this._y=Number(t),this.el&&(this.el.scrollTop=this._y);}get y(){return this._y}checkOverflow(t,{withX:e=!1,withY:n=!1}){let i=!1;switch(t){case"auto":e&&(i=this.fullWidth>this.width),n&&(i=this.fullHeight>this.height);break;case"hidden":i=!1;break;case"scroll":i=!0;}return i}shouldShow(){const t={withX:!0},e={withY:!0},n="initial"===this.overflowX?this.overflow:this.overflowX,i="initial"===this.overflowY?this.overflow:this.overflowY;return {showX:this.checkOverflow(n,t)&&this.checkOverflow(this.overflow,t),showY:this.checkOverflow(i,e)&&this.checkOverflow(this.overflow,e)}}render(){const t={position:"absolute","overflow-x":"auto","overflow-y":"auto",width:`${this.width}px`,height:`${this.height}px`,transform:""},{showX:e,showY:n}=this.shouldShow(),i={height:"1px",width:"1px"};return n||e?(e&&(i.width=`${this.fullWidth}px`,t["overflow-x"]="scroll","top"===this.positionX&&(t.transform+="rotateX(180deg)")),n&&(i.height=`${this.fullHeight}px`,t["overflow-y"]="scroll","left"===this.positionY&&(t.transform+="rotateY(180deg)")),G$4`<div style=${Zn$4(t)} id="fakescroll">
      <div style=${Zn$4(i)}></div>
    </div> `):G$4`<div />`}updated(){const t=this.renderRoot.querySelector("#fakescroll");t!==this.el&&(this.el=t,this.el&&this.el.addEventListener("scroll",this.onScroll));}};h$3([yt$4({type:String})],Qn$4.prototype,"overflow",void 0),h$3([yt$4({type:String})],Qn$4.prototype,"overflowX",void 0),h$3([yt$4({type:String})],Qn$4.prototype,"overflowY",void 0),h$3([yt$4({type:Number})],Qn$4.prototype,"width",void 0),h$3([yt$4({type:Number})],Qn$4.prototype,"height",void 0),h$3([yt$4({type:Number})],Qn$4.prototype,"fullHeight",void 0),h$3([yt$4({type:Number})],Qn$4.prototype,"fullWidth",void 0),h$3([yt$4({type:String})],Qn$4.prototype,"positionX",void 0),h$3([yt$4({type:String})],Qn$4.prototype,"positionY",void 0),h$3([yt$4()],Qn$4.prototype,"x",null),h$3([yt$4()],Qn$4.prototype,"y",null),Qn$4=h$3([dt$4("fake-scroll")],Qn$4);var Jn$4={value:()=>{}};function ti$2(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[];}return new ei$2(i)}function ei$2(t){this._=t;}function ni$2(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function ii$2(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Jn$4,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}ei$2.prototype=ti$2.prototype={constructor:ei$2,on:function(t,e){var n,i,r=this._,o=(i=r,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return {type:t,name:e}}))),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=o[s]).type)r[n]=ii$2(r[n],t.name,e);else if(null==e)for(n in r)r[n]=ii$2(r[n],t.name,null);return this}for(;++s<a;)if((n=(t=o[s]).type)&&(n=ni$2(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ei$2(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r);},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n);}};var ri$2="http://www.w3.org/1999/xhtml",oi$2={svg:"http://www.w3.org/2000/svg",xhtml:ri$2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function si$2(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),oi$2.hasOwnProperty(e)?{space:oi$2[e],local:t}:t}function ai$2(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ri$2&&e.documentElement.namespaceURI===ri$2?e.createElement(t):e.createElementNS(n,t)}}function hi$2(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function li$2(t){var e=si$2(t);return (e.local?hi$2:ai$2)(e)}function ui$2(){}function ci$2(t){return null==t?ui$2:function(){return this.querySelector(t)}}function fi$2(){return []}function pi$2(t){return null==t?fi$2:function(){return this.querySelectorAll(t)}}function di$2(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function vi$2(t){return function(){return this.matches(t)}}function gi$2(t){return function(e){return e.matches(t)}}var yi$2=Array.prototype.find;function mi$2(){return this.firstElementChild}var _i$2=Array.prototype.filter;function bi$2(){return Array.from(this.children)}function wi$2(t){return new Array(t.length)}function $i$2(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e;}function xi$2(t,e,n,i,r,o){for(var s,a=0,h=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],i[a]=s):n[a]=new $i$2(t,o[a]);for(;a<h;++a)(s=e[a])&&(r[a]=s);}function Ai$2(t,e,n,i,r,o,s){var a,h,l,u=new Map,c=e.length,f=o.length,p=new Array(c);for(a=0;a<c;++a)(h=e[a])&&(p[a]=l=s.call(h,h.__data__,a,e)+"",u.has(l)?r[a]=h:u.set(l,h));for(a=0;a<f;++a)l=s.call(t,o[a],a,o)+"",(h=u.get(l))?(i[a]=h,h.__data__=o[a],u.delete(l)):n[a]=new $i$2(t,o[a]);for(a=0;a<c;++a)(h=e[a])&&u.get(p[a])===h&&(r[a]=h);}function Si$2(t){return t.__data__}function Ei$2(t){return "object"==typeof t&&"length"in t?t:Array.from(t)}function Ci$2(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Pi$2(t){return function(){this.removeAttribute(t);}}function ki$2(t){return function(){this.removeAttributeNS(t.space,t.local);}}function Mi$2(t,e){return function(){this.setAttribute(t,e);}}function Ti$2(t,e){return function(){this.setAttributeNS(t.space,t.local,e);}}function Oi$2(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n);}}function Ni$2(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n);}}function ji$2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function qi$2(t){return function(){this.style.removeProperty(t);}}function Hi$2(t,e,n){return function(){this.style.setProperty(t,e,n);}}function Ri$2(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n);}}function Bi$2(t,e){return t.style.getPropertyValue(e)||ji$2(t).getComputedStyle(t,null).getPropertyValue(e)}function Wi$2(t){return function(){delete this[t];}}function Li$2(t,e){return function(){this[t]=e;}}function Ui$2(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n;}}function Fi$2(t){return t.trim().split(/^|\s+/)}function zi$2(t){return t.classList||new Ii$2(t)}function Ii$2(t){this._node=t,this._names=Fi$2(t.getAttribute("class")||"");}function Xi$2(t,e){for(var n=zi$2(t),i=-1,r=e.length;++i<r;)n.add(e[i]);}function Yi$2(t,e){for(var n=zi$2(t),i=-1,r=e.length;++i<r;)n.remove(e[i]);}function Di$2(t){return function(){Xi$2(this,t);}}function Vi$2(t){return function(){Yi$2(this,t);}}function Gi$2(t,e){return function(){(e.apply(this,arguments)?Xi$2:Yi$2)(this,t);}}function Ki$2(){this.textContent="";}function Zi$2(t){return function(){this.textContent=t;}}function Qi$2(t){return function(){var e=t.apply(this,arguments);this.textContent=e??"";}}function Ji$2(){this.innerHTML="";}function tr$4(t){return function(){this.innerHTML=t;}}function er$4(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??"";}}function nr$4(){this.nextSibling&&this.parentNode.appendChild(this);}function ir$4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild);}function rr$4(){return null}function or$4(){var t=this.parentNode;t&&t.removeChild(this);}function sr$4(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ar$4(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function hr$4(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on;}}}function lr$4(t,e,n){return function(){var i,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__);}}(e);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i];}}function ur$4(t,e,n){var i=ji$2(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r);}function cr$4(t,e){return function(){return ur$4(this,t,e)}}function fr$4(t,e){return function(){return ur$4(this,t,e.apply(this,arguments))}}$i$2.prototype={constructor:$i$2,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Ii$2.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")));},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")));},contains:function(t){return this._names.indexOf(t)>=0}};var pr$4=[null];function dr$4(t,e){this._groups=t,this._parents=e;}function vr$3(){return new dr$4([[document.documentElement]],pr$4)}function gr$4(t,e,n){t.prototype=e.prototype=n,n.constructor=t;}function yr$3(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function mr$4(){}dr$4.prototype=vr$3.prototype={constructor:dr$4,select:function(t){"function"!=typeof t&&(t=ci$2(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=e[r],h=a.length,l=i[r]=new Array(h),u=0;u<h;++u)(o=a[u])&&(s=t.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),l[u]=s);return new dr$4(i,this._parents)},selectAll:function(t){t="function"==typeof t?di$2(t):pi$2(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s,a=e[o],h=a.length,l=0;l<h;++l)(s=a[l])&&(i.push(t.call(s,s.__data__,l,a)),r.push(s));return new dr$4(i,r)},selectChild:function(t){return this.select(null==t?mi$2:function(t){return function(){return yi$2.call(this.children,t)}}("function"==typeof t?t:gi$2(t)))},selectChildren:function(t){return this.selectAll(null==t?bi$2:function(t){return function(){return _i$2.call(this.children,t)}}("function"==typeof t?t:gi$2(t)))},filter:function(t){"function"!=typeof t&&(t=vi$2(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,h=i[r]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&h.push(o);return new dr$4(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Si$2);var n=e?Ai$2:xi$2,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=r.length,s=new Array(o),a=new Array(o),h=new Array(o),l=0;l<o;++l){var u=i[l],c=r[l],f=c.length,p=Ei$2(t.call(u,u&&u.__data__,l,i)),d=p.length,v=a[l]=new Array(d),g=s[l]=new Array(d);n(u,c,v,g,h[l]=new Array(f),p,e);for(var y,m,_=0,b=0;_<d;++_)if(y=v[_]){for(_>=b&&(b=_+1);!(m=g[b])&&++b<d;);y._next=m||null;}}return (s=new dr$4(s,i))._enter=a,s._exit=h,s},enter:function(){return new dr$4(this._enter||this._groups.map(wi$2),this._parents)},exit:function(){return new dr$4(this._exit||this._groups.map(wi$2),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return "function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),h=0;h<s;++h)for(var l,u=n[h],c=i[h],f=u.length,p=a[h]=new Array(f),d=0;d<f;++d)(l=u[d]||c[d])&&(p[d]=l);for(;h<r;++h)a[h]=n[h];return new dr$4(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Ci$2);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],h=a.length,l=r[o]=new Array(h),u=0;u<h;++u)(s=a[u])&&(l[u]=s);l.sort(e);}return new dr$4(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return !this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],s=0,a=o.length;s<a;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this},attr:function(t,e){var n=si$2(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?ki$2:Pi$2:"function"==typeof e?n.local?Ni$2:Oi$2:n.local?Ti$2:Mi$2)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?qi$2:"function"==typeof e?Ri$2:Hi$2)(t,e,n??"")):Bi$2(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Wi$2:"function"==typeof e?Ui$2:Li$2)(t,e)):this.node()[t]},classed:function(t,e){var n=Fi$2(t+"");if(arguments.length<2){for(var i=zi$2(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return !1;return !0}return this.each(("function"==typeof e?Gi$2:e?Di$2:Vi$2)(n,e))},text:function(t){return arguments.length?this.each(null==t?Ki$2:("function"==typeof t?Qi$2:Zi$2)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ji$2:("function"==typeof t?er$4:tr$4)(t)):this.node().innerHTML},raise:function(){return this.each(nr$4)},lower:function(){return this.each(ir$4)},append:function(t){var e="function"==typeof t?t:li$2(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:li$2(t),i=null==e?rr$4:"function"==typeof e?e:ci$2(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(or$4)},clone:function(t){return this.select(t?ar$4:sr$4)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?lr$4:hr$4,i=0;i<s;++i)this.each(a(o[i],e,n));return this}var a=this.node().__on;if(a)for(var h,l=0,u=a.length;l<u;++l)for(i=0,h=a[l];i<s;++i)if((r=o[i]).type===h.type&&r.name===h.name)return h.value},dispatch:function(t,e){return this.each(("function"==typeof e?fr$4:cr$4)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,s=r.length;o<s;++o)(i=r[o])&&(yield i);}};var _r$3=.7,br$3=1/_r$3,wr$3="\\s*([+-]?\\d+)\\s*",$r$3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xr$3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ar$3=/^#([0-9a-f]{3,8})$/,Sr$3=new RegExp(`^rgb\\(${wr$3},${wr$3},${wr$3}\\)$`),Er$3=new RegExp(`^rgb\\(${xr$3},${xr$3},${xr$3}\\)$`),Cr$3=new RegExp(`^rgba\\(${wr$3},${wr$3},${wr$3},${$r$3}\\)$`),Pr$3=new RegExp(`^rgba\\(${xr$3},${xr$3},${xr$3},${$r$3}\\)$`),kr$3=new RegExp(`^hsl\\(${$r$3},${xr$3},${xr$3}\\)$`),Mr$3=new RegExp(`^hsla\\(${$r$3},${xr$3},${xr$3},${$r$3}\\)$`),Tr$3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Or$3(){return this.rgb().formatHex()}function Nr$3(){return this.rgb().formatRgb()}function jr$2(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ar$3.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?qr$2(e):3===n?new Br$2(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Hr$2(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Hr$2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr$3.exec(t))?new Br$2(e[1],e[2],e[3],1):(e=Er$3.exec(t))?new Br$2(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Cr$3.exec(t))?Hr$2(e[1],e[2],e[3],e[4]):(e=Pr$3.exec(t))?Hr$2(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=kr$3.exec(t))?Ir$1(e[1],e[2]/100,e[3]/100,1):(e=Mr$3.exec(t))?Ir$1(e[1],e[2]/100,e[3]/100,e[4]):Tr$3.hasOwnProperty(t)?qr$2(Tr$3[t]):"transparent"===t?new Br$2(NaN,NaN,NaN,0):null}function qr$2(t){return new Br$2(t>>16&255,t>>8&255,255&t,1)}function Hr$2(t,e,n,i){return i<=0&&(t=e=n=NaN),new Br$2(t,e,n,i)}function Rr$2(t,e,n,i){return 1===arguments.length?function(t){return t instanceof mr$4||(t=jr$2(t)),t?new Br$2((t=t.rgb()).r,t.g,t.b,t.opacity):new Br$2}(t):new Br$2(t,e,n,i??1)}function Br$2(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i;}function Wr$1(){return `#${zr$1(this.r)}${zr$1(this.g)}${zr$1(this.b)}`}function Lr$1(){const t=Ur$3(this.opacity);return `${1===t?"rgb(":"rgba("}${Fr$1(this.r)}, ${Fr$1(this.g)}, ${Fr$1(this.b)}${1===t?")":`, ${t})`}`}function Ur$3(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Fr$1(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function zr$1(t){return ((t=Fr$1(t))<16?"0":"")+t.toString(16)}function Ir$1(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Yr$1(t,e,n,i)}function Xr$1(t){if(t instanceof Yr$1)return new Yr$1(t.h,t.s,t.l,t.opacity);if(t instanceof mr$4||(t=jr$2(t)),!t)return new Yr$1;if(t instanceof Yr$1)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,h=(o+r)/2;return a?(s=e===o?(n-i)/a+6*(n<i):n===o?(i-e)/a+2:(e-n)/a+4,a/=h<.5?o+r:2-o-r,s*=60):a=h>0&&h<1?0:s,new Yr$1(s,a,h,t.opacity)}function Yr$1(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i;}function Dr$1(t){return (t=(t||0)%360)<0?t+360:t}function Vr$1(t){return Math.max(0,Math.min(1,t||0))}function Gr$1(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}gr$4(mr$4,jr$2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Or$3,formatHex:Or$3,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Xr$1(this).formatHsl()},formatRgb:Nr$3,toString:Nr$3}),gr$4(Br$2,Rr$2,yr$3(mr$4,{brighter(t){return t=null==t?br$3:Math.pow(br$3,t),new Br$2(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?_r$3:Math.pow(_r$3,t),new Br$2(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Br$2(Fr$1(this.r),Fr$1(this.g),Fr$1(this.b),Ur$3(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wr$1,formatHex:Wr$1,formatHex8:function(){return `#${zr$1(this.r)}${zr$1(this.g)}${zr$1(this.b)}${zr$1(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Lr$1,toString:Lr$1})),gr$4(Yr$1,(function(t,e,n,i){return 1===arguments.length?Xr$1(t):new Yr$1(t,e,n,i??1)}),yr$3(mr$4,{brighter(t){return t=null==t?br$3:Math.pow(br$3,t),new Yr$1(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?_r$3:Math.pow(_r$3,t),new Yr$1(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Br$2(Gr$1(t>=240?t-240:t+120,r,i),Gr$1(t,r,i),Gr$1(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Yr$1(Dr$1(this.h),Vr$1(this.s),Vr$1(this.l),Ur$3(this.opacity))},displayable(){return (0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ur$3(this.opacity);return `${1===t?"hsl(":"hsla("}${Dr$1(this.h)}, ${100*Vr$1(this.s)}%, ${100*Vr$1(this.l)}%${1===t?")":`, ${t})`}`}}));var Kr$1=t=>()=>t;function Zr$1(t){return 1==(t=+t)?Qr$1:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Kr$1(isNaN(e)?n:e)}}function Qr$1(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Kr$1(isNaN(t)?e:t)}var Jr$1=function t(e){var n=Zr$1(e);function i(t,e){var i=n((t=Rr$2(t)).r,(e=Rr$2(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),s=Qr$1(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function to(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var eo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,no=new RegExp(eo.source,"g");function io(t,e){var n,i,r,o=eo.lastIndex=no.lastIndex=0,s=-1,a=[],h=[];for(t+="",e+="";(n=eo.exec(t))&&(i=no.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,h.push({i:s,x:to(n,i)})),o=no.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,i=0;i<e;++i)a[(n=h[i]).i]=n.x(t);return a.join("")})}var ro,oo=180/Math.PI,so={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ao(t,e,n,i,r,o){var s,a,h;return (s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(h=t*n+e*i)&&(n-=t*h,i-=e*h),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,h/=a),t*i<e*n&&(t=-t,e=-e,h=-h,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*oo,skewX:Math.atan(h)*oo,scaleX:s,scaleY:a}}function ho(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],h=[];return o=t(o),s=t(s),function(t,i,r,o,s,a){if(t!==r||i!==o){var h=s.push("translate(",null,e,null,n);a.push({i:h-4,x:to(t,r)},{i:h-2,x:to(i,o)});}else (r||o)&&s.push("translate("+r+e+o+n);}(o.translateX,o.translateY,s.translateX,s.translateY,a,h),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:to(t,e)})):e&&n.push(r(n)+"rotate("+e+i);}(o.rotate,s.rotate,a,h),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:to(t,e)}):e&&n.push(r(n)+"skewX("+e+i);}(o.skewX,s.skewX,a,h),function(t,e,n,i,o,s){if(t!==n||e!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:to(t,n)},{i:a-2,x:to(e,i)});}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")");}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,h),o=s=null,function(t){for(var e,n=-1,i=h.length;++n<i;)a[(e=h[n]).i]=e.x(t);return a.join("")}}}var lo,uo,co=ho((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?so:ao(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),fo=ho((function(t){return null==t?so:(ro||(ro=document.createElementNS("http://www.w3.org/2000/svg","g")),ro.setAttribute("transform",t),(t=ro.transform.baseVal.consolidate())?ao((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):so)}),", ",")",")"),po=0,vo=0,go=0,yo=0,mo=0,_o=0,bo="object"==typeof performance&&performance.now?performance:Date,wo="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17);};function $o(){return mo||(wo(xo),mo=bo.now()+_o)}function xo(){mo=0;}function Ao(){this._call=this._time=this._next=null;}function So(t,e,n){var i=new Ao;return i.restart(t,e,n),i}function Eo(){mo=(yo=bo.now())+_o,po=vo=0;try{!function(){$o(),++po;for(var t,e=lo;e;)(t=mo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--po;}();}finally{po=0,function(){var t,e,n=lo,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:lo=e);uo=t,Po(i);}(),mo=0;}}function Co(){var t=bo.now(),e=t-yo;e>1e3&&(_o-=e,yo=t);}function Po(t){po||(vo&&(vo=clearTimeout(vo)),t-mo>24?(t<1/0&&(vo=setTimeout(Eo,t-bo.now()-_o)),go&&(go=clearInterval(go))):(go||(yo=bo.now(),go=setInterval(Co,1e3)),po=1,wo(Eo)));}function ko(t,e,n){var i=new Ao;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e);}),e,n),i}Ao.prototype=So.prototype={constructor:Ao,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?$o():+n)+(null==e?0:+e),this._next||uo===this||(uo?uo._next=this:lo=this,uo=this),this._call=t,this._time=n,Po();},stop:function(){this._call&&(this._call=null,this._time=1/0,Po());}};var Mo=ti$2("start","end","cancel","interrupt"),To=[];function Oo(t,e,n,i,r,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay);}function s(o){var l,u,c,f;if(1!==n.state)return h();for(l in r)if((f=r[l]).name===n.name){if(3===f.state)return ko(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[l]):+l<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[l]);}if(ko((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o));})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(c=n.tween.length),l=0,u=-1;l<c;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1;}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(h),n.state=5,1),o=-1,s=i.length;++o<s;)i[o].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),h());}function h(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition;}r[e]=n,n.timer=So(o,0,n.time);}(t,n,{name:e,index:i,group:r,on:Mo,tween:To,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0});}function No(t,e){var n=qo(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function jo(t,e){var n=qo(t,e);if(n.state>3)throw new Error("too late; already running");return n}function qo(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ho(t,e){var n,i;return function(){var r=jo(this,t),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}r.tween=i;}}function Ro(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=jo(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},h=0,l=r.length;h<l;++h)if(r[h].name===e){r[h]=a;break}h===l&&r.push(a);}o.tween=r;}}function Bo(t,e,n){var i=t._id;return t.each((function(){var t=jo(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments);})),function(t){return qo(t,i).value[e]}}function Wo(t,e){var n;return ("number"==typeof e?to:e instanceof jr$2?Jr$1:(n=jr$2(e))?(e=n,Jr$1):io)(t,e)}function Lo(t){return function(){this.removeAttribute(t);}}function Uo(t){return function(){this.removeAttributeNS(t.space,t.local);}}function Fo(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===i?r:r=e(i=s,n)}}function zo(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===i?r:r=e(i=s,n)}}function Io(t,e,n){var i,r,o;return function(){var s,a,h=n(this);if(null!=h)return (s=this.getAttribute(t))===(a=h+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,h));this.removeAttribute(t);}}function Xo(t,e,n){var i,r,o;return function(){var s,a,h=n(this);if(null!=h)return (s=this.getAttributeNS(t.space,t.local))===(a=h+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,h));this.removeAttributeNS(t.space,t.local);}}function Yo(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n));}}(t,r)),n}return r._value=e,r}function Do(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n));}}(t,r)),n}return r._value=e,r}function Vo(t,e){return function(){No(this,t).delay=+e.apply(this,arguments);}}function Go(t,e){return e=+e,function(){No(this,t).delay=e;}}function Ko(t,e){return function(){jo(this,t).duration=+e.apply(this,arguments);}}function Zo(t,e){return e=+e,function(){jo(this,t).duration=e;}}var Qo=vr$3.prototype.constructor;function Jo(t){return function(){this.style.removeProperty(t);}}var ts$1=0;function es$1(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i;}function ns$1(){return ++ts$1}var is$1=vr$3.prototype;es$1.prototype={constructor:es$1,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ci$2(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a,h,l=i[s],u=l.length,c=o[s]=new Array(u),f=0;f<u;++f)(a=l[f])&&(h=t.call(a,a.__data__,f,l))&&("__data__"in a&&(h.__data__=a.__data__),c[f]=h,Oo(c[f],e,n,f,c,qo(a,n)));return new es$1(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=pi$2(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var h,l=i[a],u=l.length,c=0;c<u;++c)if(h=l[c]){for(var f,p=t.call(h,h.__data__,c,l),d=qo(h,n),v=0,g=p.length;v<g;++v)(f=p[v])&&Oo(f,e,n,v,p,d);o.push(p),s.push(h);}return new es$1(o,s,e,n)},selectChild:is$1.selectChild,selectChildren:is$1.selectChildren,filter:function(t){"function"!=typeof t&&(t=vi$2(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,h=i[r]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&h.push(o);return new es$1(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var h,l=e[a],u=n[a],c=l.length,f=s[a]=new Array(c),p=0;p<c;++p)(h=l[p]||u[p])&&(f[p]=h);for(;a<i;++a)s[a]=e[a];return new es$1(s,this._parents,this._name,this._id)},selection:function(){return new Qo(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ns$1(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],h=a.length,l=0;l<h;++l)if(s=a[l]){var u=qo(s,e);Oo(s,t,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease});}return new es$1(i,this._parents,t,n)},call:is$1.call,nodes:is$1.nodes,node:is$1.node,size:is$1.size,empty:is$1.empty,each:is$1.each,on:function(t,e){var n=this._id;return arguments.length<2?qo(this.node(),n).on.on(t):this.each(function(t,e,n){var i,r,o=function(t){return (t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?No:jo;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r;}}(n,t,e))},attr:function(t,e){var n=si$2(t),i="transform"===n?fo:Wo;return this.attrTween(t,"function"==typeof e?(n.local?Xo:Io)(n,i,Bo(this,"attr."+t,e)):null==e?(n.local?Uo:Lo)(n):(n.local?zo:Fo)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return (n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=si$2(t);return this.tween(n,(i.local?Yo:Do)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?co:Wo;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=Bi$2(this,t),s=(this.style.removeProperty(t),Bi$2(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}(t,i)).on("end.style."+t,Jo(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,o;return function(){var s=Bi$2(this,t),a=n(this),h=a+"";return null==a&&(this.style.removeProperty(t),h=a=Bi$2(this,t)),s===h?null:s===i&&h===r?o:(r=h,o=e(i=s,a))}}(t,i,Bo(this,"style."+t,e))).each(function(t,e){var n,i,r,o,s="style."+e,a="end."+s;return function(){var h=jo(this,t),l=h.on,u=null==h.value[s]?o||(o=Jo(e)):void 0;l===n&&r===u||(i=(n=l).copy()).on(a,r=u),h.on=i;}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,o=n+"";return function(){var s=Bi$2(this,t);return s===o?null:s===i?r:r=e(i=s,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return (i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&function(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n);}}(t,o,n)),i}return o._value=e,o}(t,e,n??""))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=e??"";}}(Bo(this,"text",t)):function(t){return function(){this.textContent=t;}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return (e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){return function(e){this.textContent=t.call(this,e);}}(i)),e}return i._value=t,i}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this);}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=qo(this.node(),n).tween,o=0,s=r.length;o<s;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?Ho:Ro)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Vo:Go)(e,t)):qo(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ko:Zo)(e,t)):qo(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){jo(this,t).ease=e;}}(e,t)):qo(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;jo(this,t).ease=n;}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(o,s){var a={value:s},h={value:function(){0==--r&&o();}};n.each((function(){var n=jo(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(h)),n.on=e;})),0===r&&o();}))},[Symbol.iterator]:is$1[Symbol.iterator]};var rs$1={time:null,delay:0,duration:250,ease:function(t){return ((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function os$1(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ss$1(t,e,n){this.k=t,this.x=e,this.y=n;}vr$3.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,r,o=t.__transition,s=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete t.__transition;}}(this,t);}))},vr$3.prototype.transition=function(t){var e,n;t instanceof es$1?(e=t._id,t=t._name):(e=ns$1(),(n=rs$1).time=$o(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],h=a.length,l=0;l<h;++l)(s=a[l])&&Oo(s,t,e,l,a,n||os$1(s,e));return new es$1(i,this._parents,t,e)},ss$1.prototype={constructor:ss$1,scale:function(t){return 1===t?this:new ss$1(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new ss$1(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return [t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return [(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return (t-this.x)/this.k},invertY:function(t){return (t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return "translate("+this.x+","+this.y+") scale("+this.k+")"}},ss$1.prototype;let as$1 = class as extends(ar$5(Li$3(k$5(ro$1)))){constructor(){super(...arguments),this["use-ctrl-to-zoom"]=!0,this["margin-right"]=0,this["margin-left"]=0,this.mouse={isMouseWithin:!1,cursorState:"grab"},this.fullWidth=0,this.fullHeight=0,this.x=0,this.y=0,this.uniqueId=`msa-${Math.round(1e4*Math.random())}`,this.ctxBuffers=[],this.ctx=null,this.canvasBuffers=[],this.currentContext=1,this.isInDragPhase=!1,this.mouseHasMoved=!1,this.mouseMovePosition=void 0;}firstUpdated(){this.container=document.getElementById(this.uniqueId),window.requestAnimationFrame((()=>{this.svg=function(t){return "string"==typeof t?new dr$4([[document.querySelector(t)]],[document.documentElement]):new dr$4([[t]],pr$4)}(this).select("div");})),this.canvasBuffers=[document.getElementById(`${this.uniqueId}-0`),document.getElementById(`${this.uniqueId}-1`)],this.ctxBuffers=this.canvasBuffers.map((t=>t.getContext("2d",{alpha:"false"}))),this.swapContexts();}swapContexts(){const t=this.currentContext;this.canvasBuffers[t].style.visibility="visible";const e=(this.currentContext+1)%2;this.canvasBuffers[e].style.visibility="hidden",this.currentContext=e,this.ctx=this.ctxBuffers[e];}draw(){this.ctx&&(this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawScene(),this.swapContexts());}zoomRefreshed(){super.zoomRefreshed(),this.handleZooomChanged();}render(){const t={width:`${this.width}px`,height:`${this.height}px`,cursor:this.mouse.cursorState,position:"relative",flexShrink:0},e={position:"absolute",left:0,top:0};return G$4`
      <div id=${this.uniqueId} style=${Zn$4(t)}>
        <canvas
          style=${Zn$4(e)}
          id=${`${this.uniqueId}-0`}
          width=${this.width}
          height=${this.height}
        >
          Your browser does not seem to support HTML5 canvas.
        </canvas>
        <canvas
          style=${Zn$4(e)}
          id=${`${this.uniqueId}-1`}
          width=${this.width}
          height=${this.height}
        >
          Your browser does not seem to support HTML5 canvas.
        </canvas>
        <fake-scroll
          overflowX="hidden"
          overflowY="initial"
          width=${this.width}
          height=${this.height}
          fullWidth=${this.fullWidth}
          fullHeight=${this.fullHeight}
          x=${this.x}
          y=${this.y}
        ></fake-scroll>
      </div>
    `}};h$3([mt$4()],as$1.prototype,"mouse",void 0),h$3([mt$4()],as$1.prototype,"fullWidth",void 0),h$3([mt$4()],as$1.prototype,"fullHeight",void 0),h$3([mt$4()],as$1.prototype,"x",void 0),h$3([mt$4()],as$1.prototype,"y",void 0);const hs$1="A".charCodeAt(0);let ls$1 = class ls{drawTile({row:t,column:e}){if(!this.props)return;const n=this.props.tileWidth,i=this.props.tileHeight,r=i*(t-this.props.startYTile),o=n*(e-this.props.startXTile);if(t>=this.props.sequences.raw.length)return;const s=this.props.sequences.raw[t].sequence;if(e>=s.length)return;const a=s[e];if(void 0!==a){const t=this.props.colorScheme.getColor(a,e),s=this.getOverlayFactor(a,e),h=`${a}-${t}-${s}`,l=this.props.residueTileCache.createTile({key:h,tileWidth:n,tileHeight:i,create:({ctx:e})=>this.drawResidue({text:a,canvas:e,colorSchemeName:t,overlayFactor:s})});l.width>0&&l.height>0&&this.props.ctx.drawImage(l,0,0,n,i,o,r,n,i);}}getOverlayFactor(t,e){var n;if(!(null===(n=this.props)||void 0===n?void 0:n.overlayConservation)||!this.props.conservation)return 1;const i=t.charCodeAt(0)-hs$1;if(i<0||i>=26)return 0;const r=this.props.conservation.map[26*e+i]||0;return Math.floor(5*r)/5}drawResidue({canvas:t,colorSchemeName:e,text:n,overlayFactor:i=1}){if(!this.props)return;t.globalAlpha=.7*i,t.fillStyle=e,t.fillRect(0,0,this.props.tileWidth,this.props.tileHeight);if(this.props.tileWidth<4)return;this.props.border&&(t.globalAlpha=1,t.lineWidth=this.props.borderWidth,t.strokeStyle=this.props.borderColor,t.strokeRect(0,0,this.props.tileWidth,this.props.tileHeight));const r=1/6,o=4*-r;t.globalAlpha=Math.min(1,r*this.props.tileWidth+o),t.fillStyle=this.props.textColor,t.font=this.props.textFont,t.textBaseline="middle",t.textAlign="center",t.fillText(n,this.props.tileWidth/2,this.props.tileHeight/2+1,this.props.tileWidth);}draw(t){this.props=t;for(let t=this.props.startYTile;t<this.props.endYTile;t++)for(let e=this.props.startXTile;e<this.props.endXTile;e++)this.drawTile({row:t,column:e});}};let us$1 = class us{constructor({maxElements:t}={}){this.cache={},this.spec={},this.cachedElements=0,this.maxElements=t||200,this.invalidate();}createTile({key:t,tileWidth:e,tileHeight:n,create:i}){if(t in this.cache)return this.cache[t].value;if(this.cachedElements>=this.maxElements){const t=Kn$4(Object.keys(this.cache),(t=>this.cache[t].insertionTime));t&&delete this.cache[t];}const r=document.createElement("canvas");this.cache[t]={value:r,insertionTime:Date.now()},r.width=e,r.height=n;const o=r.getContext("2d");return this.cachedElements++,o&&i({ctx:o}),r}updateTileSpecs(t){return !Vn$4(this.spec,t)&&(this.invalidate(),this.spec=t,!0)}invalidate(){this.cache={},this.spec={},this.cachedElements=0;}};let cs$1 = class cs{};function fs(t,e){return t-t%e}cs$1.relative=function(t){if(void 0!==t.changedTouches)return cs$1.relative(t.changedTouches[0]);const e=t;let n=e.offsetX,i=e.offsetY;if(void 0===n){const t=e.target,r=t.getBoundingClientRect();if(n=e.clientX-r.left,i=e.clientY-r.top,void 0===n&&(n=e.pageX-t.offsetLeft,i=e.pageY-t.offsetTop,void 0===n))return console.log(e,"No mouse event defined."),{xPos:-1,yPos:-1}}return {xPos:n,yPos:i}},cs$1.absolute=function(t){if(void 0!==t.changedTouches)return cs$1.absolute(t.changedTouches[0]);const e=t;let n=e.pageX,i=e.pageY;return void 0===n&&(n=e.offsetX,i=e.offsetY),void 0===n&&(n=e.clientX,i=e.clientY),void 0===n&&(n=e.x,i=e.y),{xPos:n,yPos:i}},cs$1.wheelDelta=function(t){let e=[t.deltaX,t.deltaY];return void 0===e[0]&&t.movementX&&(e=[t.movementX,t.movementY]),isNaN(e[0])&&(e[0]=0),isNaN(e[1])&&(e[1]=0),e};class ps{constructor(t){this.defaultColor="#ffffff",this.type="static",this.map=t;}getColor(t){return void 0!==this.map[t]?this.map[t]:this.defaultColor}}class ds{constructor(t,e){this.type="dyn",this.opt=e;const n=t;void 0!==n.init?(n.init.call(this),this.getColor=n.run,this.reset=n.init,this.map=n.map):this.getColor=t;}}var vs={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},gs={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},ys={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"},ms={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},_s={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"};const bs="A".charCodeAt(0),ws=new Set([""," ","-","_","."]),$s={aliphatic:{A:"#00639a",V:"#00639a",L:"#00639a",I:"#00639a",P:"#00639a"},aromatic:{F:"#00639a",W:"#00639a",Y:"#00639a",H:"#00639a"},buried:vs,buried_index:vs,charged:{D:"#00639a",E:"#00639a",K:"#00639a",R:"#00639a",H:"#00639a"},cinema:{A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"},clustal2:{A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"},clustal:{A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"},helix:gs,helix_propensity:gs,hydro:{A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"},lesk:{A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"},mae:{A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"},negative:{D:"#00639a",E:"#00639a"},nucleotide:{A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"},polar:{R:"#00639a",N:"#00639a",D:"#00639a",Q:"#00639a",E:"#00639a",G:"#00639a",H:"#00639a",K:"#00639a",S:"#00639a",T:"#00639a",Y:"#00639a"},positive:{K:"#00639a",R:"#00639a",H:"#00639a"},purine:ys,purine_pyrimidine:ys,serine_threonine:{S:"#00639a",T:"#00639a"},strand:ms,strand_propensity:ms,taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"},turn:_s,turn_propensity:_s,zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},xs={conservation:{init:function(){},run:function(t,...e){const n=e[0],i=t.toUpperCase(),r=e[1];if(!r||1!==r.progress||ws.has(i)||n>r.map.length/26)return "#ffffff";const o=i.charCodeAt(0)-bs;if(o<0||o>=26)return "#ffffff";const s=r.map[26*n+o]||0;return s>.8?"#6464ff":s>.6?"#9da5ff":s>.4?"#cccccc":"#ffffff"},map:{"> 0.8":"#6464ff","> 0.6":"#9da5ff","> 0.4":"#cccccc","> 0":"#ffffff"}}};const As=new class{constructor(t){this.maps={...$s},this.dyn={...xs},this.opt=t;}getScheme(t){let e=this.maps[t];return void 0===e&&(e={},void 0!==this.dyn[t])?new ds(this.dyn[t],this.opt):new ps(e)}addStaticScheme(t,e){this.maps[t]=e;}addDynScheme(t,e){this.dyn[t]=e;}};class Ss{constructor(t){this.scheme=As.getScheme(t);}updateConservation(t){this.conservation=t;}getColor(t,e){return "dyn"===this.scheme.type?this.scheme.getColor(t,e,this.conservation):this.scheme.getColor(t)}}const Es="clustal";let Cs=class extends as$1{set position(t){var e,n;this._position={xPosOffset:-t.xPos%this.tileWidth,yPosOffset:-t.yPos%this.tileHeight,currentViewSequence:on$4(Dn$4(t.yPos/this.tileHeight),0,((null===(e=this.sequences)||void 0===e?void 0:e.length)||1)-1),currentViewSequencePosition:on$4(Dn$4(t.xPos/this.tileWidth),0,(null===(n=this.sequences)||void 0===n?void 0:n.maxLength)||0),...t},this.x=t.xPos,this.y=t.yPos;}get position(){return this._position}constructor(){super(),this.redrawStarted=0,this.redrawnTiles=0,this.colorSchemeManager=new Ss(Es),this.tileWidth=20,this.tileHeight=20,this.colorScheme=Es,this.overlayConservation=!1,this.props={showModBar:!1,xGridSize:10,yGridSize:10,border:!1,borderColor:"black",borderWidth:1,cacheElements:20,textColor:"black",textFont:"18px Arial",overflow:"hidden",overflowX:"auto",overflowY:"auto",scrollBarPositionX:"bottom",scrollBarPositionY:"right",conservation:null,sequenceDisableDragging:!1},this.mouseOverFeatureIds=[],this.renderTile=({row:t,column:e})=>{const n=t+"-"+e;return this.tileCache.createTile({key:n,tileWidth:this.tileWidth*this.props.xGridSize,tileHeight:this.tileHeight*this.props.yGridSize,create:({ctx:n})=>{this.sequences&&this.tilingGridManager.draw({ctx:n,startYTile:t,startXTile:e,residueTileCache:this.residueTileCache,endYTile:t+this.props.yGridSize,endXTile:e+this.props.xGridSize,sequences:this.sequences,colorScheme:this.colorSchemeManager,textFont:this.props.textFont,textColor:this.props.textColor,tileHeight:this.tileHeight,tileWidth:this.tileWidth,border:this.props.border,borderWidth:this.props.borderWidth,borderColor:this.props.borderColor,overlayConservation:this.overlayConservation,conservation:this.props.conservation});}})},this.movePosition=t=>{if(!this.position)throw Error("This method requires position to be set");(t.xMovement||t.yMovement)&&(this.position={xPos:this.position.xPos+t.xMovement,yPos:this.position.yPos+t.yMovement});},this.onPositionUpdate=(t,e)=>{const n={xMovement:t.xPos-e.xPos,yMovement:t.yPos-e.yPos};this.sendEvent("onPositionUpdate",e),this.movePosition(n);},this.updateScrollPosition=()=>{this.draw();},this.onMouseMove=t=>{const e=this.currentPointerPosition(t),n=this.currentMouseSequencePosition;if(!Vn$4(n,e)&&(void 0!==n&&this.sendEvent("onResidueMouseLeave",n),this.currentMouseSequencePosition=e,this.sendEvent("onResidueMouseEnter",e),this.features&&this.features.length>0)){const t=this.mouseOverFeatureIds||[],n=this.sequencePositionToFeatureIds(e);Vn$4(t,n)||(this.mouseOverFeatureIds=n,super.draw());}},this.onMouseLeave=()=>{this.sendEvent("onResidueMouseLeave",this.currentMouseSequencePosition),this.currentMouseSequencePosition=void 0,this.mouseOverFeatureIds&&(this.mouseOverFeatureIds=[],super.draw());},this.onClick=t=>{if(!this.mouseHasMoved){const e=this.currentPointerPosition(t);this.sendEvent("onResidueClick",e),this.features&&this.sequencePositionToFeatureIds(e).forEach((e=>{this.sendEvent("onFeatureClick",{event:t,id:e});}));}},this.onDoubleClick=t=>{const e=this.currentPointerPosition(t);this.sendEvent("onResidueDoubleClick",e);},this.tileCache=new us$1,this.residueTileCache=new us$1,this.tilingGridManager=new ls$1,this.onClick=this.onClick.bind(this),this.onDoubleClick=this.onDoubleClick.bind(this),this.draw=this.draw.bind(this);}setProp(t,e){this.props={...this.props,[t]:e},"conservation"===t&&(this.colorSchemeManager.updateConservation(e),this.draw());}getColorMap(){return {name:this.colorScheme,map:this.colorSchemeManager.scheme.map}}willUpdate(t){var e,n;(t.has("sequences")||t.has("tileWidth")||t.has("width")||t.has("height"))&&(this.stats=this.sequences?{nrXTiles:Math.ceil(this.width/this.tileWidth)+1,nrYTiles:Math.ceil(this.height/this.tileHeight)+1,fullWidth:this.tileWidth*this.sequences.maxLength,fullHeight:this.tileHeight*this.sequences.length}:void 0,this.fullWidth=this.tileWidth*((null===(e=this.sequences)||void 0===e?void 0:e.maxLength)||0),this.fullHeight=this.tileHeight*((null===(n=this.sequences)||void 0===n?void 0:n.length)||0)),t.has("colorScheme")&&(this.colorSchemeManager=new Ss(this.colorScheme),this.props.conservation&&this.colorSchemeManager.updateConservation(this.props.conservation));}firstUpdated(){var t,e,n;super.firstUpdated(),null===(t=this.container)||void 0===t||t.addEventListener("mousemove",this.onMouseMove),null===(e=this.container)||void 0===e||e.addEventListener("click",this.onClick),null===(n=this.container)||void 0===n||n.addEventListener("dblclick",this.onDoubleClick),this.addEventListener("fake-scroll",(t=>{this.movePosition(t.detail.movement);}));}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this.container)||void 0===t||t.removeEventListener("mousemove",this.onMouseMove);}handleZooomChanged(){this.tileWidth=this.getSingleBaseWidth(),this.position={xPos:((this["display-start"]||1)-1)*this.tileWidth,yPos:this.position.yPos};}drawScene(){const t=this.getTilePositions();t&&(this.updateTileSpecs(),this.drawTiles(t),this.drawHighlightedRegions(),this.ctx&&this.ctx.canvas.dispatchEvent(new CustomEvent("drawCompleted",{bubbles:!0})));}getTilePositions(){if(!this.position||!this.sequences||!this.stats)return null;const t=Math.max(0,this.position.currentViewSequencePosition-this.props.cacheElements),e=Math.max(0,this.position.currentViewSequence-this.props.cacheElements),n=Math.min(this.sequences.length,e+this.stats.nrYTiles+2*this.props.cacheElements);return {startXTile:t,startYTile:e,endXTile:Math.min(this.sequences.maxLength,t+this.stats.nrXTiles+2*this.props.cacheElements),endYTile:n}}drawTiles({startXTile:t,startYTile:e,endXTile:n,endYTile:i}){var r;if(!this.position)throw Error("This method requires position to be set");const o=this.props.xGridSize,s=this.props.yGridSize,a=fs(e,s),h=fs(t,o);for(let t=a;t<i;t+=s)for(let e=h;e<n;e+=o){const n=this.renderTile({row:t,column:e}),i=o*this.tileWidth,a=s*this.tileHeight,h=(t-this.position.currentViewSequence)*this.tileHeight+this.position.yPosOffset,l=(e-this.position.currentViewSequencePosition)*this.tileWidth+this.position.xPosOffset;null===(r=this.ctx)||void 0===r||r.drawImage(n,0,0,i,a,l,h,i,a);}}drawHighlightedRegions(){if(this.highlight)if(Array.isArray(this.highlight))for(const t of this.highlight)this.drawHighlightedRegion(t);else this.drawHighlightedRegion(this.highlight);this.features&&this.features.forEach((t=>{this.drawHighlightedRegion(t);}));}drawHighlightedRegion(t){var e;if(!this.ctx||!t||!this.position)return;const n=this.tileWidth*(1+t.residues.to-t.residues.from);if(!n)return;const i=this.tileHeight*(1+t.sequences.to-t.sequences.from);if(!i)return;const r=(t.sequences.from-this.position.currentViewSequence)*this.tileHeight+this.position.yPosOffset,o=(t.residues.from-1-this.position.currentViewSequencePosition)*this.tileWidth+this.position.xPosOffset,s=document.createElement("canvas");s.width=n,s.height=i;const a=s.getContext("2d");if(!a)return;const h=null===(e=this.mouseOverFeatureIds)||void 0===e?void 0:e.some((e=>e===t.id));a.globalAlpha=.3,a.fillStyle=h?t.mouseOverFillColor||"green":t.fillColor||"#9999FF",a.fillRect(0,0,n,i),a.globalAlpha=1,a.strokeStyle=h?t.mouseOverBorderColor||"black ":t.borderColor||"777700",a.lineWidth=4,a.rect(0,0,n,i),a.stroke(),this.ctx.drawImage(s,0,0,n,i,o,r,n,i);}positionToSequence(t){if(!this.position||!this.sequences)throw Error("This method requires position and sequence to be set");const e=this.sequences.raw,n=on$4(Dn$4((this.position.yPos+t.yPos)/this.tileHeight),0,e.length-1),i=e[n],r=on$4(Dn$4((this.position.xPos+t.xPos)/this.tileWidth),0,i.sequence.length-1);return {i:n,sequence:i,position:r,residue:i.sequence[r]}}sequencePositionToFeatureIds(t){return this.features?this.features.filter((e=>e.id&&t.position>=e.residues.from-1&&t.position<=e.residues.to-1&&t.i>=e.sequences.from&&t.i<=e.sequences.to)).map((t=>t.id||"")):[]}currentPointerPosition(t){return this.positionToSequence(cs$1.relative(t))}sendEvent(t,e){this.ctx&&this.ctx.canvas.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e}));}componentWillUnmount(){this.tileCache.invalidate(),this.residueTileCache.invalidate();}updateTileSpecs(){const t={tileWidth:this.tileWidth,tileHeight:this.tileHeight,colorScheme:this.colorSchemeManager,textFont:this.props.textFont,borderColor:this.props.borderColor,overlayConservation:this.overlayConservation,conservation:this.props.conservation};this.tileCache.updateTileSpecs({...t,xGridSize:this.props.xGridSize,yGridSize:this.props.yGridSize,sequences:this.sequences}),this.residueTileCache.updateTileSpecs(t);}render(){return super.render()}updated(){this.draw();}};h$3([yt$4({type:Number,attribute:"tile-width"})],Cs.prototype,"tileWidth",void 0),h$3([yt$4({type:Number,attribute:"tile-height"})],Cs.prototype,"tileHeight",void 0),h$3([yt$4({type:String,attribute:"color-scheme"})],Cs.prototype,"colorScheme",void 0),h$3([yt$4({type:Boolean,attribute:"overlay-conservation"})],Cs.prototype,"overlayConservation",void 0),h$3([mt$4()],Cs.prototype,"props",void 0),h$3([mt$4()],Cs.prototype,"sequences",void 0),h$3([mt$4()],Cs.prototype,"position",null),h$3([mt$4()],Cs.prototype,"highlight",void 0),h$3([mt$4()],Cs.prototype,"features",void 0),Cs=h$3([dt$4("msa-sequence-viewer")],Cs);let Ps=class extends ft$4{constructor(){super(...arguments),this.width=0,this.height=0,this.y=0,this.labels=[],this.tileHeight=20,this.activeLabel="";}willUpdate(t){if(t.has("y")){const t=this.renderRoot.querySelector("ul");t&&(t.scrollTop=this.y);}}render(){const t={width:`${this.width}px`,height:`${this.height}px`,"list-style":"none",padding:0,margin:0,"line-height":`${this.tileHeight}px`,color:"rgb(0, 99, 154)","text-transform":"uppercase",overflow:"hidden","font-weight":"normal","font-size":"14px",cursor:"pointer"};return G$4`<ul style=${Zn$4(t)}>
      ${this.labels.map((t=>G$4`<li
            style=${"font-weight: "+(this.activeLabel===t?"bold":"normal")}
            @click=${()=>{this.activeLabel=t,this.dispatchEvent(new CustomEvent("msa-active-label",{bubbles:!0,detail:{label:t}}));}}
          >
            ${t}
          </li>`))}
    </ul>`}};h$3([yt$4({type:Number})],Ps.prototype,"width",void 0),h$3([yt$4({type:Number})],Ps.prototype,"height",void 0),h$3([yt$4({type:Number})],Ps.prototype,"y",void 0),h$3([mt$4()],Ps.prototype,"labels",void 0),h$3([yt$4({type:Number,attribute:"tile-height"})],Ps.prototype,"tileHeight",void 0),h$3([yt$4({attribute:"active-label",reflect:!0})],Ps.prototype,"activeLabel",void 0),Ps=h$3([dt$4("msa-labels")],Ps);const ks=`\nself.addEventListener('message', (e) => {\n  if (self.previous !== e.data) {\n    const f = ${((t,e=null,n=!1)=>{const i="A".charCodeAt(0),r=t&&t.length&&t[0].sequence.length||0,o=e?Math.min(e,t.length):t.length,s=e?t.slice(0,o):t,a=new Float32Array(26*r);for(let t=0;t<s.length;t++){const{sequence:e}=s[t];for(let t=0;t<e.length;t++){const n=26*t,r=e[t].toUpperCase().charCodeAt(0)-i;r<0||r>=26||a[n+r]++;}}for(let t=0;t<a.length;t++)a[t]/=o;return n&&self.postMessage({progress:1,conservation:a},[a.buffer]),a}).toString()};\n    f(e.data.sequences, e.data.sampleSize, true);\n  }\n  self.previous = e.data;\n})`,Ms="clustal2";let Ts=class extends(tr$5(Fi$3(rr$5(Ki$3(k$5(Li$3(ro$1))))))){constructor(){super(),this.colorScheme=Ms,this.labelWidth=0,this.tileHeight=20,this.activeLabel="",this.sampleSize=20,this.overlayConservtion=!1,this.worker=new Worker(window.URL.createObjectURL(new Blob([ks]))),this.worker.onmessage=t=>{var e;if(this.dispatchEvent(new CustomEvent("conservationProgress",{bubbles:!0,detail:t.data})),1===t.data.progress){const n={...t.data,map:t.data.conservation};null===(e=this.sequenceViewer)||void 0===e||e.setProp("conservation",n);}};}set data(t){this.length=Math.max(...t.map((({sequence:t})=>t.length)));const e={raw:t,length:t.length,maxLength:this.length};this.sequenceViewer&&(this.sequenceViewer.sequences=e),this.labelPanel&&(this.labelPanel.labels=t.map((({name:t})=>t))),this.worker.postMessage({sequences:t,sampleSize:this.sampleSize});}set features(t){this.sequenceViewer&&(this.sequenceViewer.features=t);}getColorMap(){var t;return null===(t=this.sequenceViewer)||void 0===t?void 0:t.getColorMap()}render(){const t={height:`${this["margin-top"]}px`,width:"100%",background:this["margin-color"]},e={width:`${this["margin-left"]}px`,background:this["margin-color"]},n={width:`${this["margin-right"]}px`,background:this["margin-color"]},i={height:`${this["margin-bottom"]}px`,width:"100%",background:this["margin-color"]},r=this.labelWidth||0,o=this.tileHeight||20;return G$4`
      ${this["margin-top"]>0?G$4`<div style=${Zn$4(t)}></div>`:""}
      <div style=${Zn$4({display:"flex","align-items":"stretch"})}>
        ${r>0?G$4`<msa-labels
              width=${r}
              height=${this.height}
              tile-height=${o}
              active-label=${this.activeLabel||""}
            ></msa-labels>`:""}

        <div style=${Zn$4(e)}></div>
        <msa-sequence-viewer
          height=${this.height}
          width=${this.getWidthWithMargins()-r}
          color-scheme=${this.colorScheme||Ms}
          tile-height=${o}
          display-start=${this["display-start"]||0}
          display-end=${this["display-end"]||0}
          length=${this.length||0}
          ?overlay-conservation=${this.overlayConservtion}
        ></msa-sequence-viewer>
        <div style=${Zn$4(n)}></div>
      </div>
      ${this["margin-bottom"]>0?G$4`<div style=${Zn$4(i)}></div>`:""}
    `}updated(){var t;(null===(t=this.sequenceViewer)||void 0===t?void 0:t.sequences)&&(this.sequenceViewer.highlight=this.highlightedRegion.segments.map((({start:t,end:e})=>{var n;return {sequences:{from:0,to:((null===(n=this.sequenceViewer)||void 0===n?void 0:n.sequences)||[]).length-1},residues:{from:t,to:e},fillColor:this["highlight-color"],borderColor:this["highlight-color"]}})));}firstUpdated(){this.sequenceViewer=this.renderRoot.querySelector("msa-sequence-viewer"),this.labelPanel=this.renderRoot.querySelector("msa-labels"),this.sequenceViewer&&(this.sequenceViewer.position={xPos:0,yPos:0},this.addEventListener("fake-scroll",(()=>{this.labelPanel&&this.sequenceViewer&&(this.labelPanel.y=this.sequenceViewer.position.yPos);})),this.addEventListener("msa-active-label",(()=>{this.labelPanel&&(this.activeLabel=this.labelPanel.activeLabel);})));}};h$3([yt$4({attribute:"color-scheme"})],Ts.prototype,"colorScheme",void 0),h$3([yt$4({type:Number,attribute:"label-width"})],Ts.prototype,"labelWidth",void 0),h$3([yt$4({type:Number,attribute:"tile-height"})],Ts.prototype,"tileHeight",void 0),h$3([yt$4({attribute:"active-label",reflect:!0})],Ts.prototype,"activeLabel",void 0),h$3([yt$4({type:Number,attribute:"conservation-sample-size"})],Ts.prototype,"sampleSize",void 0),h$3([yt$4({type:Boolean,attribute:"overlay-conservation"})],Ts.prototype,"overlayConservtion",void 0),Ts=h$3([dt$4("nightingale-msa")],Ts);var Os=Ts;

var index$4 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    default: Os
});

function e$1(t,e,s,i){var r,o=arguments.length,n=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(o<3?r(n):o>3?r(e,s,n):r(e,s))||n);return o>3&&n&&Object.defineProperty(e,s,n),n}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const s$1=globalThis,i$1=s$1.ShadowRoot&&(void 0===s$1.ShadyCSS||s$1.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r$1=Symbol(),o$1=new WeakMap;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let n$1=class n{constructor(t,e,s){if(this._$cssResult$=!0,s!==r$1)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e;}get styleSheet(){let t=this.o;const e=this.t;if(i$1&&void 0===t){const s=void 0!==e&&1===e.length;s&&(t=o$1.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),s&&o$1.set(e,t));}return t}toString(){return this.cssText}};const a$2=(t,e)=>{if(i$1)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const i of e){const e=document.createElement("style"),r=s$1.litNonce;void 0!==r&&e.setAttribute("nonce",r),e.textContent=i.cssText,t.appendChild(e);}},h$2=i$1?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const s of t.cssRules)e+=s.cssText;return (t=>new n$1("string"==typeof t?t:t+"",void 0,r$1))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:l$3,defineProperty:c$4,getOwnPropertyDescriptor:p$4,getOwnPropertyNames:d$4,getOwnPropertySymbols:u$3,getPrototypeOf:f$4}=Object,y$4=globalThis,b$4=y$4.trustedTypes,m$4=b$4?b$4.emptyScript:"",g$4=y$4.reactiveElementPolyfillSupport,E$4=(t,e)=>t,v$4={toAttribute(t,e){switch(e){case Boolean:t=t?m$4:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t);}return t},fromAttribute(t,e){let s=t;switch(e){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t);}catch(t){s=null;}}return s}},S$4=(t,e)=>!l$3(t,e),$$4={attribute:!0,type:String,converter:v$4,reflect:!1,hasChanged:S$4};Symbol.metadata??=Symbol("metadata"),y$4.litPropertyMetadata??=new WeakMap;let _$4 = class _ extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t);}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=$$4){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const s=Symbol(),i=this.getPropertyDescriptor(t,s,e);void 0!==i&&c$4(this.prototype,t,i);}}static getPropertyDescriptor(t,e,s){const{get:i,set:r}=p$4(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t;}};return {get(){return i?.call(this)},set(e){const o=i?.call(this);r.call(this,e),this.requestUpdate(t,o,s);},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??$$4}static _$Ei(){if(this.hasOwnProperty(E$4("elementProperties")))return;const t=f$4(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties);}static finalize(){if(this.hasOwnProperty(E$4("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(E$4("properties"))){const t=this.properties,e=[...d$4(t),...u$3(t)];for(const s of e)this.createProperty(s,t[s]);}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,s]of e)this.elementProperties.set(t,s);}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const s=this._$Eu(t,e);void 0!==s&&this._$Eh.set(s,t);}this.elementStyles=this.finalizeStyles(this.styles);}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const s=new Set(t.flat(1/0).reverse());for(const t of s)e.unshift(h$2(t));}else void 0!==t&&e.push(h$2(t));return e}static _$Eu(t,e){const s=e.attribute;return !1===s?void 0:"string"==typeof s?s:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev();}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)));}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.();}removeController(t){this._$EO?.delete(t);}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const s of e.keys())this.hasOwnProperty(s)&&(t.set(s,this[s]),delete this[s]);t.size>0&&(this._$Ep=t);}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return a$2(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()));}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()));}attributeChangedCallback(t,e,s){this._$AK(t,s);}_$EC(t,e){const s=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,s);if(void 0!==i&&!0===s.reflect){const r=(void 0!==s.converter?.toAttribute?s.converter:v$4).toAttribute(e,s.type);this._$Em=t,null==r?this.removeAttribute(i):this.setAttribute(i,r),this._$Em=null;}}_$AK(t,e){const s=this.constructor,i=s._$Eh.get(t);if(void 0!==i&&this._$Em!==i){const t=s.getPropertyOptions(i),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:v$4;this._$Em=i,this[i]=r.fromAttribute(e,t.type),this._$Em=null;}}requestUpdate(t,e,s){if(void 0!==t){if(s??=this.constructor.getPropertyOptions(t),!(s.hasChanged??S$4)(this[t],e))return;this.P(t,e,s);}!1===this.isUpdatePending&&(this._$ES=this._$ET());}P(t,e,s){this._$AL.has(t)||this._$AL.set(t,e),!0===s.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t);}async _$ET(){this.isUpdatePending=!0;try{await this._$ES;}catch(t){Promise.reject(t);}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0;}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,s]of t)!0!==s.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],s);}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU();}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e);}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t);}_$EU(){this._$AL=new Map,this.isUpdatePending=!1;}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return !0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU();}updated(t){}firstUpdated(t){}};_$4.elementStyles=[],_$4.shadowRootOptions={mode:"open"},_$4[E$4("elementProperties")]=new Map,_$4[E$4("finalized")]=new Map,g$4?.({ReactiveElement:_$4}),(y$4.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const w$4={attribute:!0,type:String,converter:v$4,reflect:!1,hasChanged:S$4},A$4=(t=w$4,e,s)=>{const{kind:i,metadata:r}=s;let o=globalThis.litPropertyMetadata.get(r);if(void 0===o&&globalThis.litPropertyMetadata.set(r,o=new Map),o.set(s.name,t),"accessor"===i){const{name:i}=s;return {set(s){const r=e.get.call(this);e.set.call(this,s),this.requestUpdate(i,r,t);},init(e){return void 0!==e&&this.P(i,void 0,t),e}}}if("setter"===i){const{name:i}=s;return function(s){const r=this[i];e.call(this,s),this.requestUpdate(i,r,t);}}throw Error("Unsupported decorator location: "+i)};function P$4(t){return (e,s)=>"object"==typeof s?A$4(t,e,s):((t,e,s)=>{const i=e.hasOwnProperty(s);return e.constructor.createProperty(s,i?{...t,wrapped:!0}:t),i?Object.getOwnPropertyDescriptor(e,s):void 0})(t,e,s)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function U$4(t){return P$4({...t,state:!0,attribute:!1})}var C$4;let O$4=C$4=class extends ro$1{constructor(){super(...arguments),this.reflectedAttributes=new Map,this.htmlElements=new Set,this.propertyValues=new Map;}connectedCallback(){super.connectedCallback(),this.addEventListener("change",this.changeListener),this.style.display="block";}attributeChangedCallback(t,e,s){super.attributeChangedCallback(t,e,s),this.applyAttributes();}applyAttributes(){this.htmlElements.forEach((t=>this.applyAttributesOnElement(t)));}applyAttributesOnElement(t){var e;null===(e=this.reflectedAttributes)||void 0===e||e.forEach(((e,s)=>{!1===e||null==e?t.removeAttribute(s):t.setAttribute(s,"boolean"==typeof e?"":e);})),this.length&&t.setAttribute("length",`${this.length}`),this["display-end"]&&t.setAttribute("display-end",`${this["display-end"]}`),this["display-start"]&&t.setAttribute("display-start",`${this["display-start"]}`),this.highlight&&t.setAttribute("highlight",this.highlight);}register(t){this.htmlElements.add(t),this.applyAttributesOnElement(t);}unregister(t){this.htmlElements.delete(t);}applyProperties(t){if(t){const e=this.querySelector(`#${t}`);if(!e)return;this.propertyValues.forEach(((t,s)=>{e[s]=t;}));}else this.htmlElements.forEach((t=>{t&&this.propertyValues.forEach(((e,s)=>{t[s]=e;}));}));}isRegisteredAttribute(t){return !!this.reflectedAttributes&&([...this.reflectedAttributes.keys()].includes(t)||C$4.observedAttributes.includes(t))}changeListener(t){var e;if(t.detail)if("property"===t.detail.handler)this.propertyValues.set(t.detail.type,t.detail.value),this.applyProperties(t.detail.for);else this.isRegisteredAttribute(t.detail.type)&&(null===(e=this.reflectedAttributes)||void 0===e||e.set(t.detail.type,t.detail.value)),Object.keys(t.detail).forEach((e=>{var s;this.isRegisteredAttribute(e)&&(null===(s=this.reflectedAttributes)||void 0===s||s.set(e,t.detail[e]));})),this.applyAttributes();}};e$1([P$4({attribute:"reflected-attributes",converter:{fromAttribute:t=>{if(!t)return null;const e=t.split(",");if(e.includes("type"))throw new Error("'type' can't be used as a Nightingale attribute");if(e.includes("value"))throw new Error("'value' can't be used as a Nightingale attribute");return new Map(e.filter((t=>!O$4.observedAttributes.includes(t))).map((t=>[t,null])))}}})],O$4.prototype,"reflectedAttributes",void 0),e$1([P$4({type:Number})],O$4.prototype,"length",void 0),e$1([P$4({type:Number})],O$4.prototype,"display-start",void 0),e$1([P$4({type:Number})],O$4.prototype,"display-end",void 0),e$1([P$4({type:String})],O$4.prototype,"highlight",void 0),e$1([U$4()],O$4.prototype,"htmlElements",void 0),e$1([U$4()],O$4.prototype,"propertyValues",void 0),O$4=C$4=e$1([(t=>(e,s)=>{void 0!==s?s.addInitializer((()=>{customElements.define(t,e);})):customElements.define(t,e);})("nightingale-manager")],O$4);var R$4=O$4;

var index$3 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    default: R$4
});

function a$1(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function u$2(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return "m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function h$1(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return "a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const l$2=globalThis,c$3=l$2.ShadowRoot&&(void 0===l$2.ShadyCSS||l$2.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,f$3=Symbol(),p$3=new WeakMap;let d$3=class d{constructor(t,e,n){if(this._$cssResult$=!0,n!==f$3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e;}get styleSheet(){let t=this.o;const e=this.t;if(c$3&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=p$3.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&p$3.set(e,t));}return t}toString(){return this.cssText}};const g$3=c$3?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return (t=>new d$3("string"==typeof t?t:t+"",void 0,f$3))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:m$3,defineProperty:y$3,getOwnPropertyDescriptor:v$3,getOwnPropertyNames:_$3,getOwnPropertySymbols:w$3,getPrototypeOf:b$3}=Object,$$3=globalThis,A$3=$$3.trustedTypes,x$3=A$3?A$3.emptyScript:"",M$3=$$3.reactiveElementPolyfillSupport,E$3=(t,e)=>t,k$3={toAttribute(t,e){switch(e){case Boolean:t=t?x$3:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t);}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t);}catch(t){n=null;}}return n}},S$3=(t,e)=>!m$3(t,e),N$3={attribute:!0,type:String,converter:k$3,reflect:!1,hasChanged:S$3};Symbol.metadata??=Symbol("metadata"),$$3.litPropertyMetadata??=new WeakMap;let P$3 = class P extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t);}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=N$3){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(t,n,e);void 0!==r&&y$3(this.prototype,t,r);}}static getPropertyDescriptor(t,e,n){const{get:r,set:i}=v$3(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t;}};return {get(){return r?.call(this)},set(e){const s=r?.call(this);i.call(this,e),this.requestUpdate(t,s,n);},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??N$3}static _$Ei(){if(this.hasOwnProperty(E$3("elementProperties")))return;const t=b$3(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties);}static finalize(){if(this.hasOwnProperty(E$3("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(E$3("properties"))){const t=this.properties,e=[..._$3(t),...w$3(t)];for(const n of e)this.createProperty(n,t[n]);}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n);}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t);}this.elementStyles=this.finalizeStyles(this.styles);}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(g$3(t));}else void 0!==t&&e.push(g$3(t));return e}static _$Eu(t,e){const n=e.attribute;return !1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev();}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)));}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.();}removeController(t){this._$EO?.delete(t);}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t);}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return ((t,e)=>{if(c$3)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of e){const e=document.createElement("style"),r=l$2.litNonce;void 0!==r&&e.setAttribute("nonce",r),e.textContent=n.cssText,t.appendChild(e);}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()));}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()));}attributeChangedCallback(t,e,n){this._$AK(t,n);}_$EC(t,e){const n=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,n);if(void 0!==r&&!0===n.reflect){const i=(void 0!==n.converter?.toAttribute?n.converter:k$3).toAttribute(e,n.type);this._$Em=t,null==i?this.removeAttribute(r):this.setAttribute(r,i),this._$Em=null;}}_$AK(t,e){const n=this.constructor,r=n._$Eh.get(t);if(void 0!==r&&this._$Em!==r){const t=n.getPropertyOptions(r),i="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:k$3;this._$Em=r,this[r]=i.fromAttribute(e,t.type),this._$Em=null;}}requestUpdate(t,e,n){if(void 0!==t){if(n??=this.constructor.getPropertyOptions(t),!(n.hasChanged??S$3)(this[t],e))return;this.P(t,e,n);}!1===this.isUpdatePending&&(this._$ES=this._$ET());}P(t,e,n){this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t);}async _$ET(){this.isUpdatePending=!0;try{await this._$ES;}catch(t){Promise.reject(t);}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0;}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t)!0!==n.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],n);}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU();}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e);}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t);}_$EU(){this._$AL=new Map,this.isUpdatePending=!1;}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return !0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU();}updated(t){}firstUpdated(t){}};P$3.elementStyles=[],P$3.shadowRootOptions={mode:"open"},P$3[E$3("elementProperties")]=new Map,P$3[E$3("finalized")]=new Map,M$3?.({ReactiveElement:P$3}),($$3.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const C$3=globalThis,T$3=C$3.trustedTypes,O$3=T$3?T$3.createPolicy("lit-html",{createHTML:t=>t}):void 0,U$3="$lit$",H$3=`lit$${Math.random().toFixed(9).slice(2)}$`,R$3="?"+H$3,z$3=`<${R$3}>`,j$3=document,D$3=()=>j$3.createComment(""),L$3=t=>null===t||"object"!=typeof t&&"function"!=typeof t,I$3=Array.isArray,q$3="[ \t\n\f\r]",B$3=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,V$3=/-->/g,X$3=/>/g,W$3=RegExp(`>|${q$3}(?:([^\\s"'>=/]+)(${q$3}*=${q$3}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Y$3=/'/g,F$3=/"/g,K$3=/^(?:script|style|textarea|title)$/i,G$3=(t=>(e,...n)=>({_$litType$:t,strings:e,values:n}))(1),Z$3=Symbol.for("lit-noChange"),J$3=Symbol.for("lit-nothing"),Q$3=new WeakMap,tt$3=j$3.createTreeWalker(j$3,129);function et$3(t,e){if(!I$3(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==O$3?O$3.createHTML(e):e}const nt$3=(t,e)=>{const n=t.length-1,r=[];let i,s=2===e?"<svg>":3===e?"<math>":"",o=B$3;for(let e=0;e<n;e++){const n=t[e];let a,u,h=-1,l=0;for(;l<n.length&&(o.lastIndex=l,u=o.exec(n),null!==u);)l=o.lastIndex,o===B$3?"!--"===u[1]?o=V$3:void 0!==u[1]?o=X$3:void 0!==u[2]?(K$3.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=W$3):void 0!==u[3]&&(o=W$3):o===W$3?">"===u[0]?(o=i??B$3,h=-1):void 0===u[1]?h=-2:(h=o.lastIndex-u[2].length,a=u[1],o=void 0===u[3]?W$3:'"'===u[3]?F$3:Y$3):o===F$3||o===Y$3?o=W$3:o===V$3||o===X$3?o=B$3:(o=W$3,i=void 0);const c=o===W$3&&t[e+1].startsWith("/>")?" ":"";s+=o===B$3?n+z$3:h>=0?(r.push(a),n.slice(0,h)+U$3+n.slice(h)+H$3+c):n+H$3+(-2===h?e:c);}return [et$3(t,s+(t[n]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),r]};let rt$3 = class rt{constructor({strings:t,_$litType$:e},n){let r;this.parts=[];let i=0,s=0;const o=t.length-1,a=this.parts,[u,h]=nt$3(t,e);if(this.el=rt.createElement(u,n),tt$3.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes);}for(;null!==(r=tt$3.nextNode())&&a.length<o;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(U$3)){const e=h[s++],n=r.getAttribute(t).split(H$3),o=/([.?@])?(.*)/.exec(e);a.push({type:1,index:i,name:o[2],strings:n,ctor:"."===o[1]?ut$3:"?"===o[1]?ht$3:"@"===o[1]?lt$3:at$3}),r.removeAttribute(t);}else t.startsWith(H$3)&&(a.push({type:6,index:i}),r.removeAttribute(t));if(K$3.test(r.tagName)){const t=r.textContent.split(H$3),e=t.length-1;if(e>0){r.textContent=T$3?T$3.emptyScript:"";for(let n=0;n<e;n++)r.append(t[n],D$3()),tt$3.nextNode(),a.push({type:2,index:++i});r.append(t[e],D$3());}}}else if(8===r.nodeType)if(r.data===R$3)a.push({type:2,index:i});else {let t=-1;for(;-1!==(t=r.data.indexOf(H$3,t+1));)a.push({type:7,index:i}),t+=H$3.length-1;}i++;}}static createElement(t,e){const n=j$3.createElement("template");return n.innerHTML=t,n}};function it$3(t,e,n=t,r){if(e===Z$3)return e;let i=void 0!==r?n._$Co?.[r]:n._$Cl;const s=L$3(e)?void 0:e._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),void 0===s?i=void 0:(i=new s(t),i._$AT(t,n,r)),void 0!==r?(n._$Co??=[])[r]=i:n._$Cl=i),void 0!==i&&(e=it$3(t,i._$AS(t,e.values),i,r)),e}let st$3 = class st{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e;}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,r=(t?.creationScope??j$3).importNode(e,!0);tt$3.currentNode=r;let i=tt$3.nextNode(),s=0,o=0,a=n[0];for(;void 0!==a;){if(s===a.index){let e;2===a.type?e=new ot$3(i,i.nextSibling,this,t):1===a.type?e=new a.ctor(i,a.name,a.strings,this,t):6===a.type&&(e=new ct$3(i,this,t)),this._$AV.push(e),a=n[++o];}s!==a?.index&&(i=tt$3.nextNode(),s++);}return tt$3.currentNode=j$3,r}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++;}};let ot$3 = class ot{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,r){this.type=2,this._$AH=J$3,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0;}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=it$3(this,t,e),L$3(t)?t===J$3||null==t||""===t?(this._$AH!==J$3&&this._$AR(),this._$AH=J$3):t!==this._$AH&&t!==Z$3&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>I$3(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t);}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t));}_(t){this._$AH!==J$3&&L$3(this._$AH)?this._$AA.nextSibling.data=t:this.T(j$3.createTextNode(t)),this._$AH=t;}$(t){const{values:e,_$litType$:n}=t,r="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=rt$3.createElement(et$3(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(e);else {const t=new st$3(r,this),n=t.u(this.options);t.p(e),this.T(n),this._$AH=t;}}_$AC(t){let e=Q$3.get(t.strings);return void 0===e&&Q$3.set(t.strings,e=new rt$3(t)),e}k(t){I$3(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,r=0;for(const i of t)r===e.length?e.push(n=new ot(this.O(D$3()),this.O(D$3()),this,this.options)):n=e[r],n._$AI(i),r++;r<e.length&&(this._$AR(n&&n._$AB.nextSibling,r),e.length=r);}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e;}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t));}};let at$3 = class at{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,r,i){this.type=1,this._$AH=J$3,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=J$3;}_$AI(t,e=this,n,r){const i=this.strings;let s=!1;if(void 0===i)t=it$3(this,t,e,0),s=!L$3(t)||t!==this._$AH&&t!==Z$3,s&&(this._$AH=t);else {const r=t;let o,a;for(t=i[0],o=0;o<i.length-1;o++)a=it$3(this,r[n+o],e,o),a===Z$3&&(a=this._$AH[o]),s||=!L$3(a)||a!==this._$AH[o],a===J$3?t=J$3:t!==J$3&&(t+=(a??"")+i[o+1]),this._$AH[o]=a;}s&&!r&&this.j(t);}j(t){t===J$3?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"");}};let ut$3 = class ut extends at$3{constructor(){super(...arguments),this.type=3;}j(t){this.element[this.name]=t===J$3?void 0:t;}};let ht$3 = class ht extends at$3{constructor(){super(...arguments),this.type=4;}j(t){this.element.toggleAttribute(this.name,!!t&&t!==J$3);}};let lt$3 = class lt extends at$3{constructor(t,e,n,r,i){super(t,e,n,r,i),this.type=5;}_$AI(t,e=this){if((t=it$3(this,t,e,0)??J$3)===Z$3)return;const n=this._$AH,r=t===J$3&&n!==J$3||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,i=t!==J$3&&(n===J$3||r);r&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,t),this._$AH=t;}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t);}};let ct$3 = class ct{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n;}get _$AU(){return this._$AM._$AU}_$AI(t){it$3(this,t);}};const ft$3=C$3.litHtmlPolyfillSupport;ft$3?.(rt$3,ot$3),(C$3.litHtmlVersions??=[]).push("3.2.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let pt$3=class pt extends P$3{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0;}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{const r=n?.renderBefore??e;let i=r._$litPart$;if(void 0===i){const t=n?.renderBefore??null;r._$litPart$=i=new ot$3(e.insertBefore(D$3(),t),t,void 0,n??{});}return i._$AI(t),i})(e,this.renderRoot,this.renderOptions);}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0);}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1);}render(){return Z$3}};pt$3._$litElement$=!0,pt$3.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:pt$3});const dt$3=globalThis.litElementPolyfillSupport;dt$3?.({LitElement:pt$3}),(globalThis.litElementVersions??=[]).push("4.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const gt$3={attribute:!0,type:String,converter:k$3,reflect:!1,hasChanged:S$3},mt$3=(t=gt$3,e,n)=>{const{kind:r,metadata:i}=n;let s=globalThis.litPropertyMetadata.get(i);if(void 0===s&&globalThis.litPropertyMetadata.set(i,s=new Map),s.set(n.name,t),"accessor"===r){const{name:r}=n;return {set(n){const i=e.get.call(this);e.set.call(this,n),this.requestUpdate(r,i,t);},init(e){return void 0!==e&&this.P(r,void 0,t),e}}}if("setter"===r){const{name:r}=n;return function(n){const i=this[r];e.call(this,n),this.requestUpdate(r,i,t);}}throw Error("Unsupported decorator location: "+r)};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function yt$3(t){return (e,n)=>"object"==typeof n?mt$3(t,e,n):((t,e,n)=>{const r=e.hasOwnProperty(n);return e.constructor.createProperty(n,r?{...t,wrapped:!0}:t),r?Object.getOwnPropertyDescriptor(e,n):void 0})(t,e,n)}function vt$3(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _t$3(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function wt$3(t){let e,n,r;function i(t,r,i=0,s=t.length){if(i<s){if(0!==e(r,r))return s;do{const e=i+s>>>1;n(t[e],r)<0?i=e+1:s=e;}while(i<s)}return i}return 2!==t.length?(e=vt$3,n=(e,n)=>vt$3(t(e),n),r=(e,n)=>t(e)-n):(e=t===vt$3||t===_t$3?t:bt$3,n=t,r=t),{left:i,center:function(t,e,n=0,s=t.length){const o=i(t,e,n,s-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r,i=0,s=t.length){if(i<s){if(0!==e(r,r))return s;do{const e=i+s>>>1;n(t[e],r)<=0?i=e+1:s=e;}while(i<s)}return i}}}function bt$3(){return 0}const $t$3=wt$3(vt$3).right;wt$3((function(t){return null===t?NaN:+t})).center;const At$3=Math.sqrt(50),xt$3=Math.sqrt(10),Mt$3=Math.sqrt(2);function Et$3(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=At$3?10:s>=xt$3?5:s>=Mt$3?2:1;let a,u,h;return i<0?(h=Math.pow(10,-i)/o,a=Math.round(t*h),u=Math.round(e*h),a/h<t&&++a,u/h>e&&--u,h=-h):(h=Math.pow(10,i)*o,a=Math.round(t/h),u=Math.round(e/h),a*h<t&&++a,u*h>e&&--u),u<a&&.5<=n&&n<2?Et$3(t,e,2*n):[a,u,h]}function kt$3(t,e,n){return Et$3(t=+t,e=+e,n=+n)[2]}function St$3(t){return t}var Nt$3=1e-6;function Pt$3(t){return "translate("+t+",0)"}function Ct$3(t){return e=>+t(e)}function Tt$3(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ot$3(){return !this.__axis}function Ut$3(t,e){var n=[],r=null,i=null,s=6,o=6,a=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,h="y",l=Pt$3;function c(t){var c=r??(e.ticks?e.ticks.apply(e,n):e.domain()),f=i??(e.tickFormat?e.tickFormat.apply(e,n):St$3),p=Math.max(s,0)+a,d=e.range(),g=+d[0]+u,m=+d[d.length-1]+u,y=(e.bandwidth?Tt$3:Ct$3)(e.copy(),u),v=t.selection?t.selection():t,_=v.selectAll(".domain").data([null]),w=v.selectAll(".tick").data(c,e).order(),b=w.exit(),$=w.enter().append("g").attr("class","tick"),A=w.select("line"),x=w.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge($),A=A.merge($.append("line").attr("stroke","currentColor").attr("y2",1*s)),x=x.merge($.append("text").attr("fill","currentColor").attr(h,1*p).attr("dy","0.71em")),t!==v&&(_=_.transition(t),w=w.transition(t),A=A.transition(t),x=x.transition(t),b=b.transition(t).attr("opacity",Nt$3).attr("transform",(function(t){return isFinite(t=y(t))?l(t+u):this.getAttribute("transform")})),$.attr("opacity",Nt$3).attr("transform",(function(t){var e=this.parentNode.__axis;return l((e&&isFinite(e=e(t))?e:y(t))+u)}))),b.remove(),_.attr("d",o?"M"+g+","+1*o+"V"+u+"H"+m+"V"+1*o:"M"+g+","+u+"H"+m),w.attr("opacity",1).attr("transform",(function(t){return l(y(t)+u)})),A.attr("y2",1*s),x.attr(h,1*p).text(f),v.filter(Ot$3).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),v.each((function(){this.__axis=y;}));}return c.scale=function(t){return arguments.length?(e=t,c):e},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),c):n.slice()},c.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),c):r&&r.slice()},c.tickFormat=function(t){return arguments.length?(i=t,c):i},c.tickSize=function(t){return arguments.length?(s=o=+t,c):s},c.tickSizeInner=function(t){return arguments.length?(s=+t,c):s},c.tickSizeOuter=function(t){return arguments.length?(o=+t,c):o},c.tickPadding=function(t){return arguments.length?(a=+t,c):a},c.offset=function(t){return arguments.length?(u=+t,c):u},c}var Ht$3={value:()=>{}};function Rt$3(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[];}return new zt$3(r)}function zt$3(t){this._=t;}function jt$3(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Dt$3(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ht$3,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}zt$3.prototype=Rt$3.prototype={constructor:zt$3,on:function(t,e){var n,r,i=this._,s=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return {type:t,name:e}}))),o=-1,a=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=s[o]).type)i[n]=Dt$3(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Dt$3(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=s[o]).type)&&(n=jt$3(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new zt$3(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i);},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n);}};var Lt$3="http://www.w3.org/1999/xhtml",It$3={svg:"http://www.w3.org/2000/svg",xhtml:Lt$3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qt$3(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),It$3.hasOwnProperty(e)?{space:It$3[e],local:t}:t}function Bt$3(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Lt$3&&e.documentElement.namespaceURI===Lt$3?e.createElement(t):e.createElementNS(n,t)}}function Vt$3(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Xt$3(t){var e=qt$3(t);return (e.local?Vt$3:Bt$3)(e)}function Wt$3(){}function Yt$3(t){return null==t?Wt$3:function(){return this.querySelector(t)}}function Ft$3(){return []}function Kt$3(t){return null==t?Ft$3:function(){return this.querySelectorAll(t)}}function Gt$3(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function Zt$3(t){return function(){return this.matches(t)}}function Jt$3(t){return function(e){return e.matches(t)}}var Qt$3=Array.prototype.find;function te$3(){return this.firstElementChild}var ee$3=Array.prototype.filter;function ne$3(){return Array.from(this.children)}function re$3(t){return new Array(t.length)}function ie$3(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e;}function se$3(t,e,n,r,i,s){for(var o,a=0,u=e.length,h=s.length;a<h;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new ie$3(t,s[a]);for(;a<u;++a)(o=e[a])&&(i[a]=o);}function oe$3(t,e,n,r,i,s,o){var a,u,h,l=new Map,c=e.length,f=s.length,p=new Array(c);for(a=0;a<c;++a)(u=e[a])&&(p[a]=h=o.call(u,u.__data__,a,e)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(t,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new ie$3(t,s[a]);for(a=0;a<c;++a)(u=e[a])&&l.get(p[a])===u&&(i[a]=u);}function ae$3(t){return t.__data__}function ue$3(t){return "object"==typeof t&&"length"in t?t:Array.from(t)}function he$3(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function le$3(t){return function(){this.removeAttribute(t);}}function ce$3(t){return function(){this.removeAttributeNS(t.space,t.local);}}function fe$3(t,e){return function(){this.setAttribute(t,e);}}function pe$3(t,e){return function(){this.setAttributeNS(t.space,t.local,e);}}function de$3(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n);}}function ge$3(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n);}}function me$3(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ye$3(t){return function(){this.style.removeProperty(t);}}function ve$3(t,e,n){return function(){this.style.setProperty(t,e,n);}}function _e$3(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n);}}function we$3(t,e){return t.style.getPropertyValue(e)||me$3(t).getComputedStyle(t,null).getPropertyValue(e)}function be$3(t){return function(){delete this[t];}}function $e$3(t,e){return function(){this[t]=e;}}function Ae$3(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n;}}function xe$3(t){return t.trim().split(/^|\s+/)}function Me$3(t){return t.classList||new Ee$3(t)}function Ee$3(t){this._node=t,this._names=xe$3(t.getAttribute("class")||"");}function ke$3(t,e){for(var n=Me$3(t),r=-1,i=e.length;++r<i;)n.add(e[r]);}function Se$3(t,e){for(var n=Me$3(t),r=-1,i=e.length;++r<i;)n.remove(e[r]);}function Ne$3(t){return function(){ke$3(this,t);}}function Pe$3(t){return function(){Se$3(this,t);}}function Ce$3(t,e){return function(){(e.apply(this,arguments)?ke$3:Se$3)(this,t);}}function Te$3(){this.textContent="";}function Oe$3(t){return function(){this.textContent=t;}}function Ue$3(t){return function(){var e=t.apply(this,arguments);this.textContent=e??"";}}function He$3(){this.innerHTML="";}function Re$3(t){return function(){this.innerHTML=t;}}function ze$3(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??"";}}function je$3(){this.nextSibling&&this.parentNode.appendChild(this);}function De$3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild);}function Le$3(){return null}function Ie$3(){var t=this.parentNode;t&&t.removeChild(this);}function qe$3(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Be$3(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ve$3(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,s=e.length;r<s;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on;}}}function Xe$3(t,e,n){return function(){var r,i=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__);}}(e);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),void(r.value=e);this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r];}}function We$3(t,e,n){var r=me$3(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i);}function Ye$3(t,e){return function(){return We$3(this,t,e)}}function Fe$3(t,e){return function(){return We$3(this,t,e.apply(this,arguments))}}ie$3.prototype={constructor:ie$3,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Ee$3.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")));},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")));},contains:function(t){return this._names.indexOf(t)>=0}};var Ke$3=[null];function Ge$3(t,e){this._groups=t,this._parents=e;}function Ze$3(){return new Ge$3([[document.documentElement]],Ke$3)}function Je$3(t){return "string"==typeof t?new Ge$3([[document.querySelector(t)]],[document.documentElement]):new Ge$3([[t]],Ke$3)}function Qe$3(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return [t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return [t.pageX,t.pageY]}Ge$3.prototype=Ze$3.prototype={constructor:Ge$3,select:function(t){"function"!=typeof t&&(t=Yt$3(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],u=a.length,h=r[i]=new Array(u),l=0;l<u;++l)(s=a[l])&&(o=t.call(s,s.__data__,l,a))&&("__data__"in s&&(o.__data__=s.__data__),h[l]=o);return new Ge$3(r,this._parents)},selectAll:function(t){t="function"==typeof t?Gt$3(t):Kt$3(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],u=a.length,h=0;h<u;++h)(o=a[h])&&(r.push(t.call(o,o.__data__,h,a)),i.push(o));return new Ge$3(r,i)},selectChild:function(t){return this.select(null==t?te$3:function(t){return function(){return Qt$3.call(this.children,t)}}("function"==typeof t?t:Jt$3(t)))},selectChildren:function(t){return this.selectAll(null==t?ne$3:function(t){return function(){return ee$3.call(this.children,t)}}("function"==typeof t?t:Jt$3(t)))},filter:function(t){"function"!=typeof t&&(t=Zt$3(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,u=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&u.push(s);return new Ge$3(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,ae$3);var n=e?oe$3:se$3,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),h=0;h<s;++h){var l=r[h],c=i[h],f=c.length,p=ue$3(t.call(l,l&&l.__data__,h,r)),d=p.length,g=a[h]=new Array(d),m=o[h]=new Array(d);n(l,c,g,m,u[h]=new Array(f),p,e);for(var y,v,_=0,w=0;_<d;++_)if(y=g[_]){for(_>=w&&(w=_+1);!(v=m[w])&&++w<d;);y._next=v||null;}}return (o=new Ge$3(o,r))._enter=a,o._exit=u,o},enter:function(){return new Ge$3(this._enter||this._groups.map(re$3),this._parents)},exit:function(){return new Ge$3(this._exit||this._groups.map(re$3),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit();return "function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var h,l=n[u],c=r[u],f=l.length,p=a[u]=new Array(f),d=0;d<f;++d)(h=l[d]||c[d])&&(p[d]=h);for(;u<i;++u)a[u]=n[u];return new Ge$3(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];--s>=0;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=he$3);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o,a=n[s],u=a.length,h=i[s]=new Array(u),l=0;l<u;++l)(o=a[l])&&(h[l]=o);h.sort(e);}return new Ge$3(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return !this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=qt$3(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?ce$3:le$3:"function"==typeof e?n.local?ge$3:de$3:n.local?pe$3:fe$3)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?ye$3:"function"==typeof e?_e$3:ve$3)(t,e,n??"")):we$3(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?be$3:"function"==typeof e?Ae$3:$e$3)(t,e)):this.node()[t]},classed:function(t,e){var n=xe$3(t+"");if(arguments.length<2){for(var r=Me$3(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return !1;return !0}return this.each(("function"==typeof e?Ce$3:e?Ne$3:Pe$3)(n,e))},text:function(t){return arguments.length?this.each(null==t?Te$3:("function"==typeof t?Ue$3:Oe$3)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?He$3:("function"==typeof t?ze$3:Re$3)(t)):this.node().innerHTML},raise:function(){return this.each(je$3)},lower:function(){return this.each(De$3)},append:function(t){var e="function"==typeof t?t:Xt$3(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Xt$3(t),r=null==e?Le$3:"function"==typeof e?e:Yt$3(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Ie$3)},clone:function(t){return this.select(t?Be$3:qe$3)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?Xe$3:Ve$3,r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var u,h=0,l=a.length;h<l;++h)for(r=0,u=a[h];r<o;++r)if((i=s[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?Fe$3:Ye$3)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r);}};const tn$3={capture:!0,passive:!1};function en$3(t){t.preventDefault(),t.stopImmediatePropagation();}function nn$3(t,e,n){t.prototype=e.prototype=n,n.constructor=t;}function rn$3(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function sn$3(){}var on$3=.7,an$3=1/on$3,un$3="\\s*([+-]?\\d+)\\s*",hn$3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ln$3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cn$3=/^#([0-9a-f]{3,8})$/,fn$3=new RegExp(`^rgb\\(${un$3},${un$3},${un$3}\\)$`),pn$3=new RegExp(`^rgb\\(${ln$3},${ln$3},${ln$3}\\)$`),dn$3=new RegExp(`^rgba\\(${un$3},${un$3},${un$3},${hn$3}\\)$`),gn$3=new RegExp(`^rgba\\(${ln$3},${ln$3},${ln$3},${hn$3}\\)$`),mn$3=new RegExp(`^hsl\\(${hn$3},${ln$3},${ln$3}\\)$`),yn$3=new RegExp(`^hsla\\(${hn$3},${ln$3},${ln$3},${hn$3}\\)$`),vn$3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _n$3(){return this.rgb().formatHex()}function wn$3(){return this.rgb().formatRgb()}function bn$3(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=cn$3.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?$n$3(e):3===n?new Mn$3(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?An$3(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?An$3(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=fn$3.exec(t))?new Mn$3(e[1],e[2],e[3],1):(e=pn$3.exec(t))?new Mn$3(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=dn$3.exec(t))?An$3(e[1],e[2],e[3],e[4]):(e=gn$3.exec(t))?An$3(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=mn$3.exec(t))?Cn$3(e[1],e[2]/100,e[3]/100,1):(e=yn$3.exec(t))?Cn$3(e[1],e[2]/100,e[3]/100,e[4]):vn$3.hasOwnProperty(t)?$n$3(vn$3[t]):"transparent"===t?new Mn$3(NaN,NaN,NaN,0):null}function $n$3(t){return new Mn$3(t>>16&255,t>>8&255,255&t,1)}function An$3(t,e,n,r){return r<=0&&(t=e=n=NaN),new Mn$3(t,e,n,r)}function xn$3(t,e,n,r){return 1===arguments.length?function(t){return t instanceof sn$3||(t=bn$3(t)),t?new Mn$3((t=t.rgb()).r,t.g,t.b,t.opacity):new Mn$3}(t):new Mn$3(t,e,n,r??1)}function Mn$3(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r;}function En$3(){return `#${Pn$3(this.r)}${Pn$3(this.g)}${Pn$3(this.b)}`}function kn$3(){const t=Sn$3(this.opacity);return `${1===t?"rgb(":"rgba("}${Nn$3(this.r)}, ${Nn$3(this.g)}, ${Nn$3(this.b)}${1===t?")":`, ${t})`}`}function Sn$3(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nn$3(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pn$3(t){return ((t=Nn$3(t))<16?"0":"")+t.toString(16)}function Cn$3(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new On$3(t,e,n,r)}function Tn$3(t){if(t instanceof On$3)return new On$3(t.h,t.s,t.l,t.opacity);if(t instanceof sn$3||(t=bn$3(t)),!t)return new On$3;if(t instanceof On$3)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new On$3(o,a,u,t.opacity)}function On$3(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r;}function Un$3(t){return (t=(t||0)%360)<0?t+360:t}function Hn$3(t){return Math.max(0,Math.min(1,t||0))}function Rn$3(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}nn$3(sn$3,bn$3,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_n$3,formatHex:_n$3,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Tn$3(this).formatHsl()},formatRgb:wn$3,toString:wn$3}),nn$3(Mn$3,xn$3,rn$3(sn$3,{brighter(t){return t=null==t?an$3:Math.pow(an$3,t),new Mn$3(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?on$3:Math.pow(on$3,t),new Mn$3(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mn$3(Nn$3(this.r),Nn$3(this.g),Nn$3(this.b),Sn$3(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:En$3,formatHex:En$3,formatHex8:function(){return `#${Pn$3(this.r)}${Pn$3(this.g)}${Pn$3(this.b)}${Pn$3(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:kn$3,toString:kn$3})),nn$3(On$3,(function(t,e,n,r){return 1===arguments.length?Tn$3(t):new On$3(t,e,n,r??1)}),rn$3(sn$3,{brighter(t){return t=null==t?an$3:Math.pow(an$3,t),new On$3(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?on$3:Math.pow(on$3,t),new On$3(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Mn$3(Rn$3(t>=240?t-240:t+120,i,r),Rn$3(t,i,r),Rn$3(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new On$3(Un$3(this.h),Hn$3(this.s),Hn$3(this.l),Sn$3(this.opacity))},displayable(){return (0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Sn$3(this.opacity);return `${1===t?"hsl(":"hsla("}${Un$3(this.h)}, ${100*Hn$3(this.s)}%, ${100*Hn$3(this.l)}%${1===t?")":`, ${t})`}`}}));var zn$3=t=>()=>t;function jn$3(t){return 1==(t=+t)?Dn$3:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):zn$3(isNaN(e)?n:e)}}function Dn$3(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):zn$3(isNaN(t)?e:t)}var Ln$3=function t(e){var n=jn$3(e);function r(t,e){var r=n((t=xn$3(t)).r,(e=xn$3(e)).r),i=n(t.g,e.g),s=n(t.b,e.b),o=Dn$3(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=s(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function In$3(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(s){for(n=0;n<r;++n)i[n]=t[n]*(1-s)+e[n]*s;return i}}function qn$3(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,s=new Array(i),o=new Array(r);for(n=0;n<i;++n)s[n]=Kn$3(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=s[n](t);return o}}function Bn$3(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Vn$3(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Xn$3(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Kn$3(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Wn$3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yn$3=new RegExp(Wn$3.source,"g");function Fn$3(t,e){var n,r,i,s=Wn$3.lastIndex=Yn$3.lastIndex=0,o=-1,a=[],u=[];for(t+="",e+="";(n=Wn$3.exec(t))&&(r=Yn$3.exec(e));)(i=r.index)>s&&(i=e.slice(s,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,u.push({i:o,x:Vn$3(n,r)})),s=Yn$3.lastIndex;return s<e.length&&(i=e.slice(s),a[o]?a[o]+=i:a[++o]=i),a.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})}function Kn$3(t,e){var n,r=typeof e;return null==e||"boolean"===r?zn$3(e):("number"===r?Vn$3:"string"===r?(n=bn$3(e))?(e=n,Ln$3):Fn$3:e instanceof bn$3?Ln$3:e instanceof Date?Bn$3:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?In$3:Array.isArray(e)?qn$3:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Xn$3:Vn$3)(t,e)}function Gn$3(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Zn$3,Jn$3=180/Math.PI,Qn$3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tr$3(t,e,n,r,i,s){var o,a,u;return (o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Jn$3,skewX:Math.atan(u)*Jn$3,scaleX:o,scaleY:a}}function er$3(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(s,o){var a=[],u=[];return s=t(s),o=t(o),function(t,r,i,s,o,a){if(t!==i||r!==s){var u=o.push("translate(",null,e,null,n);a.push({i:u-4,x:Vn$3(t,i)},{i:u-2,x:Vn$3(r,s)});}else (i||s)&&o.push("translate("+i+e+s+n);}(s.translateX,s.translateY,o.translateX,o.translateY,a,u),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Vn$3(t,e)})):e&&n.push(i(n)+"rotate("+e+r);}(s.rotate,o.rotate,a,u),function(t,e,n,s){t!==e?s.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Vn$3(t,e)}):e&&n.push(i(n)+"skewX("+e+r);}(s.skewX,o.skewX,a,u),function(t,e,n,r,s,o){if(t!==n||e!==r){var a=s.push(i(s)+"scale(",null,",",null,")");o.push({i:a-4,x:Vn$3(t,n)},{i:a-2,x:Vn$3(e,r)});}else 1===n&&1===r||s.push(i(s)+"scale("+n+","+r+")");}(s.scaleX,s.scaleY,o.scaleX,o.scaleY,a,u),s=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)a[(e=u[n]).i]=e.x(t);return a.join("")}}}var nr$3,rr$3,ir$3=er$3((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Qn$3:tr$3(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),sr$3=er$3((function(t){return null==t?Qn$3:(Zn$3||(Zn$3=document.createElementNS("http://www.w3.org/2000/svg","g")),Zn$3.setAttribute("transform",t),(t=Zn$3.transform.baseVal.consolidate())?tr$3((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Qn$3)}),", ",")",")"),or$3=0,ar$3=0,ur$3=0,hr$3=0,lr$3=0,cr$3=0,fr$3="object"==typeof performance&&performance.now?performance:Date,pr$3="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17);};function dr$3(){return lr$3||(pr$3(gr$3),lr$3=fr$3.now()+cr$3)}function gr$3(){lr$3=0;}function mr$3(){this._call=this._time=this._next=null;}function yr$2(t,e,n){var r=new mr$3;return r.restart(t,e,n),r}function vr$2(){lr$3=(hr$3=fr$3.now())+cr$3,or$3=ar$3=0;try{!function(){dr$3(),++or$3;for(var t,e=nr$3;e;)(t=lr$3-e._time)>=0&&e._call.call(void 0,t),e=e._next;--or$3;}();}finally{or$3=0,function(){var t,e,n=nr$3,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:nr$3=e);rr$3=t,wr$2(r);}(),lr$3=0;}}function _r$2(){var t=fr$3.now(),e=t-hr$3;e>1e3&&(cr$3-=e,hr$3=t);}function wr$2(t){or$3||(ar$3&&(ar$3=clearTimeout(ar$3)),t-lr$3>24?(t<1/0&&(ar$3=setTimeout(vr$2,t-fr$3.now()-cr$3)),ur$3&&(ur$3=clearInterval(ur$3))):(ur$3||(hr$3=fr$3.now(),ur$3=setInterval(_r$2,1e3)),or$3=1,pr$3(vr$2)));}function br$2(t,e,n){var r=new mr$3;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e);}),e,n),r}mr$3.prototype=yr$2.prototype={constructor:mr$3,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?dr$3():+n)+(null==e?0:+e),this._next||rr$3===this||(rr$3?rr$3._next=this:nr$3=this,rr$3=this),this._call=t,this._time=n,wr$2();},stop:function(){this._call&&(this._call=null,this._time=1/0,wr$2());}};var $r$2=Rt$3("start","end","cancel","interrupt"),Ar$2=[];function xr$2(t,e,n,r,i,s){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function s(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay);}function o(s){var h,l,c,f;if(1!==n.state)return u();for(h in i)if((f=i[h]).name===n.name){if(3===f.state)return br$2(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[h]):+h<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[h]);}if(br$2((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(s));})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(c=n.tween.length),h=0,l=-1;h<c;++h)(f=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1;}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=5,1),s=-1,o=r.length;++s<o;)r[s].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),u());}function u(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition;}i[e]=n,n.timer=yr$2(s,0,n.time);}(t,n,{name:e,index:r,group:i,on:$r$2,tween:Ar$2,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0});}function Mr$2(t,e){var n=kr$2(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Er$2(t,e){var n=kr$2(t,e);if(n.state>3)throw new Error("too late; already running");return n}function kr$2(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Sr$2(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition;}}function Nr$2(t,e){var n,r;return function(){var i=Er$2(this,t),s=i.tween;if(s!==n)for(var o=0,a=(r=n=s).length;o<a;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r;}}function Pr$2(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var s=Er$2(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},u=0,h=i.length;u<h;++u)if(i[u].name===e){i[u]=a;break}u===h&&i.push(a);}s.tween=i;}}function Cr$2(t,e,n){var r=t._id;return t.each((function(){var t=Er$2(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments);})),function(t){return kr$2(t,r).value[e]}}function Tr$2(t,e){var n;return ("number"==typeof e?Vn$3:e instanceof bn$3?Ln$3:(n=bn$3(e))?(e=n,Ln$3):Fn$3)(t,e)}function Or$2(t){return function(){this.removeAttribute(t);}}function Ur$2(t){return function(){this.removeAttributeNS(t.space,t.local);}}function Hr$1(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttribute(t);return o===s?null:o===r?i:i=e(r=o,n)}}function Rr$1(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===r?i:i=e(r=o,n)}}function zr(t,e,n){var r,i,s;return function(){var o,a,u=n(this);if(null!=u)return (o=this.getAttribute(t))===(a=u+"")?null:o===r&&a===i?s:(i=a,s=e(r=o,u));this.removeAttribute(t);}}function jr$1(t,e,n){var r,i,s;return function(){var o,a,u=n(this);if(null!=u)return (o=this.getAttributeNS(t.space,t.local))===(a=u+"")?null:o===r&&a===i?s:(i=a,s=e(r=o,u));this.removeAttributeNS(t.space,t.local);}}function Dr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n));}}(t,i)),n}return i._value=e,i}function Lr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n));}}(t,i)),n}return i._value=e,i}function Ir(t,e){return function(){Mr$2(this,t).delay=+e.apply(this,arguments);}}function qr$1(t,e){return e=+e,function(){Mr$2(this,t).delay=e;}}function Br$1(t,e){return function(){Er$2(this,t).duration=+e.apply(this,arguments);}}function Vr(t,e){return e=+e,function(){Er$2(this,t).duration=e;}}var Xr=Ze$3.prototype.constructor;function Wr(t){return function(){this.style.removeProperty(t);}}var Yr=0;function Fr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r;}function Kr(){return ++Yr}var Gr=Ze$3.prototype;Fr.prototype={constructor:Fr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Yt$3(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,u,h=r[o],l=h.length,c=s[o]=new Array(l),f=0;f<l;++f)(a=h[f])&&(u=t.call(a,a.__data__,f,h))&&("__data__"in a&&(u.__data__=a.__data__),c[f]=u,xr$2(c[f],e,n,f,c,kr$2(a,n)));return new Fr(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Kt$3(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u,h=r[a],l=h.length,c=0;c<l;++c)if(u=h[c]){for(var f,p=t.call(u,u.__data__,c,h),d=kr$2(u,n),g=0,m=p.length;g<m;++g)(f=p[g])&&xr$2(f,e,n,g,p,d);s.push(p),o.push(u);}return new Fr(s,o,e,n)},selectChild:Gr.selectChild,selectChildren:Gr.selectChildren,filter:function(t){"function"!=typeof t&&(t=Zt$3(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,u=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&u.push(s);return new Fr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u,h=e[a],l=n[a],c=h.length,f=o[a]=new Array(c),p=0;p<c;++p)(u=h[p]||l[p])&&(f[p]=u);for(;a<r;++a)o[a]=e[a];return new Fr(o,this._parents,this._name,this._id)},selection:function(){return new Xr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Kr(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],u=a.length,h=0;h<u;++h)if(o=a[h]){var l=kr$2(o,e);xr$2(o,t,n,h,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease});}return new Fr(r,this._parents,t,n)},call:Gr.call,nodes:Gr.nodes,node:Gr.node,size:Gr.size,empty:Gr.empty,each:Gr.each,on:function(t,e){var n=this._id;return arguments.length<2?kr$2(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,s=function(t){return (t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Mr$2:Er$2;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i;}}(n,t,e))},attr:function(t,e){var n=qt$3(t),r="transform"===n?sr$3:Tr$2;return this.attrTween(t,"function"==typeof e?(n.local?jr$1:zr)(n,r,Cr$2(this,"attr."+t,e)):null==e?(n.local?Ur$2:Or$2)(n):(n.local?Rr$1:Hr$1)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return (n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=qt$3(t);return this.tween(n,(r.local?Dr:Lr)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?ir$3:Tr$2;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var s=we$3(this,t),o=(this.style.removeProperty(t),we$3(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}(t,r)).on("end.style."+t,Wr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,s;return function(){var o=we$3(this,t),a=n(this),u=a+"";return null==a&&(this.style.removeProperty(t),u=a=we$3(this,t)),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a))}}(t,r,Cr$2(this,"style."+t,e))).each(function(t,e){var n,r,i,s,o="style."+e,a="end."+o;return function(){var u=Er$2(this,t),h=u.on,l=null==u.value[o]?s||(s=Wr(e)):void 0;h===n&&i===l||(r=(n=h).copy()).on(a,i=l),u.on=r;}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,s=n+"";return function(){var o=we$3(this,t);return o===s?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return (r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function s(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n);}}(t,s,n)),r}return s._value=e,s}(t,e,n??""))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=e??"";}}(Cr$2(this,"text",t)):function(t){return function(){this.textContent=t;}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return (e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e);}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this);}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=kr$2(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?Nr$2:Pr$2)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ir:qr$1)(e,t)):kr$2(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Br$1:Vr)(e,t)):kr$2(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Er$2(this,t).ease=e;}}(e,t)):kr$2(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Er$2(this,t).ease=n;}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(s,o){var a={value:o},u={value:function(){0==--i&&s();}};n.each((function(){var n=Er$2(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),n.on=e;})),0===i&&s();}))},[Symbol.iterator]:Gr[Symbol.iterator]};var Zr={time:null,delay:0,duration:250,ease:function(t){return ((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Jr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Ze$3.prototype.interrupt=function(t){return this.each((function(){Sr$2(this,t);}))},Ze$3.prototype.transition=function(t){var e,n;t instanceof Fr?(e=t._id,t=t._name):(e=Kr(),(n=Zr).time=dr$3(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],u=a.length,h=0;h<u;++h)(o=a[h])&&xr$2(o,t,e,h,a,n||Jr(o,e));return new Fr(r,this._parents,t,e)};var Qr=t=>()=>t;function ti$1(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}});}function ei$1(t){t.preventDefault(),t.stopImmediatePropagation();}var ni$1={name:"drag"},ri$1={name:"space"},ii$1={name:"handle"},si$1={name:"center"};const{abs:oi$1,max:ai$1,min:ui$1}=Math;function hi$1(t){return [+t[0],+t[1]]}function li$1(t){return [hi$1(t[0]),hi$1(t[1])]}var ci$1={name:"x",handles:["w","e"].map(vi$1),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},fi$1={name:"y",handles:["n","s"].map(vi$1),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},pi$1={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},di$1={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},gi$1={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},mi$1={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},yi$1={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function vi$1(t){return {type:t}}function _i$1(t){return !t.ctrlKey&&!t.button}function wi$1(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function bi$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function $i$1(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ai$1(){return function(t){var e,n=wi$1,r=_i$1,i=bi$1,s=!0,o=Rt$3("start","brush","end"),a=6;function u(e){var n=e.property("__brush",g).selectAll(".overlay").data([vi$1("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",pi$1.overlay).merge(n).each((function(){var t=$i$1(this).extent;Je$3(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]);})),e.selectAll(".selection").data([vi$1("selection")]).enter().append("rect").attr("class","selection").attr("cursor",pi$1.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return "handle handle--"+t.type})).attr("cursor",(function(t){return pi$1[t.type]})),e.each(h).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(i).on("touchstart.brush",f).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)");}function h(){var t=Je$3(this),e=$i$1(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return "e"===t.type[t.type.length-1]?e[1][0]-a/2:e[0][0]-a/2})).attr("y",(function(t){return "s"===t.type[0]?e[1][1]-a/2:e[0][1]-a/2})).attr("width",(function(t){return "n"===t.type||"s"===t.type?e[1][0]-e[0][0]+a:a})).attr("height",(function(t){return "e"===t.type||"w"===t.type?e[1][1]-e[0][1]+a:a}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null);}function l(t,e,n){var r=t.__brush.emitter;return !r||n&&r.clean?new c(t,e,n):r}function c(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n;}function f(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,o,a,u,c,f,p,d,g,m,y,v=this,_=n.target.__data__.type,w="selection"===(s&&n.metaKey?_="overlay":_)?ni$1:s&&n.altKey?si$1:ii$1,b=t===fi$1?null:mi$1[_],$=t===ci$1?null:yi$1[_],A=$i$1(v),x=A.extent,M=A.selection,E=x[0][0],k=x[0][1],S=x[1][0],N=x[1][1],P=0,C=0,T=b&&$&&s&&n.shiftKey,O=Array.from(n.touches||[n],(t=>{const e=t.identifier;return (t=Qe$3(t,v)).point0=t.slice(),t.identifier=e,t}));Sr$2(v);var U=l(v,arguments,!0).beforestart();if("overlay"===_){M&&(g=!0);const e=[O[0],O[1]||O[0]];A.selection=M=[[i=t===fi$1?E:ui$1(e[0][0],e[1][0]),a=t===ci$1?k:ui$1(e[0][1],e[1][1])],[c=t===fi$1?S:ai$1(e[0][0],e[1][0]),p=t===ci$1?N:ai$1(e[0][1],e[1][1])]],O.length>1&&D(n);}else i=M[0][0],a=M[0][1],c=M[1][0],p=M[1][1];o=i,u=a,f=c,d=p;var H=Je$3(v).attr("pointer-events","none"),R=H.selectAll(".overlay").attr("cursor",pi$1[_]);if(n.touches)U.moved=j,U.ended=L;else {var z=Je$3(n.view).on("mousemove.brush",j,!0).on("mouseup.brush",L,!0);s&&z.on("keydown.brush",I,!0).on("keyup.brush",q,!0),function(t){var e=t.document.documentElement,n=Je$3(t).on("dragstart.drag",en$3,tn$3);"onselectstart"in e?n.on("selectstart.drag",en$3,tn$3):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none");}(n.view);}h.call(v),U.start(n,w.name);}function j(t){for(const e of t.changedTouches||[t])for(const t of O)t.identifier===e.identifier&&(t.cur=Qe$3(e,v));if(T&&!m&&!y&&1===O.length){const t=O[0];oi$1(t.cur[0]-t[0])>oi$1(t.cur[1]-t[1])?y=!0:m=!0;}for(const t of O)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);g=!0,ei$1(t),D(t);}function D(t){const e=O[0],n=e.point0;var r;switch(P=e[0]-n[0],C=e[1]-n[1],w){case ri$1:case ni$1:b&&(P=ai$1(E-i,ui$1(S-c,P)),o=i+P,f=c+P),$&&(C=ai$1(k-a,ui$1(N-p,C)),u=a+C,d=p+C);break;case ii$1:O[1]?(b&&(o=ai$1(E,ui$1(S,O[0][0])),f=ai$1(E,ui$1(S,O[1][0])),b=1),$&&(u=ai$1(k,ui$1(N,O[0][1])),d=ai$1(k,ui$1(N,O[1][1])),$=1)):(b<0?(P=ai$1(E-i,ui$1(S-i,P)),o=i+P,f=c):b>0&&(P=ai$1(E-c,ui$1(S-c,P)),o=i,f=c+P),$<0?(C=ai$1(k-a,ui$1(N-a,C)),u=a+C,d=p):$>0&&(C=ai$1(k-p,ui$1(N-p,C)),u=a,d=p+C));break;case si$1:b&&(o=ai$1(E,ui$1(S,i-P*b)),f=ai$1(E,ui$1(S,c+P*b))),$&&(u=ai$1(k,ui$1(N,a-C*$)),d=ai$1(k,ui$1(N,p+C*$)));}f<o&&(b*=-1,r=i,i=c,c=r,r=o,o=f,f=r,_ in di$1&&R.attr("cursor",pi$1[_=di$1[_]])),d<u&&($*=-1,r=a,a=p,p=r,r=u,u=d,d=r,_ in gi$1&&R.attr("cursor",pi$1[_=gi$1[_]])),A.selection&&(M=A.selection),m&&(o=M[0][0],f=M[1][0]),y&&(u=M[0][1],d=M[1][1]),M[0][0]===o&&M[0][1]===u&&M[1][0]===f&&M[1][1]===d||(A.selection=[[o,u],[f,d]],h.call(v),U.brush(t,w.name));}function L(t){if(function(t){t.stopImmediatePropagation();}(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null;}),500);}else !function(t,e){var n=t.document.documentElement,r=Je$3(t).on("dragstart.drag",null);e&&(r.on("click.drag",en$3,tn$3),setTimeout((function(){r.on("click.drag",null);}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect);}(t.view,g),z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);H.attr("pointer-events","all"),R.attr("cursor",pi$1.overlay),A.selection&&(M=A.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(M)&&(A.selection=null,h.call(v)),U.end(t,w.name);}function I(t){switch(t.keyCode){case 16:T=b&&$;break;case 18:w===ii$1&&(b&&(c=f-P*b,i=o+P*b),$&&(p=d-C*$,a=u+C*$),w=si$1,D(t));break;case 32:w!==ii$1&&w!==si$1||(b<0?c=f-P:b>0&&(i=o-P),$<0?p=d-C:$>0&&(a=u-C),w=ri$1,R.attr("cursor",pi$1.selection),D(t));break;default:return}ei$1(t);}function q(t){switch(t.keyCode){case 16:T&&(m=y=T=!1,D(t));break;case 18:w===si$1&&(b<0?c=f:b>0&&(i=o),$<0?p=d:$>0&&(a=u),w=ii$1,D(t));break;case 32:w===ri$1&&(t.altKey?(b&&(c=f-P*b,i=o+P*b),$&&(p=d-C*$,a=u+C*$),w=si$1):(b<0?c=f:b>0&&(i=o),$<0?p=d:$>0&&(a=u),w=ii$1),R.attr("cursor",pi$1[_]),D(t));break;default:return}ei$1(t);}}function p(t){l(this,arguments).moved(t);}function d(t){l(this,arguments).ended(t);}function g(){var e=this.__brush||{selection:null};return e.extent=li$1(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n,r){e.tween?e.on("start.brush",(function(t){l(this,arguments).beforestart().start(t);})).on("interrupt.brush end.brush",(function(t){l(this,arguments).end(t);})).tween("brush",(function(){var e=this,r=e.__brush,i=l(e,arguments),s=r.selection,o=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),a=Kn$3(s,o);function u(t){r.selection=1===t&&null===o?null:a(t),h.call(e),i.brush();}return null!==s&&null!==o?u:u(1)})):e.each((function(){var e=this,i=arguments,s=e.__brush,o=t.input("function"==typeof n?n.apply(e,i):n,s.extent),a=l(e,i).beforestart();Sr$2(e),s.selection=null===o?null:o,h.call(e),a.start(r).brush(r).end(r);}));},u.clear=function(t,e){u.move(t,null,e);},c.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=Je$3(this.that).datum();o.call(e,this.that,new ti$1(e,{sourceEvent:n,target:u,selection:t.output(this.state.selection),mode:r,dispatch:o}),i);}},u.extent=function(t){return arguments.length?(n="function"==typeof t?t:Qr(li$1(t)),u):n},u.filter=function(t){return arguments.length?(r="function"==typeof t?t:Qr(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"==typeof t?t:Qr(!!t),u):i},u.handleSize=function(t){return arguments.length?(a=+t,u):a},u.keyModifiers=function(t){return arguments.length?(s=!!t,u):s},u.on=function(){var t=o.on.apply(o,arguments);return t===o?u:t},u}(ci$1)}function xi$1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return [r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Mi$1(t){return (t=xi$1(Math.abs(t)))?t[1]:NaN}var Ei$1,ki$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Si$1(t){if(!(e=ki$1.exec(t)))throw new Error("invalid format: "+t);var e;return new Ni$1({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ni$1(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+"";}function Pi$1(t,e){var n=xi$1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Si$1.prototype=Ni$1.prototype,Ni$1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ci$1={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Pi$1(100*t,e),r:Pi$1,s:function(t,e){var n=xi$1(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Ei$1=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+xi$1(t,Math.max(0,e+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ti$1(t){return t}var Oi$1,Ui$1,Hi$1,Ri$1=Array.prototype.map,zi$1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ji$1(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Ti$1:(e=Ri$1.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(t.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Ti$1:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ri$1.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",h=void 0===t.minus?"":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function c(t){var e=(t=Si$1(t)).fill,n=t.align,c=t.sign,f=t.symbol,p=t.zero,d=t.width,g=t.comma,m=t.precision,y=t.trim,v=t.type;"n"===v?(g=!0,v="g"):Ci$1[v]||(void 0===m&&(m=12),y=!0,v="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var _="$"===f?i:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",w="$"===f?s:/[%p]/.test(v)?u:"",b=Ci$1[v],$=/[defgprs%]/.test(v);function A(t){var i,s,u,f=_,A=w;if("c"===v)A=b(t)+A,t="";else {var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:b(Math.abs(t),m),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0);}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),x&&0==+t&&"+"!==c&&(x=!1),f=(x?"("===c?c:h:"-"===c||"("===c?"":c)+f,A=("s"===v?zi$1[8+Ei$1/3]:"")+A+(x&&"("===c?")":""),$)for(i=-1,s=t.length;++i<s;)if(48>(u=t.charCodeAt(i))||u>57){A=(46===u?o+t.slice(i+1):t.slice(i))+A,t=t.slice(0,i);break}}g&&!p&&(t=r(t,1/0));var M=f.length+t.length+A.length,E=M<d?new Array(d-M+1).join(e):"";switch(g&&p&&(t=r(E+t,E.length?d-A.length:1/0),E=""),n){case"<":t=f+t+A+E;break;case"=":t=f+E+t+A;break;case"^":t=E.slice(0,M=E.length>>1)+f+t+A+E.slice(M);break;default:t=E+f+t+A;}return a(t)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),A.toString=function(){return t+""},A}return {format:c,formatPrefix:function(t,e){var n=c(((t=Si$1(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Mi$1(e)/3))),i=Math.pow(10,-r),s=zi$1[8+r/3];return function(t){return n(i*t)+s}}}}function Di$1(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);}return this}function Li$1(t){return +t}Oi$1=ji$1({thousands:",",grouping:[3],currency:["$",""]}),Ui$1=Oi$1.format,Hi$1=Oi$1.formatPrefix;var Ii$1,qi$1,Bi$1,Vi$1,Xi$1,Wi$1,Yi$1,Fi$1,Ki$1,Gi$1,Zi$1,Ji$1,Qi$1,ts=[0,1];function es(t){return t}function ns(t,e){return (e-=t=+t)?function(n){return (n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function rs(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=ns(i,r),s=n(o,s)):(r=ns(r,i),s=n(s,o)),function(t){return s(r(t))}}function is(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=ns(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(e){var n=$t$3(t,e,1,r)-1;return s[n](i[n](e))}}function ss(){var t,e,n,r,i,s,o=ts,a=ts,u=Kn$3,h=es;function l(){var t=Math.min(o.length,a.length);return h!==es&&(h=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),r=t>2?is:rs,i=s=null,c}function c(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),a,u)))(t(h(e)))}return c.invert=function(n){return h(e((s||(s=r(a,o.map(t),Vn$3)))(n)))},c.domain=function(t){return arguments.length?(o=Array.from(t,Li$1),l()):o.slice()},c.range=function(t){return arguments.length?(a=Array.from(t),l()):a.slice()},c.rangeRound=function(t){return a=Array.from(t),u=Gn$3,l()},c.clamp=function(t){return arguments.length?(h=!!t||es,l()):h!==es},c.interpolate=function(t){return arguments.length?(u=t,l()):u},c.unknown=function(t){return arguments.length?(n=t,c):n},function(n,r){return t=n,e=r,l()}}function os(t,e,n,r){var i,s=function(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?kt$3(e,t,n):kt$3(t,e,n);return (r?-1:1)*(i<0?1/-i:i)}(t,e,n);switch((r=Si$1(r??",f")).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Mi$1(e)/3)))-Mi$1(Math.abs(t)))}(s,o))||(r.precision=i),Hi$1(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Mi$1(e)-Mi$1(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Mi$1(Math.abs(t)))}(s))||(r.precision=i-2*("%"===r.type));}return Ui$1(r)}function as(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return [];if((t=+t)==(e=+e))return [t];const r=e<t,[i,s,o]=r?Et$3(e,t,n):Et$3(t,e,n);if(!(s>=i))return [];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let t=0;t<a;++t)u[t]=(s-t)/-o;else for(let t=0;t<a;++t)u[t]=(s-t)*o;else if(o<0)for(let t=0;t<a;++t)u[t]=(i+t)/-o;else for(let t=0;t<a;++t)u[t]=(i+t)*o;return u}(n[0],n[n.length-1],t??10)},t.tickFormat=function(t,n){var r=e();return os(r[0],r[r.length-1],t??10,n)},t.nice=function(n){null==n&&(n=10);var r,i,s=e(),o=0,a=s.length-1,u=s[o],h=s[a],l=10;for(h<u&&(i=u,u=h,h=i,i=o,o=a,a=i);l-- >0;){if((i=kt$3(u,h,n))===r)return s[o]=u,s[a]=h,e(s);if(i>0)u=Math.floor(u/i)*i,h=Math.ceil(h/i)*i;else {if(!(i<0))break;u=Math.ceil(u*i)/i,h=Math.floor(h*i)/i;}r=i;}return t},t}function us(){var t=ss()(es,es);return t.copy=function(){return e=t,us().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e;},Di$1.apply(t,arguments),as(t)}function hs(t,e,n){this.k=t,this.x=e,this.y=n;}hs.prototype={constructor:hs,scale:function(t){return 1===t?this:new hs(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new hs(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return [t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return [(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return (t-this.x)/this.k},invertY:function(t){return (t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return "translate("+this.x+","+this.y+") scale("+this.k+")"}},hs.prototype;let ls=class extends(tr$5(Fi$3(Ki$3(Li$3(k$5(rr$5(ro$1))))))){constructor(){super(),Ii$1.set(this,void 0),qi$1.set(this,void 0),Bi$1.set(this,void 0),Vi$1.set(this,void 0),Xi$1.set(this,void 0),Wi$1.set(this,void 0),Yi$1.set(this,void 0),Fi$1.set(this,void 0),Ki$1.set(this,void 0),Gi$1.set(this,void 0),Zi$1.set(this,void 0),Ji$1.set(this,void 0),Qi$1.set(this,null),this["ruler-start"]=1,this["ruler-padding"]=10,this["scale-factor"]=(this.length||0)/5||10,this["show-highlight"]=!1,h$1(this,Ii$1,null,"f"),h$1(this,qi$1,!1,"f");}createNavRuler(){const t=this.width-this["margin-right"]-this["ruler-padding"];h$1(this,Ii$1,us().range([this["margin-left"]+this["ruler-padding"],t]).domain([this["ruler-start"],this["ruler-start"]+(this.length||1)]),"f"),h$1(this,Bi$1,Je$3(this).selectAll("svg").attr("id","").attr("width",this.width).attr("height",this.height),"f"),h$1(this,Ki$1,Ut$3(0,u$2(this,Ii$1,"f")),"f"),h$1(this,Vi$1,u$2(this,Bi$1,"f").append("text").attr("class","start-label").attr("x",this["margin-left"]).attr("y",this.height-this["margin-bottom"]-2).style("font-family","sans-serif").style("font-size",12),"f"),h$1(this,Xi$1,u$2(this,Bi$1,"f").append("text").attr("class","end-label").attr("x",this.width-this["margin-right"]).attr("y",this.height-this["margin-bottom"]-2).attr("text-anchor","end").style("font-family","sans-serif").style("font-size",12),"f"),h$1(this,Wi$1,u$2(this,Bi$1,"f").append("g").attr("class","x axis").call(u$2(this,Ki$1,"f")),"f"),h$1(this,Gi$1,Ai$1().extent([[this["margin-left"]+this["ruler-padding"],0],[t,.5*this.height+3]]).handleSize(6).on("end",(({selection:t})=>{null===t&&u$2(this,Qi$1,"f")&&u$2(this,Yi$1,"f")&&u$2(this,Gi$1,"f")&&u$2(this,Yi$1,"f").call(u$2(this,Gi$1,"f").move,u$2(this,Qi$1,"f"));})).on("brush",(({selection:t,transform:e})=>{t&&u$2(this,Ii$1,"f")&&(h$1(this,Qi$1,t,"f"),this["display-start"]=Math.round(100*u$2(this,Ii$1,"f").invert(t[0]))/100,this["display-end"]=Math.round(100*u$2(this,Ii$1,"f").invert(t[1]))/100,u$2(this,qi$1,"f")||this.dispatchEvent(new CustomEvent("change",{detail:{"display-end":this["display-end"],"display-start":this["display-start"],extra:{transform:e}},bubbles:!0,cancelable:!0})),this.updateLabels(),this.updatePolygon());})),"f"),h$1(this,Yi$1,u$2(this,Bi$1,"f").append("g").attr("class","brush"),"f"),t>0&&(u$2(this,Yi$1,"f").call(u$2(this,Gi$1,"f")),u$2(this,Yi$1,"f").call(u$2(this,Gi$1,"f").move,[u$2(this,Ii$1,"f").call(this,this.getStart()),u$2(this,Ii$1,"f").call(this,this.getEnd())])),h$1(this,Fi$1,u$2(this,Bi$1,"f").append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),"f"),h$1(this,Ji$1,u$2(this,Bi$1,"f").append("g").attr("class","margin"),"f"),this.createHighlight(),this.renderD3();}createHighlight(){u$2(this,Bi$1,"f")&&(h$1(this,Zi$1,u$2(this,Bi$1,"f").append("g").attr("class","highlighted"),"f"),this.updateHighlight());}onDimensionsChange(){var t,e,n,r;u$2(this,Ii$1,"f")&&(u$2(this,Ii$1,"f").range([this["margin-left"]+this["ruler-padding"],this.width-this["margin-right"]-this["ruler-padding"]]),null===(t=u$2(this,Bi$1,"f"))||void 0===t||t.attr("width",this.width),null===(e=u$2(this,Bi$1,"f"))||void 0===e||e.attr("height",this.height),null===(n=u$2(this,Gi$1,"f"))||void 0===n||n.extent([[this["margin-left"]+this["ruler-padding"],0],[this.width-this["margin-right"]-this["ruler-padding"],.5*this.height+3]]),u$2(this,Gi$1,"f")&&(null===(r=u$2(this,Yi$1,"f"))||void 0===r||r.call(u$2(this,Gi$1,"f"))));}render(){return G$3`<svg class="container"></svg>`}updated(t){this.renderD3(),super.updated(t);}firstUpdated(){this.createNavRuler();}renderD3(){if(u$2(this,Ii$1,"f")&&u$2(this,Wi$1,"f")&&u$2(this,Ki$1,"f")&&u$2(this,Gi$1,"f")){u$2(this,Ii$1,"f").domain([this["ruler-start"],this["ruler-start"]+(this.length||1)-1]),u$2(this,Wi$1,"f").call(u$2(this,Ki$1,"f")),this.updatePolygon(),this.updateLabels();const t=[u$2(this,Ii$1,"f").call(this,this.getStart()),u$2(this,Ii$1,"f").call(this,this.getEnd())];u$2(this,Yi$1,"f")&&Number.isFinite(t[0])&&Number.isFinite(t[1])&&t[0]>=0&&t[1]>=0&&t[0]<t[1]&&(h$1(this,qi$1,!0,"f"),u$2(this,Yi$1,"f").call(u$2(this,Gi$1,"f").move,t),h$1(this,qi$1,!1,"f")),this.updateHighlight(),this.renderMarginOnGroup(u$2(this,Ji$1,"f"));}}locate(t,e){u$2(this,Yi$1,"f")&&u$2(this,Gi$1,"f")&&u$2(this,Ii$1,"f")&&u$2(this,Yi$1,"f").call(u$2(this,Gi$1,"f").move,[u$2(this,Ii$1,"f").call(this,t),u$2(this,Ii$1,"f").call(this,e)]);}zoomOut(){this.locate(Math.max(this["ruler-start"]||1,this.getStart()-this["scale-factor"]),Math.min((this.length||1)+this["ruler-start"]-1,this.getEnd()+this["scale-factor"]));}zoomIn(){const t=Math.min(this.getStart()+this["scale-factor"],this.getEnd()-1);this.locate(t,Math.max(this.getEnd()-this["scale-factor"],t+1));}updateHighlight(){if(!u$2(this,Zi$1,"f"))return;const t=us().domain([this["display-start"]||1,(this["display-end"]||this.length||1)+1]).range([this["margin-left"],this.width-this["margin-right"]]),e=us().domain([this["ruler-start"],this["ruler-start"]+(this.length||1)]).range([this["margin-left"]+this["ruler-padding"],this.width-this["margin-right"]-this["ruler-padding"]]),n=u$2(this,Zi$1,"f").selectAll("polygon").data(this["show-highlight"]?this.highlightedRegion.segments:[]);n.enter().append("polygon").attr("class","highlight-polygon").style("pointer-events","none").merge(n).attr("fill",this["highlight-color"]).attr("points",(n=>{const r=Math.max(1,n.start),i=Math.min(this.length||1,n.end)+1;return `${e(r)},${this.height/2}\n        ${e(i)},${this.height/2}\n        ${t(i)},${this.height}\n        ${t(r)},${this.height}`})),n.exit().remove();const r=u$2(this,Zi$1,"f").selectAll("rect").data(this["show-highlight"]?this.highlightedRegion.segments:[]);r.enter().append("rect").attr("class","highlight-rectangle").style("pointer-events","none").merge(r).attr("fill",this["highlight-color"]).attr("x",(t=>e(Math.max(1,t.start)))).attr("width",(t=>e(Math.min(this.length||1,t.end)+1)-e(Math.max(1,t.start)))).attr("y",this["margin-top"]).attr("height",this.height/2),r.exit().remove();}updateLabels(){u$2(this,Vi$1,"f")&&u$2(this,Vi$1,"f").attr("x",this["margin-left"]).text(Math.round(this.getStart())),u$2(this,Xi$1,"f")&&u$2(this,Xi$1,"f").attr("x",this.width-this["margin-right"]).text(Math.round(this.getEnd()));}updatePolygon(){u$2(this,Fi$1,"f")&&u$2(this,Ii$1,"f")&&u$2(this,Fi$1,"f").attr("points",`${u$2(this,Ii$1,"f").call(this,this.getStart())},${this.height/2}\n        ${u$2(this,Ii$1,"f").call(this,this.getEnd())},${this.height/2}\n        ${this.width-this["margin-right"]},${this.height}\n        ${this["margin-left"]},${this.height}`);}getStart(){return this["display-start"]||1}getEnd(){return ((this["display-end"]||0)>0?this["display-end"]:this.length)||1}};Ii$1=new WeakMap,qi$1=new WeakMap,Bi$1=new WeakMap,Vi$1=new WeakMap,Xi$1=new WeakMap,Wi$1=new WeakMap,Yi$1=new WeakMap,Fi$1=new WeakMap,Ki$1=new WeakMap,Gi$1=new WeakMap,Zi$1=new WeakMap,Ji$1=new WeakMap,Qi$1=new WeakMap,a$1([yt$3({type:Number})],ls.prototype,"ruler-start",void 0),a$1([yt$3({type:Number})],ls.prototype,"ruler-padding",void 0),a$1([yt$3({type:Number})],ls.prototype,"scale-factor",void 0),a$1([yt$3({type:Boolean})],ls.prototype,"show-highlight",void 0),ls=a$1([(t=>(e,n)=>{void 0!==n?n.addInitializer((()=>{customElements.define(t,e);})):customElements.define(t,e);})("nightingale-navigation")],ls);var cs=ls;

var index$2 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    default: cs
});

function l$1(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function c$2(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return "m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function f$2(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return "a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const p$2=globalThis,d$2=p$2.ShadowRoot&&(void 0===p$2.ShadyCSS||p$2.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,g$2=Symbol(),_$2=new WeakMap;let y$2=class y{constructor(t,e,n){if(this._$cssResult$=!0,n!==g$2)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e;}get styleSheet(){let t=this.o;const e=this.t;if(d$2&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=_$2.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&_$2.set(e,t));}return t}toString(){return this.cssText}};const m$2=d$2?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return (t=>new y$2("string"==typeof t?t:t+"",void 0,g$2))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:v$2,defineProperty:w$2,getOwnPropertyDescriptor:$$2,getOwnPropertyNames:b$2,getOwnPropertySymbols:A$2,getPrototypeOf:x$2}=Object,E$2=globalThis,S$2=E$2.trustedTypes,k$2=S$2?S$2.emptyScript:"",M$2=E$2.reactiveElementPolyfillSupport,N$2=(t,e)=>t,C$2={toAttribute(t,e){switch(e){case Boolean:t=t?k$2:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t);}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t);}catch(t){n=null;}}return n}},P$2=(t,e)=>!v$2(t,e),O$2={attribute:!0,type:String,converter:C$2,reflect:!1,hasChanged:P$2};Symbol.metadata??=Symbol("metadata"),E$2.litPropertyMetadata??=new WeakMap;let T$2 = class T extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t);}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=O$2){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(t,n,e);void 0!==r&&w$2(this.prototype,t,r);}}static getPropertyDescriptor(t,e,n){const{get:r,set:i}=$$2(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t;}};return {get(){return r?.call(this)},set(e){const s=r?.call(this);i.call(this,e),this.requestUpdate(t,s,n);},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??O$2}static _$Ei(){if(this.hasOwnProperty(N$2("elementProperties")))return;const t=x$2(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties);}static finalize(){if(this.hasOwnProperty(N$2("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(N$2("properties"))){const t=this.properties,e=[...b$2(t),...A$2(t)];for(const n of e)this.createProperty(n,t[n]);}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n);}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t);}this.elementStyles=this.finalizeStyles(this.styles);}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(m$2(t));}else void 0!==t&&e.push(m$2(t));return e}static _$Eu(t,e){const n=e.attribute;return !1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev();}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)));}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.();}removeController(t){this._$EO?.delete(t);}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t);}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return ((t,e)=>{if(d$2)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of e){const e=document.createElement("style"),r=p$2.litNonce;void 0!==r&&e.setAttribute("nonce",r),e.textContent=n.cssText,t.appendChild(e);}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()));}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()));}attributeChangedCallback(t,e,n){this._$AK(t,n);}_$EC(t,e){const n=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,n);if(void 0!==r&&!0===n.reflect){const i=(void 0!==n.converter?.toAttribute?n.converter:C$2).toAttribute(e,n.type);this._$Em=t,null==i?this.removeAttribute(r):this.setAttribute(r,i),this._$Em=null;}}_$AK(t,e){const n=this.constructor,r=n._$Eh.get(t);if(void 0!==r&&this._$Em!==r){const t=n.getPropertyOptions(r),i="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:C$2;this._$Em=r,this[r]=i.fromAttribute(e,t.type),this._$Em=null;}}requestUpdate(t,e,n){if(void 0!==t){if(n??=this.constructor.getPropertyOptions(t),!(n.hasChanged??P$2)(this[t],e))return;this.P(t,e,n);}!1===this.isUpdatePending&&(this._$ES=this._$ET());}P(t,e,n){this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t);}async _$ET(){this.isUpdatePending=!0;try{await this._$ES;}catch(t){Promise.reject(t);}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0;}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t)!0!==n.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],n);}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU();}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e);}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t);}_$EU(){this._$AL=new Map,this.isUpdatePending=!1;}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return !0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU();}updated(t){}firstUpdated(t){}};T$2.elementStyles=[],T$2.shadowRootOptions={mode:"open"},T$2[N$2("elementProperties")]=new Map,T$2[N$2("finalized")]=new Map,M$2?.({ReactiveElement:T$2}),(E$2.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const H$2=globalThis,U$2=H$2.trustedTypes,q$2=U$2?U$2.createPolicy("lit-html",{createHTML:t=>t}):void 0,R$2="$lit$",j$2=`lit$${Math.random().toFixed(9).slice(2)}$`,B$2="?"+j$2,z$2=`<${B$2}>`,D$2=document,I$2=()=>D$2.createComment(""),L$2=t=>null===t||"object"!=typeof t&&"function"!=typeof t,W$2=Array.isArray,X$2="[ \t\n\f\r]",V$2=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,F$2=/-->/g,Y$2=/>/g,Z$2=RegExp(`>|${X$2}(?:([^\\s"'>=/]+)(${X$2}*=${X$2}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),K$2=/'/g,J$2=/"/g,G$2=/^(?:script|style|textarea|title)$/i,Q$2=(t=>(e,...n)=>({_$litType$:t,strings:e,values:n}))(1),tt$2=Symbol.for("lit-noChange"),et$2=Symbol.for("lit-nothing"),nt$2=new WeakMap,rt$2=D$2.createTreeWalker(D$2,129);function it$2(t,e){if(!W$2(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==q$2?q$2.createHTML(e):e}const st$2=(t,e)=>{const n=t.length-1,r=[];let i,s=2===e?"<svg>":3===e?"<math>":"",o=V$2;for(let e=0;e<n;e++){const n=t[e];let a,h,u=-1,l=0;for(;l<n.length&&(o.lastIndex=l,h=o.exec(n),null!==h);)l=o.lastIndex,o===V$2?"!--"===h[1]?o=F$2:void 0!==h[1]?o=Y$2:void 0!==h[2]?(G$2.test(h[2])&&(i=RegExp("</"+h[2],"g")),o=Z$2):void 0!==h[3]&&(o=Z$2):o===Z$2?">"===h[0]?(o=i??V$2,u=-1):void 0===h[1]?u=-2:(u=o.lastIndex-h[2].length,a=h[1],o=void 0===h[3]?Z$2:'"'===h[3]?J$2:K$2):o===J$2||o===K$2?o=Z$2:o===F$2||o===Y$2?o=V$2:(o=Z$2,i=void 0);const c=o===Z$2&&t[e+1].startsWith("/>")?" ":"";s+=o===V$2?n+z$2:u>=0?(r.push(a),n.slice(0,u)+R$2+n.slice(u)+j$2+c):n+j$2+(-2===u?e:c);}return [it$2(t,s+(t[n]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),r]};let ot$2 = class ot{constructor({strings:t,_$litType$:e},n){let r;this.parts=[];let i=0,s=0;const o=t.length-1,a=this.parts,[h,u]=st$2(t,e);if(this.el=ot.createElement(h,n),rt$2.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes);}for(;null!==(r=rt$2.nextNode())&&a.length<o;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(R$2)){const e=u[s++],n=r.getAttribute(t).split(j$2),o=/([.?@])?(.*)/.exec(e);a.push({type:1,index:i,name:o[2],strings:n,ctor:"."===o[1]?ct$2:"?"===o[1]?ft$2:"@"===o[1]?pt$2:lt$2}),r.removeAttribute(t);}else t.startsWith(j$2)&&(a.push({type:6,index:i}),r.removeAttribute(t));if(G$2.test(r.tagName)){const t=r.textContent.split(j$2),e=t.length-1;if(e>0){r.textContent=U$2?U$2.emptyScript:"";for(let n=0;n<e;n++)r.append(t[n],I$2()),rt$2.nextNode(),a.push({type:2,index:++i});r.append(t[e],I$2());}}}else if(8===r.nodeType)if(r.data===B$2)a.push({type:2,index:i});else {let t=-1;for(;-1!==(t=r.data.indexOf(j$2,t+1));)a.push({type:7,index:i}),t+=j$2.length-1;}i++;}}static createElement(t,e){const n=D$2.createElement("template");return n.innerHTML=t,n}};function at$2(t,e,n=t,r){if(e===tt$2)return e;let i=void 0!==r?n._$Co?.[r]:n._$Cl;const s=L$2(e)?void 0:e._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),void 0===s?i=void 0:(i=new s(t),i._$AT(t,n,r)),void 0!==r?(n._$Co??=[])[r]=i:n._$Cl=i),void 0!==i&&(e=at$2(t,i._$AS(t,e.values),i,r)),e}let ht$2 = class ht{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e;}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,r=(t?.creationScope??D$2).importNode(e,!0);rt$2.currentNode=r;let i=rt$2.nextNode(),s=0,o=0,a=n[0];for(;void 0!==a;){if(s===a.index){let e;2===a.type?e=new ut$2(i,i.nextSibling,this,t):1===a.type?e=new a.ctor(i,a.name,a.strings,this,t):6===a.type&&(e=new dt$2(i,this,t)),this._$AV.push(e),a=n[++o];}s!==a?.index&&(i=rt$2.nextNode(),s++);}return rt$2.currentNode=D$2,r}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++;}};let ut$2 = class ut{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,r){this.type=2,this._$AH=et$2,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0;}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=at$2(this,t,e),L$2(t)?t===et$2||null==t||""===t?(this._$AH!==et$2&&this._$AR(),this._$AH=et$2):t!==this._$AH&&t!==tt$2&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>W$2(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t);}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t));}_(t){this._$AH!==et$2&&L$2(this._$AH)?this._$AA.nextSibling.data=t:this.T(D$2.createTextNode(t)),this._$AH=t;}$(t){const{values:e,_$litType$:n}=t,r="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=ot$2.createElement(it$2(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(e);else {const t=new ht$2(r,this),n=t.u(this.options);t.p(e),this.T(n),this._$AH=t;}}_$AC(t){let e=nt$2.get(t.strings);return void 0===e&&nt$2.set(t.strings,e=new ot$2(t)),e}k(t){W$2(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,r=0;for(const i of t)r===e.length?e.push(n=new ut(this.O(I$2()),this.O(I$2()),this,this.options)):n=e[r],n._$AI(i),r++;r<e.length&&(this._$AR(n&&n._$AB.nextSibling,r),e.length=r);}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e;}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t));}};let lt$2 = class lt{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,r,i){this.type=1,this._$AH=et$2,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=et$2;}_$AI(t,e=this,n,r){const i=this.strings;let s=!1;if(void 0===i)t=at$2(this,t,e,0),s=!L$2(t)||t!==this._$AH&&t!==tt$2,s&&(this._$AH=t);else {const r=t;let o,a;for(t=i[0],o=0;o<i.length-1;o++)a=at$2(this,r[n+o],e,o),a===tt$2&&(a=this._$AH[o]),s||=!L$2(a)||a!==this._$AH[o],a===et$2?t=et$2:t!==et$2&&(t+=(a??"")+i[o+1]),this._$AH[o]=a;}s&&!r&&this.j(t);}j(t){t===et$2?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"");}};let ct$2 = class ct extends lt$2{constructor(){super(...arguments),this.type=3;}j(t){this.element[this.name]=t===et$2?void 0:t;}};let ft$2 = class ft extends lt$2{constructor(){super(...arguments),this.type=4;}j(t){this.element.toggleAttribute(this.name,!!t&&t!==et$2);}};let pt$2 = class pt extends lt$2{constructor(t,e,n,r,i){super(t,e,n,r,i),this.type=5;}_$AI(t,e=this){if((t=at$2(this,t,e,0)??et$2)===tt$2)return;const n=this._$AH,r=t===et$2&&n!==et$2||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,i=t!==et$2&&(n===et$2||r);r&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,t),this._$AH=t;}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t);}};let dt$2 = class dt{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n;}get _$AU(){return this._$AM._$AU}_$AI(t){at$2(this,t);}};const gt$2=H$2.litHtmlPolyfillSupport;gt$2?.(ot$2,ut$2),(H$2.litHtmlVersions??=[]).push("3.2.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let _t$2=class _t extends T$2{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0;}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{const r=n?.renderBefore??e;let i=r._$litPart$;if(void 0===i){const t=n?.renderBefore??null;r._$litPart$=i=new ut$2(e.insertBefore(I$2(),t),t,void 0,n??{});}return i._$AI(t),i})(e,this.renderRoot,this.renderOptions);}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0);}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1);}render(){return tt$2}};_t$2._$litElement$=!0,_t$2.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:_t$2});const yt$2=globalThis.litElementPolyfillSupport;yt$2?.({LitElement:_t$2}),(globalThis.litElementVersions??=[]).push("4.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const mt$2={attribute:!0,type:String,converter:C$2,reflect:!1,hasChanged:P$2},vt$2=(t=mt$2,e,n)=>{const{kind:r,metadata:i}=n;let s=globalThis.litPropertyMetadata.get(i);if(void 0===s&&globalThis.litPropertyMetadata.set(i,s=new Map),s.set(n.name,t),"accessor"===r){const{name:r}=n;return {set(n){const i=e.get.call(this);e.set.call(this,n),this.requestUpdate(r,i,t);},init(e){return void 0!==e&&this.P(r,void 0,t),e}}}if("setter"===r){const{name:r}=n;return function(n){const i=this[r];e.call(this,n),this.requestUpdate(r,i,t);}}throw Error("Unsupported decorator location: "+r)};function wt$2(t){return t}var $t$2=1e-6;function bt$2(t){return "translate("+t+",0)"}function At$2(t){return e=>+t(e)}function xt$2(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Et$2(){return !this.__axis}function St$2(t,e){var n=[],r=null,i=null,s=6,o=6,a=3,h="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,u="y",l=bt$2;function c(t){var c=r??(e.ticks?e.ticks.apply(e,n):e.domain()),f=i??(e.tickFormat?e.tickFormat.apply(e,n):wt$2),p=Math.max(s,0)+a,d=e.range(),g=+d[0]+h,_=+d[d.length-1]+h,y=(e.bandwidth?xt$2:At$2)(e.copy(),h),m=t.selection?t.selection():t,v=m.selectAll(".domain").data([null]),w=m.selectAll(".tick").data(c,e).order(),$=w.exit(),b=w.enter().append("g").attr("class","tick"),A=w.select("line"),x=w.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(b),A=A.merge(b.append("line").attr("stroke","currentColor").attr("y2",1*s)),x=x.merge(b.append("text").attr("fill","currentColor").attr(u,1*p).attr("dy","0.71em")),t!==m&&(v=v.transition(t),w=w.transition(t),A=A.transition(t),x=x.transition(t),$=$.transition(t).attr("opacity",$t$2).attr("transform",(function(t){return isFinite(t=y(t))?l(t+h):this.getAttribute("transform")})),b.attr("opacity",$t$2).attr("transform",(function(t){var e=this.parentNode.__axis;return l((e&&isFinite(e=e(t))?e:y(t))+h)}))),$.remove(),v.attr("d",o?"M"+g+","+1*o+"V"+h+"H"+_+"V"+1*o:"M"+g+","+h+"H"+_),w.attr("opacity",1).attr("transform",(function(t){return l(y(t)+h)})),A.attr("y2",1*s),x.attr(u,1*p).text(f),m.filter(Et$2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),m.each((function(){this.__axis=y;}));}return c.scale=function(t){return arguments.length?(e=t,c):e},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),c):n.slice()},c.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),c):r&&r.slice()},c.tickFormat=function(t){return arguments.length?(i=t,c):i},c.tickSize=function(t){return arguments.length?(s=o=+t,c):s},c.tickSizeInner=function(t){return arguments.length?(s=+t,c):s},c.tickSizeOuter=function(t){return arguments.length?(o=+t,c):o},c.tickPadding=function(t){return arguments.length?(a=+t,c):a},c.offset=function(t){return arguments.length?(h=+t,c):h},c}var kt$2={value:()=>{}};function Mt$2(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[];}return new Nt$2(r)}function Nt$2(t){this._=t;}function Ct$2(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Pt$2(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=kt$2,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Nt$2.prototype=Mt$2.prototype={constructor:Nt$2,on:function(t,e){var n,r,i=this._,s=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return {type:t,name:e}}))),o=-1,a=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=s[o]).type)i[n]=Pt$2(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Pt$2(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=s[o]).type)&&(n=Ct$2(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Nt$2(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i);},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n);}};var Ot$2="http://www.w3.org/1999/xhtml",Tt$2={svg:"http://www.w3.org/2000/svg",xhtml:Ot$2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ht$2(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Tt$2.hasOwnProperty(e)?{space:Tt$2[e],local:t}:t}function Ut$2(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ot$2&&e.documentElement.namespaceURI===Ot$2?e.createElement(t):e.createElementNS(n,t)}}function qt$2(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Rt$2(t){var e=Ht$2(t);return (e.local?qt$2:Ut$2)(e)}function jt$2(){}function Bt$2(t){return null==t?jt$2:function(){return this.querySelector(t)}}function zt$2(){return []}function Dt$2(t){return null==t?zt$2:function(){return this.querySelectorAll(t)}}function It$2(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function Lt$2(t){return function(){return this.matches(t)}}function Wt$2(t){return function(e){return e.matches(t)}}var Xt$2=Array.prototype.find;function Vt$2(){return this.firstElementChild}var Ft$2=Array.prototype.filter;function Yt$2(){return Array.from(this.children)}function Zt$2(t){return new Array(t.length)}function Kt$2(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e;}function Jt$2(t,e,n,r,i,s){for(var o,a=0,h=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new Kt$2(t,s[a]);for(;a<h;++a)(o=e[a])&&(i[a]=o);}function Gt$2(t,e,n,r,i,s,o){var a,h,u,l=new Map,c=e.length,f=s.length,p=new Array(c);for(a=0;a<c;++a)(h=e[a])&&(p[a]=u=o.call(h,h.__data__,a,e)+"",l.has(u)?i[a]=h:l.set(u,h));for(a=0;a<f;++a)u=o.call(t,s[a],a,s)+"",(h=l.get(u))?(r[a]=h,h.__data__=s[a],l.delete(u)):n[a]=new Kt$2(t,s[a]);for(a=0;a<c;++a)(h=e[a])&&l.get(p[a])===h&&(i[a]=h);}function Qt$2(t){return t.__data__}function te$2(t){return "object"==typeof t&&"length"in t?t:Array.from(t)}function ee$2(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ne$2(t){return function(){this.removeAttribute(t);}}function re$2(t){return function(){this.removeAttributeNS(t.space,t.local);}}function ie$2(t,e){return function(){this.setAttribute(t,e);}}function se$2(t,e){return function(){this.setAttributeNS(t.space,t.local,e);}}function oe$2(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n);}}function ae$2(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n);}}function he$2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ue$2(t){return function(){this.style.removeProperty(t);}}function le$2(t,e,n){return function(){this.style.setProperty(t,e,n);}}function ce$2(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n);}}function fe$2(t,e){return t.style.getPropertyValue(e)||he$2(t).getComputedStyle(t,null).getPropertyValue(e)}function pe$2(t){return function(){delete this[t];}}function de$2(t,e){return function(){this[t]=e;}}function ge$2(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n;}}function _e$2(t){return t.trim().split(/^|\s+/)}function ye$2(t){return t.classList||new me$2(t)}function me$2(t){this._node=t,this._names=_e$2(t.getAttribute("class")||"");}function ve$2(t,e){for(var n=ye$2(t),r=-1,i=e.length;++r<i;)n.add(e[r]);}function we$2(t,e){for(var n=ye$2(t),r=-1,i=e.length;++r<i;)n.remove(e[r]);}function $e$2(t){return function(){ve$2(this,t);}}function be$2(t){return function(){we$2(this,t);}}function Ae$2(t,e){return function(){(e.apply(this,arguments)?ve$2:we$2)(this,t);}}function xe$2(){this.textContent="";}function Ee$2(t){return function(){this.textContent=t;}}function Se$2(t){return function(){var e=t.apply(this,arguments);this.textContent=e??"";}}function ke$2(){this.innerHTML="";}function Me$2(t){return function(){this.innerHTML=t;}}function Ne$2(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??"";}}function Ce$2(){this.nextSibling&&this.parentNode.appendChild(this);}function Pe$2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild);}function Oe$2(){return null}function Te$2(){var t=this.parentNode;t&&t.removeChild(this);}function He$2(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ue$2(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function qe$2(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,s=e.length;r<s;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on;}}}function Re$2(t,e,n){return function(){var r,i=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__);}}(e);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),void(r.value=e);this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r];}}function je$2(t,e,n){var r=he$2(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i);}function Be$2(t,e){return function(){return je$2(this,t,e)}}function ze$2(t,e){return function(){return je$2(this,t,e.apply(this,arguments))}}Kt$2.prototype={constructor:Kt$2,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},me$2.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")));},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")));},contains:function(t){return this._names.indexOf(t)>=0}};var De$2=[null];function Ie$2(t,e){this._groups=t,this._parents=e;}function Le$2(){return new Ie$2([[document.documentElement]],De$2)}function We$2(t,e,n){t.prototype=e.prototype=n,n.constructor=t;}function Xe$2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ve$2(){}Ie$2.prototype=Le$2.prototype={constructor:Ie$2,select:function(t){"function"!=typeof t&&(t=Bt$2(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],h=a.length,u=r[i]=new Array(h),l=0;l<h;++l)(s=a[l])&&(o=t.call(s,s.__data__,l,a))&&("__data__"in s&&(o.__data__=s.__data__),u[l]=o);return new Ie$2(r,this._parents)},selectAll:function(t){t="function"==typeof t?It$2(t):Dt$2(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],h=a.length,u=0;u<h;++u)(o=a[u])&&(r.push(t.call(o,o.__data__,u,a)),i.push(o));return new Ie$2(r,i)},selectChild:function(t){return this.select(null==t?Vt$2:function(t){return function(){return Xt$2.call(this.children,t)}}("function"==typeof t?t:Wt$2(t)))},selectChildren:function(t){return this.selectAll(null==t?Yt$2:function(t){return function(){return Ft$2.call(this.children,t)}}("function"==typeof t?t:Wt$2(t)))},filter:function(t){"function"!=typeof t&&(t=Lt$2(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,h=r[i]=[],u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&h.push(s);return new Ie$2(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Qt$2);var n=e?Gt$2:Jt$2,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var s=i.length,o=new Array(s),a=new Array(s),h=new Array(s),u=0;u<s;++u){var l=r[u],c=i[u],f=c.length,p=te$2(t.call(l,l&&l.__data__,u,r)),d=p.length,g=a[u]=new Array(d),_=o[u]=new Array(d);n(l,c,g,_,h[u]=new Array(f),p,e);for(var y,m,v=0,w=0;v<d;++v)if(y=g[v]){for(v>=w&&(w=v+1);!(m=_[w])&&++w<d;);y._next=m||null;}}return (o=new Ie$2(o,r))._enter=a,o._exit=h,o},enter:function(){return new Ie$2(this._enter||this._groups.map(Zt$2),this._parents)},exit:function(){return new Ie$2(this._exit||this._groups.map(Zt$2),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit();return "function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),h=0;h<o;++h)for(var u,l=n[h],c=r[h],f=l.length,p=a[h]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(p[d]=u);for(;h<i;++h)a[h]=n[h];return new Ie$2(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];--s>=0;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=ee$2);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o,a=n[s],h=a.length,u=i[s]=new Array(h),l=0;l<h;++l)(o=a[l])&&(u[l]=o);u.sort(e);}return new Ie$2(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return !this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=Ht$2(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?re$2:ne$2:"function"==typeof e?n.local?ae$2:oe$2:n.local?se$2:ie$2)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?ue$2:"function"==typeof e?ce$2:le$2)(t,e,n??"")):fe$2(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?pe$2:"function"==typeof e?ge$2:de$2)(t,e)):this.node()[t]},classed:function(t,e){var n=_e$2(t+"");if(arguments.length<2){for(var r=ye$2(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return !1;return !0}return this.each(("function"==typeof e?Ae$2:e?$e$2:be$2)(n,e))},text:function(t){return arguments.length?this.each(null==t?xe$2:("function"==typeof t?Se$2:Ee$2)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ke$2:("function"==typeof t?Ne$2:Me$2)(t)):this.node().innerHTML},raise:function(){return this.each(Ce$2)},lower:function(){return this.each(Pe$2)},append:function(t){var e="function"==typeof t?t:Rt$2(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Rt$2(t),r=null==e?Oe$2:"function"==typeof e?e:Bt$2(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Te$2)},clone:function(t){return this.select(t?Ue$2:He$2)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?Re$2:qe$2,r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var h,u=0,l=a.length;u<l;++u)for(r=0,h=a[u];r<o;++r)if((i=s[r]).type===h.type&&i.name===h.name)return h.value},dispatch:function(t,e){return this.each(("function"==typeof e?ze$2:Be$2)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r);}};var Fe$2=.7,Ye$2=1/Fe$2,Ze$2="\\s*([+-]?\\d+)\\s*",Ke$2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Je$2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ge$2=/^#([0-9a-f]{3,8})$/,Qe$2=new RegExp(`^rgb\\(${Ze$2},${Ze$2},${Ze$2}\\)$`),tn$2=new RegExp(`^rgb\\(${Je$2},${Je$2},${Je$2}\\)$`),en$2=new RegExp(`^rgba\\(${Ze$2},${Ze$2},${Ze$2},${Ke$2}\\)$`),nn$2=new RegExp(`^rgba\\(${Je$2},${Je$2},${Je$2},${Ke$2}\\)$`),rn$2=new RegExp(`^hsl\\(${Ke$2},${Je$2},${Je$2}\\)$`),sn$2=new RegExp(`^hsla\\(${Ke$2},${Je$2},${Je$2},${Ke$2}\\)$`),on$2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function an$2(){return this.rgb().formatHex()}function hn$2(){return this.rgb().formatRgb()}function un$2(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ge$2.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ln$2(e):3===n?new pn$2(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?cn$2(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?cn$2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Qe$2.exec(t))?new pn$2(e[1],e[2],e[3],1):(e=tn$2.exec(t))?new pn$2(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=en$2.exec(t))?cn$2(e[1],e[2],e[3],e[4]):(e=nn$2.exec(t))?cn$2(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=rn$2.exec(t))?vn$2(e[1],e[2]/100,e[3]/100,1):(e=sn$2.exec(t))?vn$2(e[1],e[2]/100,e[3]/100,e[4]):on$2.hasOwnProperty(t)?ln$2(on$2[t]):"transparent"===t?new pn$2(NaN,NaN,NaN,0):null}function ln$2(t){return new pn$2(t>>16&255,t>>8&255,255&t,1)}function cn$2(t,e,n,r){return r<=0&&(t=e=n=NaN),new pn$2(t,e,n,r)}function fn$2(t,e,n,r){return 1===arguments.length?function(t){return t instanceof Ve$2||(t=un$2(t)),t?new pn$2((t=t.rgb()).r,t.g,t.b,t.opacity):new pn$2}(t):new pn$2(t,e,n,r??1)}function pn$2(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r;}function dn$2(){return `#${mn$2(this.r)}${mn$2(this.g)}${mn$2(this.b)}`}function gn$2(){const t=_n$2(this.opacity);return `${1===t?"rgb(":"rgba("}${yn$2(this.r)}, ${yn$2(this.g)}, ${yn$2(this.b)}${1===t?")":`, ${t})`}`}function _n$2(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function yn$2(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function mn$2(t){return ((t=yn$2(t))<16?"0":"")+t.toString(16)}function vn$2(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $n$2(t,e,n,r)}function wn$2(t){if(t instanceof $n$2)return new $n$2(t.h,t.s,t.l,t.opacity);if(t instanceof Ve$2||(t=un$2(t)),!t)return new $n$2;if(t instanceof $n$2)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,h=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=h<.5?s+i:2-s-i,o*=60):a=h>0&&h<1?0:o,new $n$2(o,a,h,t.opacity)}function $n$2(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r;}function bn$2(t){return (t=(t||0)%360)<0?t+360:t}function An$2(t){return Math.max(0,Math.min(1,t||0))}function xn$2(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}We$2(Ve$2,un$2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:an$2,formatHex:an$2,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return wn$2(this).formatHsl()},formatRgb:hn$2,toString:hn$2}),We$2(pn$2,fn$2,Xe$2(Ve$2,{brighter(t){return t=null==t?Ye$2:Math.pow(Ye$2,t),new pn$2(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Fe$2:Math.pow(Fe$2,t),new pn$2(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new pn$2(yn$2(this.r),yn$2(this.g),yn$2(this.b),_n$2(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dn$2,formatHex:dn$2,formatHex8:function(){return `#${mn$2(this.r)}${mn$2(this.g)}${mn$2(this.b)}${mn$2(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:gn$2,toString:gn$2})),We$2($n$2,(function(t,e,n,r){return 1===arguments.length?wn$2(t):new $n$2(t,e,n,r??1)}),Xe$2(Ve$2,{brighter(t){return t=null==t?Ye$2:Math.pow(Ye$2,t),new $n$2(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Fe$2:Math.pow(Fe$2,t),new $n$2(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new pn$2(xn$2(t>=240?t-240:t+120,i,r),xn$2(t,i,r),xn$2(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new $n$2(bn$2(this.h),An$2(this.s),An$2(this.l),_n$2(this.opacity))},displayable(){return (0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=_n$2(this.opacity);return `${1===t?"hsl(":"hsla("}${bn$2(this.h)}, ${100*An$2(this.s)}%, ${100*An$2(this.l)}%${1===t?")":`, ${t})`}`}}));var En$2=t=>()=>t;function Sn$2(t){return 1==(t=+t)?kn$2:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):En$2(isNaN(e)?n:e)}}function kn$2(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):En$2(isNaN(t)?e:t)}var Mn$2=function t(e){var n=Sn$2(e);function r(t,e){var r=n((t=fn$2(t)).r,(e=fn$2(e)).r),i=n(t.g,e.g),s=n(t.b,e.b),o=kn$2(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=s(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Nn$2(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Cn$2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pn$2=new RegExp(Cn$2.source,"g");function On$2(t,e){var n,r,i,s=Cn$2.lastIndex=Pn$2.lastIndex=0,o=-1,a=[],h=[];for(t+="",e+="";(n=Cn$2.exec(t))&&(r=Pn$2.exec(e));)(i=r.index)>s&&(i=e.slice(s,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,h.push({i:o,x:Nn$2(n,r)})),s=Pn$2.lastIndex;return s<e.length&&(i=e.slice(s),a[o]?a[o]+=i:a[++o]=i),a.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,r=0;r<e;++r)a[(n=h[r]).i]=n.x(t);return a.join("")})}var Tn$2,Hn$2=180/Math.PI,Un$2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qn$2(t,e,n,r,i,s){var o,a,h;return (o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(h=t*n+e*r)&&(n-=t*h,r-=e*h),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,h/=a),t*r<e*n&&(t=-t,e=-e,h=-h,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Hn$2,skewX:Math.atan(h)*Hn$2,scaleX:o,scaleY:a}}function Rn$2(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(s,o){var a=[],h=[];return s=t(s),o=t(o),function(t,r,i,s,o,a){if(t!==i||r!==s){var h=o.push("translate(",null,e,null,n);a.push({i:h-4,x:Nn$2(t,i)},{i:h-2,x:Nn$2(r,s)});}else (i||s)&&o.push("translate("+i+e+s+n);}(s.translateX,s.translateY,o.translateX,o.translateY,a,h),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Nn$2(t,e)})):e&&n.push(i(n)+"rotate("+e+r);}(s.rotate,o.rotate,a,h),function(t,e,n,s){t!==e?s.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Nn$2(t,e)}):e&&n.push(i(n)+"skewX("+e+r);}(s.skewX,o.skewX,a,h),function(t,e,n,r,s,o){if(t!==n||e!==r){var a=s.push(i(s)+"scale(",null,",",null,")");o.push({i:a-4,x:Nn$2(t,n)},{i:a-2,x:Nn$2(e,r)});}else 1===n&&1===r||s.push(i(s)+"scale("+n+","+r+")");}(s.scaleX,s.scaleY,o.scaleX,o.scaleY,a,h),s=o=null,function(t){for(var e,n=-1,r=h.length;++n<r;)a[(e=h[n]).i]=e.x(t);return a.join("")}}}var jn$2,Bn$2,zn$2=Rn$2((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Un$2:qn$2(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Dn$2=Rn$2((function(t){return null==t?Un$2:(Tn$2||(Tn$2=document.createElementNS("http://www.w3.org/2000/svg","g")),Tn$2.setAttribute("transform",t),(t=Tn$2.transform.baseVal.consolidate())?qn$2((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Un$2)}),", ",")",")"),In$2=0,Ln$2=0,Wn$2=0,Xn$2=0,Vn$2=0,Fn$2=0,Yn$2="object"==typeof performance&&performance.now?performance:Date,Zn$2="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17);};function Kn$2(){return Vn$2||(Zn$2(Jn$2),Vn$2=Yn$2.now()+Fn$2)}function Jn$2(){Vn$2=0;}function Gn$2(){this._call=this._time=this._next=null;}function Qn$2(t,e,n){var r=new Gn$2;return r.restart(t,e,n),r}function tr$2(){Vn$2=(Xn$2=Yn$2.now())+Fn$2,In$2=Ln$2=0;try{!function(){Kn$2(),++In$2;for(var t,e=jn$2;e;)(t=Vn$2-e._time)>=0&&e._call.call(void 0,t),e=e._next;--In$2;}();}finally{In$2=0,function(){var t,e,n=jn$2,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:jn$2=e);Bn$2=t,nr$2(r);}(),Vn$2=0;}}function er$2(){var t=Yn$2.now(),e=t-Xn$2;e>1e3&&(Fn$2-=e,Xn$2=t);}function nr$2(t){In$2||(Ln$2&&(Ln$2=clearTimeout(Ln$2)),t-Vn$2>24?(t<1/0&&(Ln$2=setTimeout(tr$2,t-Yn$2.now()-Fn$2)),Wn$2&&(Wn$2=clearInterval(Wn$2))):(Wn$2||(Xn$2=Yn$2.now(),Wn$2=setInterval(er$2,1e3)),In$2=1,Zn$2(tr$2)));}function rr$2(t,e,n){var r=new Gn$2;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e);}),e,n),r}Gn$2.prototype=Qn$2.prototype={constructor:Gn$2,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Kn$2():+n)+(null==e?0:+e),this._next||Bn$2===this||(Bn$2?Bn$2._next=this:jn$2=this,Bn$2=this),this._call=t,this._time=n,nr$2();},stop:function(){this._call&&(this._call=null,this._time=1/0,nr$2());}};var ir$2=Mt$2("start","end","cancel","interrupt"),sr$2=[];function or$2(t,e,n,r,i,s){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function s(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay);}function o(s){var u,l,c,f;if(1!==n.state)return h();for(u in i)if((f=i[u]).name===n.name){if(3===f.state)return rr$2(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[u]):+u<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[u]);}if(rr$2((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(s));})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(c=n.tween.length),u=0,l=-1;u<c;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1;}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(h),n.state=5,1),s=-1,o=r.length;++s<o;)r[s].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),h());}function h(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition;}i[e]=n,n.timer=Qn$2(s,0,n.time);}(t,n,{name:e,index:r,group:i,on:ir$2,tween:sr$2,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0});}function ar$2(t,e){var n=ur$2(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function hr$2(t,e){var n=ur$2(t,e);if(n.state>3)throw new Error("too late; already running");return n}function ur$2(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function lr$2(t,e){var n,r;return function(){var i=hr$2(this,t),s=i.tween;if(s!==n)for(var o=0,a=(r=n=s).length;o<a;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r;}}function cr$2(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var s=hr$2(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},h=0,u=i.length;h<u;++h)if(i[h].name===e){i[h]=a;break}h===u&&i.push(a);}s.tween=i;}}function fr$2(t,e,n){var r=t._id;return t.each((function(){var t=hr$2(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments);})),function(t){return ur$2(t,r).value[e]}}function pr$2(t,e){var n;return ("number"==typeof e?Nn$2:e instanceof un$2?Mn$2:(n=un$2(e))?(e=n,Mn$2):On$2)(t,e)}function dr$2(t){return function(){this.removeAttribute(t);}}function gr$2(t){return function(){this.removeAttributeNS(t.space,t.local);}}function _r$1(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttribute(t);return o===s?null:o===r?i:i=e(r=o,n)}}function yr$1(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===r?i:i=e(r=o,n)}}function mr$2(t,e,n){var r,i,s;return function(){var o,a,h=n(this);if(null!=h)return (o=this.getAttribute(t))===(a=h+"")?null:o===r&&a===i?s:(i=a,s=e(r=o,h));this.removeAttribute(t);}}function vr$1(t,e,n){var r,i,s;return function(){var o,a,h=n(this);if(null!=h)return (o=this.getAttributeNS(t.space,t.local))===(a=h+"")?null:o===r&&a===i?s:(i=a,s=e(r=o,h));this.removeAttributeNS(t.space,t.local);}}function wr$1(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n));}}(t,i)),n}return i._value=e,i}function $r$1(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n));}}(t,i)),n}return i._value=e,i}function br$1(t,e){return function(){ar$2(this,t).delay=+e.apply(this,arguments);}}function Ar$1(t,e){return e=+e,function(){ar$2(this,t).delay=e;}}function xr$1(t,e){return function(){hr$2(this,t).duration=+e.apply(this,arguments);}}function Er$1(t,e){return e=+e,function(){hr$2(this,t).duration=e;}}var Sr$1=Le$2.prototype.constructor;function kr$1(t){return function(){this.style.removeProperty(t);}}var Mr$1=0;function Nr$1(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r;}function Cr$1(){return ++Mr$1}var Pr$1=Le$2.prototype;Nr$1.prototype={constructor:Nr$1,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Bt$2(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,h,u=r[o],l=u.length,c=s[o]=new Array(l),f=0;f<l;++f)(a=u[f])&&(h=t.call(a,a.__data__,f,u))&&("__data__"in a&&(h.__data__=a.__data__),c[f]=h,or$2(c[f],e,n,f,c,ur$2(a,n)));return new Nr$1(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Dt$2(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var h,u=r[a],l=u.length,c=0;c<l;++c)if(h=u[c]){for(var f,p=t.call(h,h.__data__,c,u),d=ur$2(h,n),g=0,_=p.length;g<_;++g)(f=p[g])&&or$2(f,e,n,g,p,d);s.push(p),o.push(h);}return new Nr$1(s,o,e,n)},selectChild:Pr$1.selectChild,selectChildren:Pr$1.selectChildren,filter:function(t){"function"!=typeof t&&(t=Lt$2(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,h=r[i]=[],u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&h.push(s);return new Nr$1(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var h,u=e[a],l=n[a],c=u.length,f=o[a]=new Array(c),p=0;p<c;++p)(h=u[p]||l[p])&&(f[p]=h);for(;a<r;++a)o[a]=e[a];return new Nr$1(o,this._parents,this._name,this._id)},selection:function(){return new Sr$1(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Cr$1(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],h=a.length,u=0;u<h;++u)if(o=a[u]){var l=ur$2(o,e);or$2(o,t,n,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease});}return new Nr$1(r,this._parents,t,n)},call:Pr$1.call,nodes:Pr$1.nodes,node:Pr$1.node,size:Pr$1.size,empty:Pr$1.empty,each:Pr$1.each,on:function(t,e){var n=this._id;return arguments.length<2?ur$2(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,s=function(t){return (t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?ar$2:hr$2;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i;}}(n,t,e))},attr:function(t,e){var n=Ht$2(t),r="transform"===n?Dn$2:pr$2;return this.attrTween(t,"function"==typeof e?(n.local?vr$1:mr$2)(n,r,fr$2(this,"attr."+t,e)):null==e?(n.local?gr$2:dr$2)(n):(n.local?yr$1:_r$1)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return (n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Ht$2(t);return this.tween(n,(r.local?wr$1:$r$1)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?zn$2:pr$2;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var s=fe$2(this,t),o=(this.style.removeProperty(t),fe$2(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}(t,r)).on("end.style."+t,kr$1(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,s;return function(){var o=fe$2(this,t),a=n(this),h=a+"";return null==a&&(this.style.removeProperty(t),h=a=fe$2(this,t)),o===h?null:o===r&&h===i?s:(i=h,s=e(r=o,a))}}(t,r,fr$2(this,"style."+t,e))).each(function(t,e){var n,r,i,s,o="style."+e,a="end."+o;return function(){var h=hr$2(this,t),u=h.on,l=null==h.value[o]?s||(s=kr$1(e)):void 0;u===n&&i===l||(r=(n=u).copy()).on(a,i=l),h.on=r;}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,s=n+"";return function(){var o=fe$2(this,t);return o===s?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return (r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function s(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n);}}(t,s,n)),r}return s._value=e,s}(t,e,n??""))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=e??"";}}(fr$2(this,"text",t)):function(t){return function(){this.textContent=t;}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return (e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e);}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this);}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=ur$2(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?lr$2:cr$2)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?br$1:Ar$1)(e,t)):ur$2(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?xr$1:Er$1)(e,t)):ur$2(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){hr$2(this,t).ease=e;}}(e,t)):ur$2(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;hr$2(this,t).ease=n;}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(s,o){var a={value:o},h={value:function(){0==--i&&s();}};n.each((function(){var n=hr$2(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(h)),n.on=e;})),0===i&&s();}))},[Symbol.iterator]:Pr$1[Symbol.iterator]};var Or$1,Tr$1,Hr,Ur$1={time:null,delay:0,duration:250,ease:function(t){return ((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function qr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Rr(t,e,n){this.k=t,this.x=e,this.y=n;}Le$2.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition;}}(this,t);}))},Le$2.prototype.transition=function(t){var e,n;t instanceof Nr$1?(e=t._id,t=t._name):(e=Cr$1(),(n=Ur$1).time=Kn$2(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],h=a.length,u=0;u<h;++u)(o=a[u])&&or$2(o,t,e,u,a,n||qr(o,e));return new Nr$1(r,this._parents,t,e)},Rr.prototype={constructor:Rr,scale:function(t){return 1===t?this:new Rr(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Rr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return [t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return [(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return (t-this.x)/this.k},invertY:function(t){return (t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return "translate("+this.x+","+this.y+") scale("+this.k+")"}},Rr.prototype;let jr=class extends(tr$5(ar$5(Fi$3(Ki$3(Li$3(k$5(rr$5(ro$1)))))))){constructor(){super(...arguments),Or$1.set(this,void 0),Tr$1.set(this,void 0),Hr.set(this,void 0);}connectedCallback(){super.connectedCallback();const t=parseInt(this.getAttribute("numberofticks")||"",10);this.numberOfTicks=Number.isInteger(t)?t:3,this.addEventListener("load",(t=>{this.data=t.detail.payload;}));}get data(){return this.sequence||""}set data(t){"string"==typeof t?this.sequence=t:"string"==typeof(null==t?void 0:t.sequence)&&(this.sequence=t.sequence),this.svg&&(this.updateScaleDomain(),this.applyZoomTranslation());}getCharSize(){var t,e;if(!this.seq_g)return;const n=this.seq_g.select("text.base").node();if(n)this.chWidth=.8*n.getBBox().width,this.chHeight=1.6*n.getBBox().height;else {const n=this.seq_g.append("text").attr("class","base").text("T");this.chWidth=.8*((null===(t=n.node())||void 0===t?void 0:t.getBBox().width)||0),this.chHeight=1.6*((null===(e=n.node())||void 0===e?void 0:e.getBBox().height)||0),n.remove();}}createSequence(){var t,e,n;this.svg=function(t){return "string"==typeof t?new Ie$2([[document.querySelector(t)]],[document.documentElement]):new Ie$2([[t]],De$2)}(this).selectAll("svg").attr("id","").attr("width",this.width).attr("height",this.height),f$2(this,Or$1,null===(t=this.svg)||void 0===t?void 0:t.append("g").attr("class","background"),"f"),f$2(this,Tr$1,null===(e=this.svg)||void 0===e?void 0:e.append("g").attr("class","x axis"),"f"),this.seq_g=null===(n=this.svg)||void 0===n?void 0:n.append("g").attr("class","sequence").attr("transform",`translate(0,${this["margin-top"]+.75*this.getHeightWithMargins()})`),this.highlighted=this.svg.append("g").attr("class","highlighted"),this.margins=this.svg.append("g").attr("class","margin"),this.sequence&&(this.updateScaleDomain(),this.applyZoomTranslation());}firstUpdated(){this.createSequence();}zoomRefreshed(){this.renderD3();}renderD3(){var t,e,n,r;if(this.getCharSize(),null===(t=this.svg)||void 0===t||t.attr("width",this.width).attr("height",this.height),c$2(this,Tr$1,"f")){const t=this.getSingleBaseWidth(),i=t-(this.chWidth||0),s=t/2,o=Math.floor(Math.max(0,this.getStart()-1)),a=Math.ceil(Math.min((null===(e=this.sequence)||void 0===e?void 0:e.length)||0,this.getEnd())),u=i<0?[]:(null===(n=this.sequence)||void 0===n?void 0:n.slice(o,a).split("").map(((t,e)=>({position:1+o+e,aa:t}))))||[];if(this.height>(this.chWidth||0)&&this.xScale){const t=(r=this.xScale,St$2(0,r)).tickFormat((t=>`${Number.isInteger(t)?t:""}`)).ticks(this.numberOfTicks,"s");c$2(this,Tr$1,"f").call(t);}c$2(this,Tr$1,"f").attr("transform",`translate(${s},${this["margin-top"]})`),c$2(this,Tr$1,"f").select(".domain").remove(),c$2(this,Tr$1,"f").selectAll(".tick line").remove(),c$2(this,Tr$1,"f").selectAll(".tick text").attr("y",2);const l=Math.max(10,this.chWidth||10,Math.min(this["margin-top"]+.25*this.getHeightWithMargins(),t-2));if(c$2(this,Tr$1,"f").selectAll(".tick text").attr("font-size",l),this.seq_g){this.seq_g.attr("transform",`translate(0,${this["margin-top"]+.75*this.getHeightWithMargins()})`),f$2(this,Hr,this.seq_g.selectAll("text.base"),"f");const e=c$2(this,Hr,"f").data(u,(t=>t.position));if(e.enter().append("text").attr("class","base").attr("text-anchor","middle").attr("x",(t=>this.getXFromSeqPosition(t.position)+s)).text((t=>t.aa)).attr("font-size",l).style("pointer-events","none").style("font-family","monospace"),e.exit().remove(),e.attr("font-size",l).attr("x",(t=>this.getXFromSeqPosition(t.position)+s)),c$2(this,Or$1,"f")){const e=c$2(this,Or$1,"f").selectAll("rect.base_bg").data(u,(t=>t.position));e.enter().append("rect").attr("class","base_bg feature").attr("height",this.getHeightWithMargins()).attr("width",t).attr("fill",(t=>Math.round(t.position)%2?"#ccc":"#eee")).attr("x",(t=>this.getXFromSeqPosition(t.position))).attr("y",this["margin-top"]).style("opacity",Math.min(1,i)).call(cr$5,this),e.attr("width",t).attr("fill",(t=>Math.round(t.position)%2?"#ccc":"#eee")).attr("height",this.getHeightWithMargins()).attr("x",(t=>this.getXFromSeqPosition(t.position))).attr("y",this["margin-top"]),e.exit().remove(),this.seq_g.style("opacity",Math.min(1,i)),e.style("opacity",Math.min(1,i));}}this.updateHighlight(),this.renderMarginOnGroup(this.margins);}}getStart(){return this["display-start"]||1}getEnd(){return ((this["display-end"]||0)>0?this["display-end"]:this.length)||0}updateHighlight(){if(!this.highlighted)return;const t=this.highlighted.selectAll("rect").data(this.highlightedRegion.segments);t.enter().append("rect").style("pointer-events","none").merge(t).attr("fill",this["highlight-color"]).attr("height",this.height).attr("x",(t=>this.getXFromSeqPosition(t.start))).attr("width",(t=>Math.max(0,this.getSingleBaseWidth()*(t.end-t.start+1)))),t.exit().remove();}render(){return Q$2`<svg class="container"></svg>`}};Or$1=new WeakMap,Tr$1=new WeakMap,Hr=new WeakMap,l$1([function(t){return (e,n)=>"object"==typeof n?vt$2(t,e,n):((t,e,n)=>{const r=e.hasOwnProperty(n);return e.constructor.createProperty(n,r?{...t,wrapped:!0}:t),r?Object.getOwnPropertyDescriptor(e,n):void 0})(t,e,n)}({type:String})],jr.prototype,"sequence",void 0),jr=l$1([wr$4("nightingale-sequence")],jr);var Br=jr;

var index$1 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    default: Br
});

function u$1(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function c$1(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return "m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)}function f$1(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return "a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n}"function"==typeof SuppressedError&&SuppressedError;var p$1={value:()=>{}};function d$1(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[];}return new g$1(i)}function g$1(t){this._=t;}function m$1(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function v$1(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=p$1,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}g$1.prototype=d$1.prototype={constructor:g$1,on:function(t,e){var n,i,r=this._,o=(i=r,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return {type:t,name:e}}))),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=o[s]).type)r[n]=v$1(r[n],t.name,e);else if(null==e)for(n in r)r[n]=v$1(r[n],t.name,null);return this}for(;++s<a;)if((n=(t=o[s]).type)&&(n=m$1(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new g$1(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r);},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n);}};var y$1="http://www.w3.org/1999/xhtml",_$1={svg:"http://www.w3.org/2000/svg",xhtml:y$1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $$1(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),_$1.hasOwnProperty(e)?{space:_$1[e],local:t}:t}function b$1(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===y$1&&e.documentElement.namespaceURI===y$1?e.createElement(t):e.createElementNS(n,t)}}function w$1(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function A$1(t){var e=$$1(t);return (e.local?w$1:b$1)(e)}function x$1(){}function S$1(t){return null==t?x$1:function(){return this.querySelector(t)}}function E$1(){return []}function C$1(t){return null==t?E$1:function(){return this.querySelectorAll(t)}}function N$1(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function M$1(t){return function(){return this.matches(t)}}function P$1(t){return function(e){return e.matches(t)}}var L$1=Array.prototype.find;function O$1(){return this.firstElementChild}var k$1=Array.prototype.filter;function T$1(){return Array.from(this.children)}function H$1(t){return new Array(t.length)}function F$1(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e;}function R$1(t,e,n,i,r,o){for(var s,a=0,l=e.length,h=o.length;a<h;++a)(s=e[a])?(s.__data__=o[a],i[a]=s):n[a]=new F$1(t,o[a]);for(;a<l;++a)(s=e[a])&&(r[a]=s);}function U$1(t,e,n,i,r,o,s){var a,l,h,u=new Map,c=e.length,f=o.length,p=new Array(c);for(a=0;a<c;++a)(l=e[a])&&(p[a]=h=s.call(l,l.__data__,a,e)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<f;++a)h=s.call(t,o[a],a,o)+"",(l=u.get(h))?(i[a]=l,l.__data__=o[a],u.delete(h)):n[a]=new F$1(t,o[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(p[a])===l&&(r[a]=l);}function j$1(t){return t.__data__}function I$1(t){return "object"==typeof t&&"length"in t?t:Array.from(t)}function q$1(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function D$1(t){return function(){this.removeAttribute(t);}}function B$1(t){return function(){this.removeAttributeNS(t.space,t.local);}}function Z$1(t,e){return function(){this.setAttribute(t,e);}}function z$1(t,e){return function(){this.setAttributeNS(t.space,t.local,e);}}function W$1(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n);}}function X$1(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n);}}function Y$1(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function G$1(t){return function(){this.style.removeProperty(t);}}function V$1(t,e,n){return function(){this.style.setProperty(t,e,n);}}function K$1(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n);}}function Q$1(t,e){return t.style.getPropertyValue(e)||Y$1(t).getComputedStyle(t,null).getPropertyValue(e)}function J$1(t){return function(){delete this[t];}}function tt$1(t,e){return function(){this[t]=e;}}function et$1(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n;}}function nt$1(t){return t.trim().split(/^|\s+/)}function it$1(t){return t.classList||new rt$1(t)}function rt$1(t){this._node=t,this._names=nt$1(t.getAttribute("class")||"");}function ot$1(t,e){for(var n=it$1(t),i=-1,r=e.length;++i<r;)n.add(e[i]);}function st$1(t,e){for(var n=it$1(t),i=-1,r=e.length;++i<r;)n.remove(e[i]);}function at$1(t){return function(){ot$1(this,t);}}function lt$1(t){return function(){st$1(this,t);}}function ht$1(t,e){return function(){(e.apply(this,arguments)?ot$1:st$1)(this,t);}}function ut$1(){this.textContent="";}function ct$1(t){return function(){this.textContent=t;}}function ft$1(t){return function(){var e=t.apply(this,arguments);this.textContent=e??"";}}function pt$1(){this.innerHTML="";}function dt$1(t){return function(){this.innerHTML=t;}}function gt$1(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??"";}}function mt$1(){this.nextSibling&&this.parentNode.appendChild(this);}function vt$1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild);}function yt$1(){return null}function _t$1(){var t=this.parentNode;t&&t.removeChild(this);}function $t$1(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bt$1(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wt$1(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on;}}}function At$1(t,e,n){return function(){var i,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__);}}(e);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i];}}function xt$1(t,e,n){var i=Y$1(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r);}function St$1(t,e){return function(){return xt$1(this,t,e)}}function Et$1(t,e){return function(){return xt$1(this,t,e.apply(this,arguments))}}F$1.prototype={constructor:F$1,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},rt$1.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")));},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")));},contains:function(t){return this._names.indexOf(t)>=0}};var Ct$1=[null];function Nt$1(t,e){this._groups=t,this._parents=e;}function Mt$1(){return new Nt$1([[document.documentElement]],Ct$1)}function Pt$1(t,e,n){t.prototype=e.prototype=n,n.constructor=t;}function Lt$1(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Ot$1(){}Nt$1.prototype=Mt$1.prototype={constructor:Nt$1,select:function(t){"function"!=typeof t&&(t=S$1(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=e[r],l=a.length,h=i[r]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=t.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),h[u]=s);return new Nt$1(i,this._parents)},selectAll:function(t){t="function"==typeof t?N$1(t):C$1(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s,a=e[o],l=a.length,h=0;h<l;++h)(s=a[h])&&(i.push(t.call(s,s.__data__,h,a)),r.push(s));return new Nt$1(i,r)},selectChild:function(t){return this.select(null==t?O$1:function(t){return function(){return L$1.call(this.children,t)}}("function"==typeof t?t:P$1(t)))},selectChildren:function(t){return this.selectAll(null==t?T$1:function(t){return function(){return k$1.call(this.children,t)}}("function"==typeof t?t:P$1(t)))},filter:function(t){"function"!=typeof t&&(t=M$1(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,l=i[r]=[],h=0;h<a;++h)(o=s[h])&&t.call(o,o.__data__,h,s)&&l.push(o);return new Nt$1(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,j$1);var n=e?U$1:R$1,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),h=0;h<o;++h){var u=i[h],c=r[h],f=c.length,p=I$1(t.call(u,u&&u.__data__,h,i)),d=p.length,g=a[h]=new Array(d),m=s[h]=new Array(d);n(u,c,g,m,l[h]=new Array(f),p,e);for(var v,y,_=0,$=0;_<d;++_)if(v=g[_]){for(_>=$&&($=_+1);!(y=m[$])&&++$<d;);v._next=y||null;}}return (s=new Nt$1(s,i))._enter=a,s._exit=l,s},enter:function(){return new Nt$1(this._enter||this._groups.map(H$1),this._parents)},exit:function(){return new Nt$1(this._exit||this._groups.map(H$1),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return "function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var h,u=n[l],c=i[l],f=u.length,p=a[l]=new Array(f),d=0;d<f;++d)(h=u[d]||c[d])&&(p[d]=h);for(;l<r;++l)a[l]=n[l];return new Nt$1(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=q$1);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],l=a.length,h=r[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(h[u]=s);h.sort(e);}return new Nt$1(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return !this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],s=0,a=o.length;s<a;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this},attr:function(t,e){var n=$$1(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?B$1:D$1:"function"==typeof e?n.local?X$1:W$1:n.local?z$1:Z$1)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?G$1:"function"==typeof e?K$1:V$1)(t,e,n??"")):Q$1(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?J$1:"function"==typeof e?et$1:tt$1)(t,e)):this.node()[t]},classed:function(t,e){var n=nt$1(t+"");if(arguments.length<2){for(var i=it$1(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return !1;return !0}return this.each(("function"==typeof e?ht$1:e?at$1:lt$1)(n,e))},text:function(t){return arguments.length?this.each(null==t?ut$1:("function"==typeof t?ft$1:ct$1)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?pt$1:("function"==typeof t?gt$1:dt$1)(t)):this.node().innerHTML},raise:function(){return this.each(mt$1)},lower:function(){return this.each(vt$1)},append:function(t){var e="function"==typeof t?t:A$1(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:A$1(t),i=null==e?yt$1:"function"==typeof e?e:S$1(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(_t$1)},clone:function(t){return this.select(t?bt$1:$t$1)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?At$1:wt$1,i=0;i<s;++i)this.each(a(o[i],e,n));return this}var a=this.node().__on;if(a)for(var l,h=0,u=a.length;h<u;++h)for(i=0,l=a[h];i<s;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Et$1:St$1)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,s=r.length;o<s;++o)(i=r[o])&&(yield i);}};var kt$1=.7,Tt$1=1/kt$1,Ht$1="\\s*([+-]?\\d+)\\s*",Ft$1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rt$1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ut$1=/^#([0-9a-f]{3,8})$/,jt$1=new RegExp(`^rgb\\(${Ht$1},${Ht$1},${Ht$1}\\)$`),It$1=new RegExp(`^rgb\\(${Rt$1},${Rt$1},${Rt$1}\\)$`),qt$1=new RegExp(`^rgba\\(${Ht$1},${Ht$1},${Ht$1},${Ft$1}\\)$`),Dt$1=new RegExp(`^rgba\\(${Rt$1},${Rt$1},${Rt$1},${Ft$1}\\)$`),Bt$1=new RegExp(`^hsl\\(${Ft$1},${Rt$1},${Rt$1}\\)$`),Zt$1=new RegExp(`^hsla\\(${Ft$1},${Rt$1},${Rt$1},${Ft$1}\\)$`),zt$1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Wt$1(){return this.rgb().formatHex()}function Xt$1(){return this.rgb().formatRgb()}function Yt$1(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ut$1.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Gt$1(e):3===n?new Qt$1(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Vt$1(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Vt$1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=jt$1.exec(t))?new Qt$1(e[1],e[2],e[3],1):(e=It$1.exec(t))?new Qt$1(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=qt$1.exec(t))?Vt$1(e[1],e[2],e[3],e[4]):(e=Dt$1.exec(t))?Vt$1(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Bt$1.exec(t))?re$1(e[1],e[2]/100,e[3]/100,1):(e=Zt$1.exec(t))?re$1(e[1],e[2]/100,e[3]/100,e[4]):zt$1.hasOwnProperty(t)?Gt$1(zt$1[t]):"transparent"===t?new Qt$1(NaN,NaN,NaN,0):null}function Gt$1(t){return new Qt$1(t>>16&255,t>>8&255,255&t,1)}function Vt$1(t,e,n,i){return i<=0&&(t=e=n=NaN),new Qt$1(t,e,n,i)}function Kt$1(t,e,n,i){return 1===arguments.length?function(t){return t instanceof Ot$1||(t=Yt$1(t)),t?new Qt$1((t=t.rgb()).r,t.g,t.b,t.opacity):new Qt$1}(t):new Qt$1(t,e,n,i??1)}function Qt$1(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i;}function Jt$1(){return `#${ie$1(this.r)}${ie$1(this.g)}${ie$1(this.b)}`}function te$1(){const t=ee$1(this.opacity);return `${1===t?"rgb(":"rgba("}${ne$1(this.r)}, ${ne$1(this.g)}, ${ne$1(this.b)}${1===t?")":`, ${t})`}`}function ee$1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ne$1(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ie$1(t){return ((t=ne$1(t))<16?"0":"")+t.toString(16)}function re$1(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new se$1(t,e,n,i)}function oe$1(t){if(t instanceof se$1)return new se$1(t.h,t.s,t.l,t.opacity);if(t instanceof Ot$1||(t=Yt$1(t)),!t)return new se$1;if(t instanceof se$1)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=e===o?(n-i)/a+6*(n<i):n===o?(i-e)/a+2:(e-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new se$1(s,a,l,t.opacity)}function se$1(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i;}function ae$1(t){return (t=(t||0)%360)<0?t+360:t}function le$1(t){return Math.max(0,Math.min(1,t||0))}function he$1(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Pt$1(Ot$1,Yt$1,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Wt$1,formatHex:Wt$1,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return oe$1(this).formatHsl()},formatRgb:Xt$1,toString:Xt$1}),Pt$1(Qt$1,Kt$1,Lt$1(Ot$1,{brighter(t){return t=null==t?Tt$1:Math.pow(Tt$1,t),new Qt$1(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?kt$1:Math.pow(kt$1,t),new Qt$1(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qt$1(ne$1(this.r),ne$1(this.g),ne$1(this.b),ee$1(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jt$1,formatHex:Jt$1,formatHex8:function(){return `#${ie$1(this.r)}${ie$1(this.g)}${ie$1(this.b)}${ie$1(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:te$1,toString:te$1})),Pt$1(se$1,(function(t,e,n,i){return 1===arguments.length?oe$1(t):new se$1(t,e,n,i??1)}),Lt$1(Ot$1,{brighter(t){return t=null==t?Tt$1:Math.pow(Tt$1,t),new se$1(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?kt$1:Math.pow(kt$1,t),new se$1(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Qt$1(he$1(t>=240?t-240:t+120,r,i),he$1(t,r,i),he$1(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new se$1(ae$1(this.h),le$1(this.s),le$1(this.l),ee$1(this.opacity))},displayable(){return (0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ee$1(this.opacity);return `${1===t?"hsl(":"hsla("}${ae$1(this.h)}, ${100*le$1(this.s)}%, ${100*le$1(this.l)}%${1===t?")":`, ${t})`}`}}));var ue$1=t=>()=>t;function ce$1(t){return 1==(t=+t)?fe$1:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):ue$1(isNaN(e)?n:e)}}function fe$1(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):ue$1(isNaN(t)?e:t)}var pe$1=function t(e){var n=ce$1(e);function i(t,e){var i=n((t=Kt$1(t)).r,(e=Kt$1(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),s=fe$1(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function de$1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ge$1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,me$1=new RegExp(ge$1.source,"g");function ve$1(t,e){var n,i,r,o=ge$1.lastIndex=me$1.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=ge$1.exec(t))&&(i=me$1.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:de$1(n,i)})),o=me$1.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)a[(n=l[i]).i]=n.x(t);return a.join("")})}var ye$1,_e$1=180/Math.PI,$e$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function be$1(t,e,n,i,r,o){var s,a,l;return (s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*_e$1,skewX:Math.atan(l)*_e$1,scaleX:s,scaleY:a}}function we$1(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],l=[];return o=t(o),s=t(s),function(t,i,r,o,s,a){if(t!==r||i!==o){var l=s.push("translate(",null,e,null,n);a.push({i:l-4,x:de$1(t,r)},{i:l-2,x:de$1(i,o)});}else (r||o)&&s.push("translate("+r+e+o+n);}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:de$1(t,e)})):e&&n.push(r(n)+"rotate("+e+i);}(o.rotate,s.rotate,a,l),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:de$1(t,e)}):e&&n.push(r(n)+"skewX("+e+i);}(o.skewX,s.skewX,a,l),function(t,e,n,i,o,s){if(t!==n||e!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:de$1(t,n)},{i:a-2,x:de$1(e,i)});}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")");}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(t){for(var e,n=-1,i=l.length;++n<i;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var Ae$1,xe$1,Se$1=we$1((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?$e$1:be$1(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Ee$1=we$1((function(t){return null==t?$e$1:(ye$1||(ye$1=document.createElementNS("http://www.w3.org/2000/svg","g")),ye$1.setAttribute("transform",t),(t=ye$1.transform.baseVal.consolidate())?be$1((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):$e$1)}),", ",")",")"),Ce$1=0,Ne$1=0,Me$1=0,Pe$1=0,Le$1=0,Oe$1=0,ke$1="object"==typeof performance&&performance.now?performance:Date,Te$1="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17);};function He$1(){return Le$1||(Te$1(Fe$1),Le$1=ke$1.now()+Oe$1)}function Fe$1(){Le$1=0;}function Re$1(){this._call=this._time=this._next=null;}function Ue$1(t,e,n){var i=new Re$1;return i.restart(t,e,n),i}function je$1(){Le$1=(Pe$1=ke$1.now())+Oe$1,Ce$1=Ne$1=0;try{!function(){He$1(),++Ce$1;for(var t,e=Ae$1;e;)(t=Le$1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ce$1;}();}finally{Ce$1=0,function(){var t,e,n=Ae$1,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ae$1=e);xe$1=t,qe$1(i);}(),Le$1=0;}}function Ie$1(){var t=ke$1.now(),e=t-Pe$1;e>1e3&&(Oe$1-=e,Pe$1=t);}function qe$1(t){Ce$1||(Ne$1&&(Ne$1=clearTimeout(Ne$1)),t-Le$1>24?(t<1/0&&(Ne$1=setTimeout(je$1,t-ke$1.now()-Oe$1)),Me$1&&(Me$1=clearInterval(Me$1))):(Me$1||(Pe$1=ke$1.now(),Me$1=setInterval(Ie$1,1e3)),Ce$1=1,Te$1(je$1)));}function De$1(t,e,n){var i=new Re$1;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e);}),e,n),i}Re$1.prototype=Ue$1.prototype={constructor:Re$1,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?He$1():+n)+(null==e?0:+e),this._next||xe$1===this||(xe$1?xe$1._next=this:Ae$1=this,xe$1=this),this._call=t,this._time=n,qe$1();},stop:function(){this._call&&(this._call=null,this._time=1/0,qe$1());}};var Be$1=d$1("start","end","cancel","interrupt"),Ze$1=[];function ze$1(t,e,n,i,r,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay);}function s(o){var h,u,c,f;if(1!==n.state)return l();for(h in r)if((f=r[h]).name===n.name){if(3===f.state)return De$1(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[h]):+h<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[h]);}if(De$1((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o));})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(c=n.tween.length),h=0,u=-1;h<c;++h)(f=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1;}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,s=i.length;++o<s;)i[o].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l());}function l(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition;}r[e]=n,n.timer=Ue$1(o,0,n.time);}(t,n,{name:e,index:i,group:r,on:Be$1,tween:Ze$1,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0});}function We$1(t,e){var n=Ye$1(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Xe$1(t,e){var n=Ye$1(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Ye$1(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ge$1(t,e){var n,i;return function(){var r=Xe$1(this,t),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}r.tween=i;}}function Ve$1(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Xe$1(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},l=0,h=r.length;l<h;++l)if(r[l].name===e){r[l]=a;break}l===h&&r.push(a);}o.tween=r;}}function Ke$1(t,e,n){var i=t._id;return t.each((function(){var t=Xe$1(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments);})),function(t){return Ye$1(t,i).value[e]}}function Qe$1(t,e){var n;return ("number"==typeof e?de$1:e instanceof Yt$1?pe$1:(n=Yt$1(e))?(e=n,pe$1):ve$1)(t,e)}function Je$1(t){return function(){this.removeAttribute(t);}}function tn$1(t){return function(){this.removeAttributeNS(t.space,t.local);}}function en$1(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===i?r:r=e(i=s,n)}}function nn$1(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===i?r:r=e(i=s,n)}}function rn$1(t,e,n){var i,r,o;return function(){var s,a,l=n(this);if(null!=l)return (s=this.getAttribute(t))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,l));this.removeAttribute(t);}}function on$1(t,e,n){var i,r,o;return function(){var s,a,l=n(this);if(null!=l)return (s=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,l));this.removeAttributeNS(t.space,t.local);}}function sn$1(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n));}}(t,r)),n}return r._value=e,r}function an$1(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n));}}(t,r)),n}return r._value=e,r}function ln$1(t,e){return function(){We$1(this,t).delay=+e.apply(this,arguments);}}function hn$1(t,e){return e=+e,function(){We$1(this,t).delay=e;}}function un$1(t,e){return function(){Xe$1(this,t).duration=+e.apply(this,arguments);}}function cn$1(t,e){return e=+e,function(){Xe$1(this,t).duration=e;}}var fn$1=Mt$1.prototype.constructor;function pn$1(t){return function(){this.style.removeProperty(t);}}var dn$1=0;function gn$1(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i;}function mn$1(){return ++dn$1}var vn$1=Mt$1.prototype;gn$1.prototype={constructor:gn$1,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=S$1(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a,l,h=i[s],u=h.length,c=o[s]=new Array(u),f=0;f<u;++f)(a=h[f])&&(l=t.call(a,a.__data__,f,h))&&("__data__"in a&&(l.__data__=a.__data__),c[f]=l,ze$1(c[f],e,n,f,c,Ye$1(a,n)));return new gn$1(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=C$1(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l,h=i[a],u=h.length,c=0;c<u;++c)if(l=h[c]){for(var f,p=t.call(l,l.__data__,c,h),d=Ye$1(l,n),g=0,m=p.length;g<m;++g)(f=p[g])&&ze$1(f,e,n,g,p,d);o.push(p),s.push(l);}return new gn$1(o,s,e,n)},selectChild:vn$1.selectChild,selectChildren:vn$1.selectChildren,filter:function(t){"function"!=typeof t&&(t=M$1(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,l=i[r]=[],h=0;h<a;++h)(o=s[h])&&t.call(o,o.__data__,h,s)&&l.push(o);return new gn$1(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l,h=e[a],u=n[a],c=h.length,f=s[a]=new Array(c),p=0;p<c;++p)(l=h[p]||u[p])&&(f[p]=l);for(;a<i;++a)s[a]=e[a];return new gn$1(s,this._parents,this._name,this._id)},selection:function(){return new fn$1(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=mn$1(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,h=0;h<l;++h)if(s=a[h]){var u=Ye$1(s,e);ze$1(s,t,n,h,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease});}return new gn$1(i,this._parents,t,n)},call:vn$1.call,nodes:vn$1.nodes,node:vn$1.node,size:vn$1.size,empty:vn$1.empty,each:vn$1.each,on:function(t,e){var n=this._id;return arguments.length<2?Ye$1(this.node(),n).on.on(t):this.each(function(t,e,n){var i,r,o=function(t){return (t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?We$1:Xe$1;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r;}}(n,t,e))},attr:function(t,e){var n=$$1(t),i="transform"===n?Ee$1:Qe$1;return this.attrTween(t,"function"==typeof e?(n.local?on$1:rn$1)(n,i,Ke$1(this,"attr."+t,e)):null==e?(n.local?tn$1:Je$1)(n):(n.local?nn$1:en$1)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return (n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=$$1(t);return this.tween(n,(i.local?sn$1:an$1)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Se$1:Qe$1;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=Q$1(this,t),s=(this.style.removeProperty(t),Q$1(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}(t,i)).on("end.style."+t,pn$1(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,o;return function(){var s=Q$1(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=Q$1(this,t)),s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a))}}(t,i,Ke$1(this,"style."+t,e))).each(function(t,e){var n,i,r,o,s="style."+e,a="end."+s;return function(){var l=Xe$1(this,t),h=l.on,u=null==l.value[s]?o||(o=pn$1(e)):void 0;h===n&&r===u||(i=(n=h).copy()).on(a,r=u),l.on=i;}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,o=n+"";return function(){var s=Q$1(this,t);return s===o?null:s===i?r:r=e(i=s,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return (i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&function(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n);}}(t,o,n)),i}return o._value=e,o}(t,e,n??""))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=e??"";}}(Ke$1(this,"text",t)):function(t){return function(){this.textContent=t;}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return (e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){return function(e){this.textContent=t.call(this,e);}}(i)),e}return i._value=t,i}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this);}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Ye$1(this.node(),n).tween,o=0,s=r.length;o<s;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?Ge$1:Ve$1)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ln$1:hn$1)(e,t)):Ye$1(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?un$1:cn$1)(e,t)):Ye$1(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Xe$1(this,t).ease=e;}}(e,t)):Ye$1(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Xe$1(this,t).ease=n;}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(o,s){var a={value:s},l={value:function(){0==--r&&o();}};n.each((function(){var n=Xe$1(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e;})),0===r&&o();}))},[Symbol.iterator]:vn$1[Symbol.iterator]};var yn$1={time:null,delay:0,duration:250,ease:function(t){return ((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function _n$1(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function $n$1(t,e,n){this.k=t,this.x=e,this.y=n;}Mt$1.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,r,o=t.__transition,s=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete t.__transition;}}(this,t);}))},Mt$1.prototype.transition=function(t){var e,n;t instanceof gn$1?(e=t._id,t=t._name):(e=mn$1(),(n=yn$1).time=He$1(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,h=0;h<l;++h)(s=a[h])&&ze$1(s,t,e,h,a,n||_n$1(s,e));return new gn$1(i,this._parents,t,e)},$n$1.prototype={constructor:$n$1,scale:function(t){return 1===t?this:new $n$1(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new $n$1(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return [t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return [(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return (t-this.x)/this.k},invertY:function(t){return (t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return "translate("+this.x+","+this.y+") scale("+this.k+")"}},$n$1.prototype;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const bn$1=globalThis,wn$1=bn$1.ShadowRoot&&(void 0===bn$1.ShadyCSS||bn$1.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,An$1=Symbol(),xn$1=new WeakMap;let Sn$1=class Sn{constructor(t,e,n){if(this._$cssResult$=!0,n!==An$1)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e;}get styleSheet(){let t=this.o;const e=this.t;if(wn$1&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=xn$1.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&xn$1.set(e,t));}return t}toString(){return this.cssText}};const En$1=wn$1?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return (t=>new Sn$1("string"==typeof t?t:t+"",void 0,An$1))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:Cn$1,defineProperty:Nn$1,getOwnPropertyDescriptor:Mn$1,getOwnPropertyNames:Pn$1,getOwnPropertySymbols:Ln$1,getPrototypeOf:On$1}=Object,kn$1=globalThis,Tn$1=kn$1.trustedTypes,Hn$1=Tn$1?Tn$1.emptyScript:"",Fn$1=kn$1.reactiveElementPolyfillSupport,Rn$1=(t,e)=>t,Un$1={toAttribute(t,e){switch(e){case Boolean:t=t?Hn$1:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t);}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t);}catch(t){n=null;}}return n}},jn$1=(t,e)=>!Cn$1(t,e),In$1={attribute:!0,type:String,converter:Un$1,reflect:!1,hasChanged:jn$1};Symbol.metadata??=Symbol("metadata"),kn$1.litPropertyMetadata??=new WeakMap;let qn$1 = class qn extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t);}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=In$1){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(t,n,e);void 0!==i&&Nn$1(this.prototype,t,i);}}static getPropertyDescriptor(t,e,n){const{get:i,set:r}=Mn$1(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t;}};return {get(){return i?.call(this)},set(e){const o=i?.call(this);r.call(this,e),this.requestUpdate(t,o,n);},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??In$1}static _$Ei(){if(this.hasOwnProperty(Rn$1("elementProperties")))return;const t=On$1(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties);}static finalize(){if(this.hasOwnProperty(Rn$1("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Rn$1("properties"))){const t=this.properties,e=[...Pn$1(t),...Ln$1(t)];for(const n of e)this.createProperty(n,t[n]);}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n);}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t);}this.elementStyles=this.finalizeStyles(this.styles);}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(En$1(t));}else void 0!==t&&e.push(En$1(t));return e}static _$Eu(t,e){const n=e.attribute;return !1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev();}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)));}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.();}removeController(t){this._$EO?.delete(t);}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t);}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return ((t,e)=>{if(wn$1)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of e){const e=document.createElement("style"),i=bn$1.litNonce;void 0!==i&&e.setAttribute("nonce",i),e.textContent=n.cssText,t.appendChild(e);}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()));}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()));}attributeChangedCallback(t,e,n){this._$AK(t,n);}_$EC(t,e){const n=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,n);if(void 0!==i&&!0===n.reflect){const r=(void 0!==n.converter?.toAttribute?n.converter:Un$1).toAttribute(e,n.type);this._$Em=t,null==r?this.removeAttribute(i):this.setAttribute(i,r),this._$Em=null;}}_$AK(t,e){const n=this.constructor,i=n._$Eh.get(t);if(void 0!==i&&this._$Em!==i){const t=n.getPropertyOptions(i),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:Un$1;this._$Em=i,this[i]=r.fromAttribute(e,t.type),this._$Em=null;}}requestUpdate(t,e,n){if(void 0!==t){if(n??=this.constructor.getPropertyOptions(t),!(n.hasChanged??jn$1)(this[t],e))return;this.P(t,e,n);}!1===this.isUpdatePending&&(this._$ES=this._$ET());}P(t,e,n){this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t);}async _$ET(){this.isUpdatePending=!0;try{await this._$ES;}catch(t){Promise.reject(t);}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0;}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t)!0!==n.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],n);}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU();}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e);}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t);}_$EU(){this._$AL=new Map,this.isUpdatePending=!1;}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return !0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU();}updated(t){}firstUpdated(t){}};qn$1.elementStyles=[],qn$1.shadowRootOptions={mode:"open"},qn$1[Rn$1("elementProperties")]=new Map,qn$1[Rn$1("finalized")]=new Map,Fn$1?.({ReactiveElement:qn$1}),(kn$1.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Dn$1=globalThis,Bn$1=Dn$1.trustedTypes,Zn$1=Bn$1?Bn$1.createPolicy("lit-html",{createHTML:t=>t}):void 0,zn$1="$lit$",Wn$1=`lit$${Math.random().toFixed(9).slice(2)}$`,Xn$1="?"+Wn$1,Yn$1=`<${Xn$1}>`,Gn$1=document,Vn$1=()=>Gn$1.createComment(""),Kn$1=t=>null===t||"object"!=typeof t&&"function"!=typeof t,Qn$1=Array.isArray,Jn$1="[ \t\n\f\r]",ti=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ei=/-->/g,ni=/>/g,ii=RegExp(`>|${Jn$1}(?:([^\\s"'>=/]+)(${Jn$1}*=${Jn$1}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),ri=/'/g,oi=/"/g,si=/^(?:script|style|textarea|title)$/i,ai=(t=>(e,...n)=>({_$litType$:t,strings:e,values:n}))(1),li=Symbol.for("lit-noChange"),hi=Symbol.for("lit-nothing"),ui=new WeakMap,ci=Gn$1.createTreeWalker(Gn$1,129);function fi(t,e){if(!Qn$1(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==Zn$1?Zn$1.createHTML(e):e}const pi=(t,e)=>{const n=t.length-1,i=[];let r,o=2===e?"<svg>":3===e?"<math>":"",s=ti;for(let e=0;e<n;e++){const n=t[e];let a,l,h=-1,u=0;for(;u<n.length&&(s.lastIndex=u,l=s.exec(n),null!==l);)u=s.lastIndex,s===ti?"!--"===l[1]?s=ei:void 0!==l[1]?s=ni:void 0!==l[2]?(si.test(l[2])&&(r=RegExp("</"+l[2],"g")),s=ii):void 0!==l[3]&&(s=ii):s===ii?">"===l[0]?(s=r??ti,h=-1):void 0===l[1]?h=-2:(h=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?ii:'"'===l[3]?oi:ri):s===oi||s===ri?s=ii:s===ei||s===ni?s=ti:(s=ii,r=void 0);const c=s===ii&&t[e+1].startsWith("/>")?" ":"";o+=s===ti?n+Yn$1:h>=0?(i.push(a),n.slice(0,h)+zn$1+n.slice(h)+Wn$1+c):n+Wn$1+(-2===h?e:c);}return [fi(t,o+(t[n]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),i]};class di{constructor({strings:t,_$litType$:e},n){let i;this.parts=[];let r=0,o=0;const s=t.length-1,a=this.parts,[l,h]=pi(t,e);if(this.el=di.createElement(l,n),ci.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes);}for(;null!==(i=ci.nextNode())&&a.length<s;){if(1===i.nodeType){if(i.hasAttributes())for(const t of i.getAttributeNames())if(t.endsWith(zn$1)){const e=h[o++],n=i.getAttribute(t).split(Wn$1),s=/([.?@])?(.*)/.exec(e);a.push({type:1,index:r,name:s[2],strings:n,ctor:"."===s[1]?_i:"?"===s[1]?$i:"@"===s[1]?bi:yi}),i.removeAttribute(t);}else t.startsWith(Wn$1)&&(a.push({type:6,index:r}),i.removeAttribute(t));if(si.test(i.tagName)){const t=i.textContent.split(Wn$1),e=t.length-1;if(e>0){i.textContent=Bn$1?Bn$1.emptyScript:"";for(let n=0;n<e;n++)i.append(t[n],Vn$1()),ci.nextNode(),a.push({type:2,index:++r});i.append(t[e],Vn$1());}}}else if(8===i.nodeType)if(i.data===Xn$1)a.push({type:2,index:r});else {let t=-1;for(;-1!==(t=i.data.indexOf(Wn$1,t+1));)a.push({type:7,index:r}),t+=Wn$1.length-1;}r++;}}static createElement(t,e){const n=Gn$1.createElement("template");return n.innerHTML=t,n}}function gi(t,e,n=t,i){if(e===li)return e;let r=void 0!==i?n._$Co?.[i]:n._$Cl;const o=Kn$1(e)?void 0:e._$litDirective$;return r?.constructor!==o&&(r?._$AO?.(!1),void 0===o?r=void 0:(r=new o(t),r._$AT(t,n,i)),void 0!==i?(n._$Co??=[])[i]=r:n._$Cl=r),void 0!==r&&(e=gi(t,r._$AS(t,e.values),r,i)),e}class mi{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e;}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,i=(t?.creationScope??Gn$1).importNode(e,!0);ci.currentNode=i;let r=ci.nextNode(),o=0,s=0,a=n[0];for(;void 0!==a;){if(o===a.index){let e;2===a.type?e=new vi(r,r.nextSibling,this,t):1===a.type?e=new a.ctor(r,a.name,a.strings,this,t):6===a.type&&(e=new wi(r,this,t)),this._$AV.push(e),a=n[++s];}o!==a?.index&&(r=ci.nextNode(),o++);}return ci.currentNode=Gn$1,i}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++;}}class vi{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,i){this.type=2,this._$AH=hi,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0;}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=gi(this,t,e),Kn$1(t)?t===hi||null==t||""===t?(this._$AH!==hi&&this._$AR(),this._$AH=hi):t!==this._$AH&&t!==li&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>Qn$1(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t);}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t));}_(t){this._$AH!==hi&&Kn$1(this._$AH)?this._$AA.nextSibling.data=t:this.T(Gn$1.createTextNode(t)),this._$AH=t;}$(t){const{values:e,_$litType$:n}=t,i="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=di.createElement(fi(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(e);else {const t=new mi(i,this),n=t.u(this.options);t.p(e),this.T(n),this._$AH=t;}}_$AC(t){let e=ui.get(t.strings);return void 0===e&&ui.set(t.strings,e=new di(t)),e}k(t){Qn$1(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,i=0;for(const r of t)i===e.length?e.push(n=new vi(this.O(Vn$1()),this.O(Vn$1()),this,this.options)):n=e[i],n._$AI(r),i++;i<e.length&&(this._$AR(n&&n._$AB.nextSibling,i),e.length=i);}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e;}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t));}}class yi{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,i,r){this.type=1,this._$AH=hi,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=hi;}_$AI(t,e=this,n,i){const r=this.strings;let o=!1;if(void 0===r)t=gi(this,t,e,0),o=!Kn$1(t)||t!==this._$AH&&t!==li,o&&(this._$AH=t);else {const i=t;let s,a;for(t=r[0],s=0;s<r.length-1;s++)a=gi(this,i[n+s],e,s),a===li&&(a=this._$AH[s]),o||=!Kn$1(a)||a!==this._$AH[s],a===hi?t=hi:t!==hi&&(t+=(a??"")+r[s+1]),this._$AH[s]=a;}o&&!i&&this.j(t);}j(t){t===hi?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"");}}class _i extends yi{constructor(){super(...arguments),this.type=3;}j(t){this.element[this.name]=t===hi?void 0:t;}}class $i extends yi{constructor(){super(...arguments),this.type=4;}j(t){this.element.toggleAttribute(this.name,!!t&&t!==hi);}}class bi extends yi{constructor(t,e,n,i,r){super(t,e,n,i,r),this.type=5;}_$AI(t,e=this){if((t=gi(this,t,e,0)??hi)===li)return;const n=this._$AH,i=t===hi&&n!==hi||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,r=t!==hi&&(n===hi||i);i&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,t),this._$AH=t;}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t);}}class wi{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n;}get _$AU(){return this._$AM._$AU}_$AI(t){gi(this,t);}}const Ai=Dn$1.litHtmlPolyfillSupport;Ai?.(di,vi),(Dn$1.litHtmlVersions??=[]).push("3.2.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let xi=class extends qn$1{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0;}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{const i=n?.renderBefore??e;let r=i._$litPart$;if(void 0===r){const t=n?.renderBefore??null;i._$litPart$=r=new vi(e.insertBefore(Vn$1(),t),t,void 0,n??{});}return r._$AI(t),r})(e,this.renderRoot,this.renderOptions);}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0);}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1);}render(){return li}};xi._$litElement$=!0,xi.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:xi});const Si=globalThis.litElementPolyfillSupport;Si?.({LitElement:xi}),(globalThis.litElementVersions??=[]).push("4.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Ei={attribute:!0,type:String,converter:Un$1,reflect:!1,hasChanged:jn$1},Ci=(t=Ei,e,n)=>{const{kind:i,metadata:r}=n;let o=globalThis.litPropertyMetadata.get(r);if(void 0===o&&globalThis.litPropertyMetadata.set(r,o=new Map),o.set(n.name,t),"accessor"===i){const{name:i}=n;return {set(n){const r=e.get.call(this);e.set.call(this,n),this.requestUpdate(i,r,t);},init(e){return void 0!==e&&this.P(i,void 0,t),e}}}if("setter"===i){const{name:i}=n;return function(n){const r=this[i];e.call(this,n),this.requestUpdate(i,r,t);}}throw Error("Unsupported decorator location: "+i)};function Ni(t){return (e,n)=>"object"==typeof n?Ci(t,e,n):((t,e,n)=>{const i=e.hasOwnProperty(n);return e.constructor.createProperty(n,i?{...t,wrapped:!0}:t),i?Object.getOwnPropertyDescriptor(e,n):void 0})(t,e,n)}var Mi,Pi,Li,Oi,ki,Ti,Hi;const Fi=10;class Ri{constructor(){Mi.add(this),Pi.set(this,1),Li.set(this,1),Oi.set(this,1);}shape2function(t){switch(t){case"rectangle":default:return ()=>this.rectangle();case"roundRectangle":return ()=>this.roundRectangle();case"line":return ()=>this.line();case"bridge":return ()=>this.bridge();case"diamond":return ()=>this.diamond();case"chevron":return ()=>this.chevron();case"catFace":return ()=>this.catFace();case"triangle":return ()=>this.triangle();case"wave":return ()=>this.wave();case"hexagon":return ()=>this.hexagon();case"pentagon":return ()=>this.pentagon();case"circle":return ()=>this.circle();case"arrow":return ()=>this.arrow();case"doubleBar":return ()=>this.doubleBar();case"discontinuosStart":return ()=>this.discontinuousStart();case"discontinuos":return ()=>this.discontinuous();case"discontinuosEnd":return ()=>this.discontinuousEnd();case"helix":return ()=>this.helix();case"strand":return ()=>this.strand();case"leftEndedTag":return ()=>this.tag({left:!0});case"rightEndedTag":return ()=>this.tag({right:!0});case"doubleEndedTag":return ()=>this.tag({left:!0,right:!0})}}getFeatureShape(t,e,n,i){i=i||"rectangle",f$1(this,Pi,n,"f"),f$1(this,Li,e,"f"),f$1(this,Oi,t*n,"f");return this.shape2function(i)()}static isContinuous(t){return "bridge"!==t.toLowerCase()}rectangle(){return `M0,0L${c$1(this,Oi,"f")},0L${c$1(this,Oi,"f")},${c$1(this,Li,"f")}L0,${c$1(this,Li,"f")}Z`}roundRectangle(){return `M6,0h${c$1(this,Oi,"f")-12},0a6,6 0 0 1 6,6v${c$1(this,Li,"f")-12}a6,6 0 0 1 -6,6h${12-c$1(this,Oi,"f")}a6,6 0 0 1 -6,-6v${12-c$1(this,Li,"f")}a6,6 0 0 1 6,-6Z`}line(){return `M0,${c$1(this,Li,"f")/2} L${c$1(this,Oi,"f")},${c$1(this,Li,"f")/2}`}bridge(){return 1!==c$1(this,Pi,"f")?`M0,${c$1(this,Li,"f")}L0,0L${c$1(this,Oi,"f")},0L${c$1(this,Oi,"f")},${c$1(this,Li,"f")}L${c$1(this,Oi,"f")},2L0,2Z`:`M0,${c$1(this,Li,"f")}L0,${c$1(this,Li,"f")/2}L${c$1(this,Oi,"f")/2},${c$1(this,Li,"f")/2}L${c$1(this,Oi,"f")/2},0L${c$1(this,Oi,"f")/2},${c$1(this,Li,"f")/2}L${c$1(this,Oi,"f")},${c$1(this,Li,"f")/2}L${c$1(this,Oi,"f")},${c$1(this,Li,"f")}Z`}diamond(){const t=c$1(this,Oi,"f")/2,e=`M${t},0L${t+5},5L${t},10L${t-5},5`;return 1!==c$1(this,Pi,"f")?e+c$1(this,Mi,"m",ki).call(this,5):`${e}Z`}chevron(){const t=c$1(this,Oi,"f")/2,e=`M${t},5L${5+t},0L${5+t},5L${t},10L${-5+t},5L${-5+t},0`;return 1!==c$1(this,Pi,"f")?`${e}L${t},5${c$1(this,Mi,"m",ki).call(this,5)}Z`:e+"Z"}catFace(){const t=c$1(this,Oi,"f")/2,e=`M${-5+t},0L${-5+t},6L${-2+t},10L${2+t},10L${5+t},6L${5+t},0L${2+t},4L${-2+t},4`;return 1!==c$1(this,Pi,"f")?`${e}M${t},0${c$1(this,Mi,"m",ki).call(this,5)}Z`:`${e}Z`}triangle(){const t=c$1(this,Oi,"f")/2,e=`M${t},0L${5+t},10L${-5+t},10`;return 1!==c$1(this,Pi,"f")?`${e}L${t},0${c$1(this,Mi,"m",ki).call(this,5)}Z`:`${e}Z`}wave(){const t=c$1(this,Oi,"f")/2,e=`M${-5+t},5A2.5,5 0 1,1 ${t},5A2.5,5 0 1,0 ${5+t},5`;return 1!==c$1(this,Pi,"f")?`${e+c$1(this,Mi,"m",ki).call(this,5)}Z`:`${e}Z`}getPolygon(t){let e="M ";const n=c$1(this,Oi,"f")/2;for(let i=0;i<t;i++)e+=`${5*Math.cos(2*Math.PI*i/t)+n},${5*Math.sin(2*Math.PI*i/t)+5} `;return 1!==c$1(this,Pi,"f")?`${e} ${5*Math.cos(0)+n},${5*Math.sin(0)+5} ${c$1(this,Mi,"m",ki).call(this,5)}Z`:`${e}Z`}hexagon(){return this.getPolygon(6)}pentagon(){return this.getPolygon(5)}circle(){const t=c$1(this,Oi,"f")/2,e=Math.sqrt(Fi/Math.PI),n=`M${t},0A${e},${e} 0 1,1 ${t},10A${e},${e} 0 1,1 ${t},0`;return 1!==c$1(this,Pi,"f")?`${n+c$1(this,Mi,"m",ki).call(this,5)}Z`:`${n}Z`}arrow(){const t=c$1(this,Oi,"f")/2,e=`M${t},0L${-1+t},0L${-5+t},4L${-1+t},${c$1(this,Li,"f")}L${t},${c$1(this,Li,"f")}L${4+t},4`;return 1!==c$1(this,Pi,"f")?`${e}L${t},0${c$1(this,Mi,"m",ki).call(this,5)}Z`:`${e}Z`}doubleBar(){const t=c$1(this,Oi,"f")/2,e=`M${t},0L${-5+t},10L${t},10L${5+t},0`;return 1!==c$1(this,Pi,"f")?`${e}L${t},0${c$1(this,Mi,"m",ki).call(this,5)}Z`:`${e}Z`}discontinuousStart(){return `M0,0L${c$1(this,Oi,"f")},0L${c$1(this,Oi,"f")},${c$1(this,Li,"f")}L0,${c$1(this,Li,"f")}${c$1(this,Mi,"m",Hi).call(this)}Z`}discontinuous(){return `M0,0L${c$1(this,Oi,"f")},0${c$1(this,Mi,"m",Ti).call(this)}L0,${c$1(this,Li,"f")}${c$1(this,Mi,"m",Hi).call(this)}Z`}discontinuousEnd(){return `M0,0L${c$1(this,Oi,"f")},0${c$1(this,Mi,"m",Ti).call(this)}L0,${c$1(this,Li,"f")}Z`}helix(){const t=2.5;let e=2.5;const n=Math.round(c$1(this,Oi,"f")/5);let i="";for(let r=0;r<n;r++){i+=`M${-2.5+e},${c$1(this,Li,"f")} C${e+t},7.5 ${2.5+e},2.5 ${e}, 0 C${e-t},2.5 ${e},7.5 ${2.5+e},${c$1(this,Li,"f")}`,e+=5;}return i}strand(){let t=0;c$1(this,Oi,"f")>5&&(t=c$1(this,Oi,"f")-5);const e=c$1(this,Li,"f")/4;return `M0,${e}L${t},${e}L${t},${3*e}L0,${3*e}L0,${e}`+`M${t},0L${c$1(this,Oi,"f")},${2*e}L${t},${c$1(this,Li,"f")}Z`}tag(t={}){const e=c$1(this,Li,"f"),n=c$1(this,Oi,"f"),i=e/Math.sqrt(2);let r="M0,"+e/2;return t.left?r+=` L${i},0`:r+=" L0,0",t.right?r+=` L${n-i},0`:r+=` L${n},0`,t.right?r+=` L${n},${e/2} L${n-i},${e}`:r+=` L${n},${e}`,t.left?r+=` L${i},${e}`:r+=` L0,${e}`,r+" Z"}}Pi=new WeakMap,Li=new WeakMap,Oi=new WeakMap,Mi=new WeakSet,ki=function(t){return `M0,${t}L${c$1(this,Oi,"f")},${t}Z`},Ti=function(){const t=c$1(this,Li,"f")/4;return `L${c$1(this,Oi,"f")-t},${t}L${c$1(this,Oi,"f")},${2*t}L${c$1(this,Oi,"f")-t},${3*t}L${c$1(this,Oi,"f")},${c$1(this,Li,"f")}`},Hi=function(){const t=c$1(this,Li,"f")/4;return `L${t},${3*t}L0,${2*t}L${t},${t}`};var Ui="object"==typeof global&&global&&global.Object===Object&&global,ji="object"==typeof self&&self&&self.Object===Object&&self,Ii=(Ui||ji||Function("return this")()).Symbol,qi=Object.prototype,Di=qi.hasOwnProperty,Bi=qi.toString,Zi=Ii?Ii.toStringTag:void 0;var zi=Object.prototype.toString;var Wi=Ii?Ii.toStringTag:void 0;function Xi(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Wi&&Wi in Object(t)?function(t){var e=Di.call(t,Zi),n=t[Zi];try{t[Zi]=void 0;var i=!0;}catch(t){}var r=Bi.call(t);return i&&(e?t[Zi]=n:delete t[Zi]),r}(t):function(t){return zi.call(t)}(t)}function Yi(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Gi=/^\s+|\s+$/g,Vi=/^[-+]0x[0-9a-f]+$/i,Ki=/^0b[01]+$/i,Qi=/^0o[0-7]+$/i,Ji=parseInt;function tr$1(t){if("number"==typeof t)return t;if(function(t){return "symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==Xi(t)}(t))return NaN;if(Yi(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Yi(e)?e+"":e;}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Gi,"");var n=Ki.test(t);return n||Qi.test(t)?Ji(t.slice(2),n?2:8):Vi.test(t)?NaN:+t}function er$1(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=tr$1(n))==n?n:0),void 0!==e&&(e=(e=tr$1(e))==e?e:0),function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}(tr$1(t),e,n)}let nr$1 = class nr{constructor({layoutHeight:t,margin:e={top:1,bottom:1,left:0,right:0},minHeight:n=.1,maxHeight:i=1/0,gap:r=2}){this.margin=e,this.minHeight=n,this.maxHeight=i,this.gap=r,this.layoutHeight=t,this.features=[];}init(t,...e){this.features=t;}getFeatureYPos(t){return .5*(this.margin.top+this.layoutHeight-this.margin.bottom)-.5*this.getFeatureHeight()}getFeatureHeight(...t){return er$1(this.layoutHeight-this.margin.top-this.margin.bottom-this.gap,this.minHeight,this.maxHeight)}};let ir$1 = class ir extends nr$1{constructor(t){var e;super({...t,maxHeight:null!==(e=t.maxHeight)&&void 0!==e?e:15}),this.rowHeight=0,this.featureHeight=0,this.topOffset=0,this.featuresMap=new Map;}init(t){const{featuresMap:e,rows:n}=function(t){var e,n,i,r;const o=new Map,s=[],a={};for(const l of t){const t=s.findIndex(((t,e)=>!rr$1(l,a[e])||!or$1(l,t)));if(t>=0){s[t].push(l),o.set(l,t);const i=a[t];a[t]={start:Math.min(i.start,null!==(e=l.start)&&void 0!==e?e:-1/0),end:Math.max(i.end,null!==(n=l.end)&&void 0!==n?n:1/0)};}else s.push([l]),o.set(l,s.length-1),a[s.length-1]={start:null!==(i=l.start)&&void 0!==i?i:-1/0,end:null!==(r=l.end)&&void 0!==r?r:1/0};}return {rows:s,featuresMap:o}}(t);this.featuresMap=e;const i=er$1(this.layoutHeight-this.margin.top-this.margin.bottom,0,n.length*(this.maxHeight+this.gap));this.rowHeight=i/Math.max(n.length,1),this.featureHeight=er$1(this.rowHeight-this.gap,this.minHeight,this.maxHeight);const r=.5*(this.margin.top+this.layoutHeight-this.margin.bottom);this.topOffset=r-.5*i;}getFeatureYPos(t){var e;const n=null!==(e=this.featuresMap.get(t))&&void 0!==e?e:0;return this.topOffset+(n+.5)*this.rowHeight-.5*this.featureHeight}getFeatureHeight(){return this.featureHeight}};function rr$1(t,e){return !(Number(e.start)>Number(t.end)||Number(e.end)<Number(t.start))}function or$1(t,e){return function(t,e){for(let n=t.length-1;n>=0;n--)if(e(t[n],n,t))return !0;return !1}(e,(e=>rr$1(t,e)))}const sr$1={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},RESIDUE:{name:"residue",label:"PTM residue",tooltip:"",shape:"rectangle",color:"#06038D"},EPITOPE:{name:"epitope",label:"Epitopes",tooltip:"",shape:"rectangle",color:"#4ade33"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},ar$1=t=>{if(t.toUpperCase()in sr$1)return sr$1[t.toUpperCase()].shape;const e=Object.values(sr$1).find((e=>e.name.toUpperCase()===t.toUpperCase()));return e?e.shape:"rectangle"},lr$1=t=>{if(t.toUpperCase()in sr$1)return sr$1[t.toUpperCase()].color;const e=Object.values(sr$1).find((e=>e.name.toUpperCase()===t.toUpperCase()));return e||console.log(t),e?e.color:"black"};var hr$1,ur$1,cr$1,fr$1,pr$1;const dr$1=["length","width","height"];let gr$1=pr$1=class extends(tr$5(ar$5(Fi$3(Ki$3(Li$3(k$5(rr$5(ro$1)))))))){constructor(){super(...arguments),hr$1.add(this),this.featureShape=new Ri,ur$1.set(this,[]),cr$1.set(this,[]),this.filters=null;}getLayout(){return "non-overlapping"===String(this.layout).toLowerCase()?new ir$1({layoutHeight:this.height,margin:{top:this["margin-top"],bottom:this["margin-bottom"],left:this["margin-left"],right:this["margin-right"]}}):new nr$1({layoutHeight:this.height,margin:{top:this["margin-top"],bottom:this["margin-bottom"],left:this["margin-left"],right:this["margin-right"]}})}connectedCallback(){super.connectedCallback(),this.layoutObj=this.getLayout(),c$1(this,cr$1,"f")&&this.createTrack();}static normalizeLocations(t){return t.map((t=>{var e,n,i,r;return t.locations?(null!==(e=t.start)&&void 0!==e||(t.start=function(t){let e;for(const n of t)for(const t of n.fragments)(void 0===e||t.start<e)&&(e=t.start);return e}(t.locations)),null!==(n=t.end)&&void 0!==n||(t.end=function(t){let e;for(const n of t)for(const t of n.fragments)(void 0===e||t.end>e)&&(e=t.end);return e}(t.locations))):(null!==(i=t.start)&&void 0!==i||(t.start=1),null!==(r=t.end)&&void 0!==r||(t.end=t.start),t.locations=[{fragments:[{start:t.start,end:t.end}]}]),t}))}processData(t){f$1(this,ur$1,pr$1.normalizeLocations(t),"f");}set data(t){this.processData(t),this.applyFilters(),this.layoutObj=this.getLayout(),this.createTrack();}get data(){return c$1(this,cr$1,"f")}attributeChangedCallback(t,e,n){super.attributeChangedCallback(t,e,n),(dr$1.includes(t)||t.startsWith("margin-"))&&(this.applyFilters(),this.layoutObj=this.getLayout(),this.createTrack());}getFeatureColor(t){var e,n,i;const r="gray";return t.color?t.color||r:(null===(e=null==t?void 0:t.feature)||void 0===e?void 0:e.color)?(null===(n=null==t?void 0:t.feature)||void 0===n?void 0:n.color)||r:this.color?this.color:t.type?lr$1(t.type):(null===(i=null==t?void 0:t.feature)||void 0===i?void 0:i.type)?lr$1(t.feature.type):r}getFeatureFillColor(t){var e;const n="gray";return t.fill?t.fill||n:(null===(e=null==t?void 0:t.feature)||void 0===e?void 0:e.fill)?t.feature.fill||n:this.getFeatureColor(t)}getShape(t){var e,n;const i="rectangle";return t.shape?t.shape||i:(null===(e=null==t?void 0:t.feature)||void 0===e?void 0:e.shape)?t.feature.shape||i:this.shape?this.shape:t.type?ar$1(t.type):(null===(n=t.feature)||void 0===n?void 0:n.type)?ar$1(t.feature.type):i}createTrack(){var t,e;c$1(this,cr$1,"f")&&(null===(t=this.layoutObj)||void 0===t||t.init(c$1(this,cr$1,"f")),null===(e=this.svg)||void 0===e||e.selectAll("g").remove(),this.svg=function(t){return "string"==typeof t?new Nt$1([[document.querySelector(t)]],[document.documentElement]):new Nt$1([[t]],Ct$1)}(this).selectAll("svg").attr("width",this.width).attr("height",this.height),this.svg&&(this.seqG=this.svg.append("g").attr("class","sequence-features"),this.createFeatures(),this.highlighted=this.svg.append("g").attr("class","highlighted"),this.margins=this.svg.append("g").attr("class","margin")));}createFeatures(){var t;if(!this.seqG)return;const e=this.seqG.selectAll("g.feature-group").data(c$1(this,cr$1,"f")).enter().append("g").attr("class","feature-group").attr("id",(t=>`g_${t.accession}`)).selectAll("g.location-group").data((t=>(t.locations||[]).map((e=>Object.assign({},e,{feature:t}))))).enter().append("g").attr("class","location-group"),n=e.selectAll("g.fragment-group").data((t=>t.fragments.map((e=>Object.assign({},e,{feature:t.feature}))))).enter().append("g").attr("class","fragment-group");n.append("path").attr("class",(t=>`${this.getShape(t)} feature`)).attr("d",(t=>{var e;return this.featureShape.getFeatureShape(this.getSingleBaseWidth(),(null===(e=this.layoutObj)||void 0===e?void 0:e.getFeatureHeight())||0,t.end?t.end-t.start+1:1,this.getShape(t))})).attr("transform",(t=>{var e;return `translate(${this.getXFromSeqPosition(t.start)},${(null===(e=this.layoutObj)||void 0===e?void 0:e.getFeatureYPos(t.feature))||0})`})).style("fill",(t=>this.getFeatureFillColor(t))).attr("stroke",(t=>this.getFeatureColor(t))).style("fill-opacity",(({feature:t})=>t.opacity?t.opacity:.9)).style("stroke-opacity",(({feature:t})=>t.opacity?t.opacity:.9));const i=n.selectAll("g.residue-group").data((t=>{var e;return t.feature.residuesToHighlight?[null===(e=t.feature.residuesToHighlight)||void 0===e?void 0:e.map((e=>Object.assign({},e,{feature:t.feature,position:e.position})))]:[]})).enter().append("g").attr("class","residue-group");n.append("rect").attr("class","outer-rectangle feature").attr("width",(t=>Math.max(0,this.getSingleBaseWidth()*(t.end?t.end-t.start+1:1)))).attr("height",(null===(t=this.layoutObj)||void 0===t?void 0:t.getFeatureHeight())||0).attr("transform",(t=>{var e;return `translate(${this.getXFromSeqPosition(t.start)},${(null===(e=this.layoutObj)||void 0===e?void 0:e.getFeatureYPos(t.feature))||0})`})).style("fill","transparent").attr("stroke","transparent").call(cr$5,this),i.selectAll("g.residue").data((t=>t)).enter().append("path").attr("class",(t=>`${this.getShape(t)} residue`)).attr("d",(t=>c$1(this,hr$1,"m",fr$1).call(this,t))).attr("transform",(t=>{var e;return `translate(${this.getXFromSeqPosition(Number(t.feature.start)+Number(t.position)-1)+this.getSingleBaseWidth()/4},\n          ${null===(e=this.layoutObj)||void 0===e?void 0:e.getFeatureYPos(t.feature)})`})).attr("fill",lr$1("RESIDUE")).style("fill-opacity",(({feature:t})=>t.opacity?t.opacity:.9)).style("stroke-opacity",(({feature:t})=>t.opacity?t.opacity:.9)).call(cr$5,this);}applyFilters(){(this.filters||[]).length<=0&&f$1(this,cr$1,c$1(this,ur$1,"f"),"f");}refresh(){var t;if(this.xScale&&this.seqG){const e=this.seqG.selectAll("g.fragment-group").data(c$1(this,cr$1,"f").reduce(((t,e)=>t.concat((e.locations||[]).reduce(((t,n)=>t.concat(n.fragments.map((t=>Object.assign({},t,{feature:e}))))),[]))),[])),n=this.seqG.selectAll("g.residue-group").data(c$1(this,cr$1,"f").reduce(((t,e)=>{var n;return t.concat([null===(n=e.residuesToHighlight)||void 0===n?void 0:n.reduce((t=>t.concat((t=>Object.assign({},t,{feature:e,position:t.position})))),[])])}),[]));e.selectAll("path.feature").attr("d",(t=>{var e;return this.featureShape.getFeatureShape(this.getSingleBaseWidth(),(null===(e=this.layoutObj)||void 0===e?void 0:e.getFeatureHeight())||0,(null==t?void 0:t.end)&&(null==t?void 0:t.start)?t.end-t.start+1:1,this.getShape(t))})).attr("transform",(t=>{var e;return `translate(${this.getXFromSeqPosition(t.start||0)},${null===(e=this.layoutObj)||void 0===e?void 0:e.getFeatureYPos(t.feature)})`})),n.selectAll("path.residue").attr("d",(t=>c$1(this,hr$1,"m",fr$1).call(this,t))).attr("transform",(t=>{var e,n;return `translate(${this.getXFromSeqPosition(Number(null===(e=t.feature)||void 0===e?void 0:e.start)+Number(t.position)-1)+this.getSingleBaseWidth()/4},${null===(n=this.layoutObj)||void 0===n?void 0:n.getFeatureYPos(t.feature)})`})),e.selectAll("rect.outer-rectangle").attr("width",(t=>Math.max(0,this.getSingleBaseWidth()*((null==t?void 0:t.end)&&(null==t?void 0:t.start)?t.end-t.start+1:1)))).attr("height",(null===(t=this.layoutObj)||void 0===t?void 0:t.getFeatureHeight())||0).attr("transform",(t=>{var e;return `translate(${this.getXFromSeqPosition(t.start||0)},${(null===(e=this.layoutObj)||void 0===e?void 0:e.getFeatureYPos(t.feature))||0})`}));}this.updateHighlight(),this.renderMarginOnGroup(this.margins);}updateHighlight(){if(!this.highlighted)return;const t=this.highlighted.selectAll("rect").data(this.highlightedRegion.segments);t.enter().append("rect").style("pointer-events","none").merge(t).attr("fill",this["highlight-color"]).attr("height",this.height).attr("x",(t=>this.getXFromSeqPosition(t.start))).attr("width",(t=>Math.max(0,this.getSingleBaseWidth()*(t.end-t.start+1)))),t.exit().remove();}zoomRefreshed(){super.zoomRefreshed(),this.getWidthWithMargins()>0&&this.refresh();}firstUpdated(){this.createTrack();}render(){return ai`<svg class="container"></svg>`}};ur$1=new WeakMap,cr$1=new WeakMap,hr$1=new WeakSet,fr$1=function(t){var e;let n=1;const i=this.getSingleBaseWidth(),r=6-i;return i<6&&r>n&&(n=r),this.featureShape.getFeatureShape(i/2,(null===(e=this.layoutObj)||void 0===e?void 0:e.getFeatureHeight(t))||0,n,this.getShape(t))},u$1([Ni({type:String})],gr$1.prototype,"color",void 0),u$1([Ni({type:String})],gr$1.prototype,"shape",void 0),u$1([Ni({type:String})],gr$1.prototype,"layout",void 0),gr$1=pr$1=u$1([wr$4("nightingale-track")],gr$1);var mr$1=gr$1;

function e(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function n(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return "m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function r(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return "a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const i=globalThis,o=i.ShadowRoot&&(void 0===i.ShadyCSS||i.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),a=new WeakMap;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let u=class{constructor(t,e,n){if(this._$cssResult$=!0,n!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e;}get styleSheet(){let t=this.o;const e=this.t;if(o&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=a.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&a.set(e,t));}return t}toString(){return this.cssText}};const l=(t,e)=>{if(o)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of e){const e=document.createElement("style"),r=i.litNonce;void 0!==r&&e.setAttribute("nonce",r),e.textContent=n.cssText,t.appendChild(e);}},c=o?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return (t=>new u("string"==typeof t?t:t+"",void 0,s))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:h,defineProperty:f,getOwnPropertyDescriptor:p,getOwnPropertyNames:d,getOwnPropertySymbols:v,getPrototypeOf:g}=Object,y=globalThis,m=y.trustedTypes,w=m?m.emptyScript:"",_=y.reactiveElementPolyfillSupport,b=(t,e)=>t,x={toAttribute(t,e){switch(e){case Boolean:t=t?w:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t);}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t);}catch(t){n=null;}}return n}},E=(t,e)=>!h(t,e),$={attribute:!0,type:String,converter:x,reflect:!1,hasChanged:E};Symbol.metadata??=Symbol("metadata"),y.litPropertyMetadata??=new WeakMap;class S extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t);}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=$){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(t,n,e);void 0!==r&&f(this.prototype,t,r);}}static getPropertyDescriptor(t,e,n){const{get:r,set:i}=p(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t;}};return {get(){return r?.call(this)},set(e){const o=r?.call(this);i.call(this,e),this.requestUpdate(t,o,n);},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??$}static _$Ei(){if(this.hasOwnProperty(b("elementProperties")))return;const t=g(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties);}static finalize(){if(this.hasOwnProperty(b("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(b("properties"))){const t=this.properties,e=[...d(t),...v(t)];for(const n of e)this.createProperty(n,t[n]);}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n);}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t);}this.elementStyles=this.finalizeStyles(this.styles);}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(c(t));}else void 0!==t&&e.push(c(t));return e}static _$Eu(t,e){const n=e.attribute;return !1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev();}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)));}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.();}removeController(t){this._$EO?.delete(t);}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t);}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return l(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()));}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()));}attributeChangedCallback(t,e,n){this._$AK(t,n);}_$EC(t,e){const n=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,n);if(void 0!==r&&!0===n.reflect){const i=(void 0!==n.converter?.toAttribute?n.converter:x).toAttribute(e,n.type);this._$Em=t,null==i?this.removeAttribute(r):this.setAttribute(r,i),this._$Em=null;}}_$AK(t,e){const n=this.constructor,r=n._$Eh.get(t);if(void 0!==r&&this._$Em!==r){const t=n.getPropertyOptions(r),i="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:x;this._$Em=r,this[r]=i.fromAttribute(e,t.type),this._$Em=null;}}requestUpdate(t,e,n){if(void 0!==t){if(n??=this.constructor.getPropertyOptions(t),!(n.hasChanged??E)(this[t],e))return;this.P(t,e,n);}!1===this.isUpdatePending&&(this._$ES=this._$ET());}P(t,e,n){this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t);}async _$ET(){this.isUpdatePending=!0;try{await this._$ES;}catch(t){Promise.reject(t);}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0;}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t)!0!==n.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],n);}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU();}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e);}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t);}_$EU(){this._$AL=new Map,this.isUpdatePending=!1;}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return !0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU();}updated(t){}firstUpdated(t){}}S.elementStyles=[],S.shadowRootOptions={mode:"open"},S[b("elementProperties")]=new Map,S[b("finalized")]=new Map,_?.({ReactiveElement:S}),(y.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const M={attribute:!0,type:String,converter:x,reflect:!1,hasChanged:E},A=(t=M,e,n)=>{const{kind:r,metadata:i}=n;let o=globalThis.litPropertyMetadata.get(i);if(void 0===o&&globalThis.litPropertyMetadata.set(i,o=new Map),o.set(n.name,t),"accessor"===r){const{name:r}=n;return {set(n){const i=e.get.call(this);e.set.call(this,n),this.requestUpdate(r,i,t);},init(e){return void 0!==e&&this.P(r,void 0,t),e}}}if("setter"===r){const{name:r}=n;return function(n){const i=this[r];e.call(this,n),this.requestUpdate(r,i,t);}}throw Error("Unsupported decorator location: "+r)};function k(t){return (e,n)=>"object"==typeof n?A(t,e,n):((t,e,n)=>{const r=e.hasOwnProperty(n);return e.constructor.createProperty(n,r?{...t,wrapped:!0}:t),r?Object.getOwnPropertyDescriptor(e,n):void 0})(t,e,n)}function N(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function P(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function C(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e;}while(i<o)}return i}return 2!==t.length?(e=N,n=(e,n)=>N(t(e),n),r=(e,n)=>t(e)-n):(e=t===N||t===P?t:O,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const s=i(t,e,n,o-1);return s>n&&r(t[s-1],e)>-r(t[s],e)?s-1:s},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e;}while(i<o)}return i}}}function O(){return 0}const U=C(N).right;C((function(t){return null===t?NaN:+t})).center;const T=Math.sqrt(50),j=Math.sqrt(10),q=Math.sqrt(2);function R(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=T?10:o>=j?5:o>=q?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(t*l),u=Math.round(e*l),a/l<t&&++a,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*s,a=Math.round(t/l),u=Math.round(e/l),a*l<t&&++a,u*l>e&&--u),u<a&&.5<=n&&n<2?R(t,e,2*n):[a,u,l]}function D(t,e,n){return R(t=+t,e=+e,n=+n)[2]}var z={value:()=>{}};function X(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[];}return new L(r)}function L(t){this._=t;}function H(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function B(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=z,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}L.prototype=X.prototype={constructor:L,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return {type:t,name:e}}))),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=o[s]).type)i[n]=B(i[n],t.name,e);else if(null==e)for(n in i)i[n]=B(i[n],t.name,null);return this}for(;++s<a;)if((n=(t=o[s]).type)&&(n=H(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new L(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i);},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n);}};var I="http://www.w3.org/1999/xhtml",Y={svg:"http://www.w3.org/2000/svg",xhtml:I,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function F(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Y.hasOwnProperty(e)?{space:Y[e],local:t}:t}function V(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===I&&e.documentElement.namespaceURI===I?e.createElement(t):e.createElementNS(n,t)}}function W(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function G(t){var e=F(t);return (e.local?W:V)(e)}function K(){}function J(t){return null==t?K:function(){return this.querySelector(t)}}function Z(){return []}function Q(t){return null==t?Z:function(){return this.querySelectorAll(t)}}function tt(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e;}}function et(t){return function(){return this.matches(t)}}function nt(t){return function(e){return e.matches(t)}}var rt=Array.prototype.find;function it(){return this.firstElementChild}var ot=Array.prototype.filter;function st(){return Array.from(this.children)}function at(t){return new Array(t.length)}function ut(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e;}function lt(t,e,n,r,i,o){for(var s,a=0,u=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new ut(t,o[a]);for(;a<u;++a)(s=e[a])&&(i[a]=s);}function ct(t,e,n,r,i,o,s){var a,u,l,c=new Map,h=e.length,f=o.length,p=new Array(h);for(a=0;a<h;++a)(u=e[a])&&(p[a]=l=s.call(u,u.__data__,a,e)+"",c.has(l)?i[a]=u:c.set(l,u));for(a=0;a<f;++a)l=s.call(t,o[a],a,o)+"",(u=c.get(l))?(r[a]=u,u.__data__=o[a],c.delete(l)):n[a]=new ut(t,o[a]);for(a=0;a<h;++a)(u=e[a])&&c.get(p[a])===u&&(i[a]=u);}function ht(t){return t.__data__}function ft(t){return "object"==typeof t&&"length"in t?t:Array.from(t)}function pt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function dt(t){return function(){this.removeAttribute(t);}}function vt(t){return function(){this.removeAttributeNS(t.space,t.local);}}function gt(t,e){return function(){this.setAttribute(t,e);}}function yt(t,e){return function(){this.setAttributeNS(t.space,t.local,e);}}function mt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n);}}function wt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n);}}function _t(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function bt(t){return function(){this.style.removeProperty(t);}}function xt(t,e,n){return function(){this.style.setProperty(t,e,n);}}function Et(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n);}}function $t(t,e){return t.style.getPropertyValue(e)||_t(t).getComputedStyle(t,null).getPropertyValue(e)}function St(t){return function(){delete this[t];}}function Mt(t,e){return function(){this[t]=e;}}function At(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n;}}function kt(t){return t.trim().split(/^|\s+/)}function Nt(t){return t.classList||new Pt(t)}function Pt(t){this._node=t,this._names=kt(t.getAttribute("class")||"");}function Ct(t,e){for(var n=Nt(t),r=-1,i=e.length;++r<i;)n.add(e[r]);}function Ot(t,e){for(var n=Nt(t),r=-1,i=e.length;++r<i;)n.remove(e[r]);}function Ut(t){return function(){Ct(this,t);}}function Tt(t){return function(){Ot(this,t);}}function jt(t,e){return function(){(e.apply(this,arguments)?Ct:Ot)(this,t);}}function qt(){this.textContent="";}function Rt(t){return function(){this.textContent=t;}}function Dt(t){return function(){var e=t.apply(this,arguments);this.textContent=e??"";}}function zt(){this.innerHTML="";}function Xt(t){return function(){this.innerHTML=t;}}function Lt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??"";}}function Ht(){this.nextSibling&&this.parentNode.appendChild(this);}function Bt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild);}function It(){return null}function Yt(){var t=this.parentNode;t&&t.removeChild(this);}function Ft(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Wt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on;}}}function Gt(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__);}}(e);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r];}}function Kt(t,e,n){var r=_t(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i);}function Jt(t,e){return function(){return Kt(this,t,e)}}function Zt(t,e){return function(){return Kt(this,t,e.apply(this,arguments))}}ut.prototype={constructor:ut,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Pt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")));},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")));},contains:function(t){return this._names.indexOf(t)>=0}};var Qt=[null];function te(t,e){this._groups=t,this._parents=e;}function ee(){return new te([[document.documentElement]],Qt)}function ne(t,e,n){t.prototype=e.prototype=n,n.constructor=t;}function re(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ie(){}te.prototype=ee.prototype={constructor:te,select:function(t){"function"!=typeof t&&(t=J(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],u=a.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=a[c])&&(s=t.call(o,o.__data__,c,a))&&("__data__"in o&&(s.__data__=o.__data__),l[c]=s);return new te(r,this._parents)},selectAll:function(t){t="function"==typeof t?tt(t):Q(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s,a=e[o],u=a.length,l=0;l<u;++l)(s=a[l])&&(r.push(t.call(s,s.__data__,l,a)),i.push(s));return new te(r,i)},selectChild:function(t){return this.select(null==t?it:function(t){return function(){return rt.call(this.children,t)}}("function"==typeof t?t:nt(t)))},selectChildren:function(t){return this.selectAll(null==t?st:function(t){return function(){return ot.call(this.children,t)}}("function"==typeof t?t:nt(t)))},filter:function(t){"function"!=typeof t&&(t=et(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new te(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,ht);var n,r=e?ct:lt,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var s=o.length,a=new Array(s),u=new Array(s),l=new Array(s),c=0;c<s;++c){var h=i[c],f=o[c],p=f.length,d=ft(t.call(h,h&&h.__data__,c,i)),v=d.length,g=u[c]=new Array(v),y=a[c]=new Array(v);r(h,f,g,y,l[c]=new Array(p),d,e);for(var m,w,_=0,b=0;_<v;++_)if(m=g[_]){for(_>=b&&(b=_+1);!(w=y[b])&&++b<v;);m._next=w||null;}}return (a=new te(a,i))._enter=u,a._exit=l,a},enter:function(){return new te(this._enter||this._groups.map(at),this._parents)},exit:function(){return new te(this._exit||this._groups.map(at),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return "function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l,c=n[u],h=r[u],f=c.length,p=a[u]=new Array(f),d=0;d<f;++d)(l=c[d]||h[d])&&(p[d]=l);for(;u<i;++u)a[u]=n[u];return new te(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=pt);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],u=a.length,l=i[o]=new Array(u),c=0;c<u;++c)(s=a[c])&&(l[c]=s);l.sort(e);}return new te(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return !this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this},attr:function(t,e){var n=F(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?vt:dt:"function"==typeof e?n.local?wt:mt:n.local?yt:gt)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?bt:"function"==typeof e?Et:xt)(t,e,n??"")):$t(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?St:"function"==typeof e?At:Mt)(t,e)):this.node()[t]},classed:function(t,e){var n=kt(t+"");if(arguments.length<2){for(var r=Nt(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return !1;return !0}return this.each(("function"==typeof e?jt:e?Ut:Tt)(n,e))},text:function(t){return arguments.length?this.each(null==t?qt:("function"==typeof t?Dt:Rt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?zt:("function"==typeof t?Lt:Xt)(t)):this.node().innerHTML},raise:function(){return this.each(Ht)},lower:function(){return this.each(Bt)},append:function(t){var e="function"==typeof t?t:G(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:G(t),r=null==e?It:"function"==typeof e?e:J(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Yt)},clone:function(t){return this.select(t?Vt:Ft)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?Gt:Wt,r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var u,l=0,c=a.length;l<c;++l)for(r=0,u=a[l];r<s;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?Zt:Jt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r);}};var oe=.7,se=1/oe,ae="\\s*([+-]?\\d+)\\s*",ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ce=/^#([0-9a-f]{3,8})$/,he=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),fe=new RegExp(`^rgb\\(${le},${le},${le}\\)$`),pe=new RegExp(`^rgba\\(${ae},${ae},${ae},${ue}\\)$`),de=new RegExp(`^rgba\\(${le},${le},${le},${ue}\\)$`),ve=new RegExp(`^hsl\\(${ue},${le},${le}\\)$`),ge=new RegExp(`^hsla\\(${ue},${le},${le},${ue}\\)$`),ye={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function me(){return this.rgb().formatHex()}function we(){return this.rgb().formatRgb()}function _e(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ce.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?be(e):3===n?new $e(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?xe(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?xe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=he.exec(t))?new $e(e[1],e[2],e[3],1):(e=fe.exec(t))?new $e(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=pe.exec(t))?xe(e[1],e[2],e[3],e[4]):(e=de.exec(t))?xe(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ve.exec(t))?Pe(e[1],e[2]/100,e[3]/100,1):(e=ge.exec(t))?Pe(e[1],e[2]/100,e[3]/100,e[4]):ye.hasOwnProperty(t)?be(ye[t]):"transparent"===t?new $e(NaN,NaN,NaN,0):null}function be(t){return new $e(t>>16&255,t>>8&255,255&t,1)}function xe(t,e,n,r){return r<=0&&(t=e=n=NaN),new $e(t,e,n,r)}function Ee(t,e,n,r){return 1===arguments.length?function(t){return t instanceof ie||(t=_e(t)),t?new $e((t=t.rgb()).r,t.g,t.b,t.opacity):new $e}(t):new $e(t,e,n,r??1)}function $e(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r;}function Se(){return `#${Ne(this.r)}${Ne(this.g)}${Ne(this.b)}`}function Me(){const t=Ae(this.opacity);return `${1===t?"rgb(":"rgba("}${ke(this.r)}, ${ke(this.g)}, ${ke(this.b)}${1===t?")":`, ${t})`}`}function Ae(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ke(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ne(t){return ((t=ke(t))<16?"0":"")+t.toString(16)}function Pe(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Oe(t,e,n,r)}function Ce(t){if(t instanceof Oe)return new Oe(t.h,t.s,t.l,t.opacity);if(t instanceof ie||(t=_e(t)),!t)return new Oe;if(t instanceof Oe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Oe(s,a,u,t.opacity)}function Oe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r;}function Ue(t){return (t=(t||0)%360)<0?t+360:t}function Te(t){return Math.max(0,Math.min(1,t||0))}function je(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}ne(ie,_e,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:me,formatHex:me,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ce(this).formatHsl()},formatRgb:we,toString:we}),ne($e,Ee,re(ie,{brighter(t){return t=null==t?se:Math.pow(se,t),new $e(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?oe:Math.pow(oe,t),new $e(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $e(ke(this.r),ke(this.g),ke(this.b),Ae(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Se,formatHex:Se,formatHex8:function(){return `#${Ne(this.r)}${Ne(this.g)}${Ne(this.b)}${Ne(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Me,toString:Me})),ne(Oe,(function(t,e,n,r){return 1===arguments.length?Ce(t):new Oe(t,e,n,r??1)}),re(ie,{brighter(t){return t=null==t?se:Math.pow(se,t),new Oe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?oe:Math.pow(oe,t),new Oe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new $e(je(t>=240?t-240:t+120,i,r),je(t,i,r),je(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Oe(Ue(this.h),Te(this.s),Te(this.l),Ae(this.opacity))},displayable(){return (0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ae(this.opacity);return `${1===t?"hsl(":"hsla("}${Ue(this.h)}, ${100*Te(this.s)}%, ${100*Te(this.l)}%${1===t?")":`, ${t})`}`}}));var qe=t=>()=>t;function Re(t){return 1==(t=+t)?De:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):qe(isNaN(e)?n:e)}}function De(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):qe(isNaN(t)?e:t)}var ze=function t(e){var n=Re(e);function r(t,e){var r=n((t=Ee(t)).r,(e=Ee(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),s=De(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function Xe(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Le(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),s=new Array(r);for(n=0;n<i;++n)o[n]=We(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=o[n](t);return s}}function He(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Be(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ie(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=We(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Ye=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fe=new RegExp(Ye.source,"g");function Ve(t,e){var n,r,i,o=Ye.lastIndex=Fe.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=Ye.exec(t))&&(r=Fe.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:Be(n,r)})),o=Fe.lastIndex;return o<e.length&&(i=e.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})}function We(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?qe(e):("number"===i?Be:"string"===i?(n=_e(e))?(e=n,ze):Ve:e instanceof _e?ze:e instanceof Date?He:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?Le:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ie:Be:Xe))(t,e)}function Ge(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ke,Je=180/Math.PI,Ze={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qe(t,e,n,r,i,o){var s,a,u;return (s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Je,skewX:Math.atan(u)*Je,scaleX:s,scaleY:a}}function tn(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],u=[];return o=t(o),s=t(s),function(t,r,i,o,s,a){if(t!==i||r!==o){var u=s.push("translate(",null,e,null,n);a.push({i:u-4,x:Be(t,i)},{i:u-2,x:Be(r,o)});}else (i||o)&&s.push("translate("+i+e+o+n);}(o.translateX,o.translateY,s.translateX,s.translateY,a,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Be(t,e)})):e&&n.push(i(n)+"rotate("+e+r);}(o.rotate,s.rotate,a,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Be(t,e)}):e&&n.push(i(n)+"skewX("+e+r);}(o.skewX,s.skewX,a,u),function(t,e,n,r,o,s){if(t!==n||e!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:Be(t,n)},{i:a-2,x:Be(e,r)});}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")");}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,u),o=s=null,function(t){for(var e,n=-1,r=u.length;++n<r;)a[(e=u[n]).i]=e.x(t);return a.join("")}}}var en,nn,rn=tn((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ze:Qe(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),on=tn((function(t){return null==t?Ze:(Ke||(Ke=document.createElementNS("http://www.w3.org/2000/svg","g")),Ke.setAttribute("transform",t),(t=Ke.transform.baseVal.consolidate())?Qe((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ze)}),", ",")",")"),sn=0,an=0,un=0,ln=0,cn=0,hn=0,fn="object"==typeof performance&&performance.now?performance:Date,pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17);};function dn(){return cn||(pn(vn),cn=fn.now()+hn)}function vn(){cn=0;}function gn(){this._call=this._time=this._next=null;}function yn(t,e,n){var r=new gn;return r.restart(t,e,n),r}function mn(){cn=(ln=fn.now())+hn,sn=an=0;try{!function(){dn(),++sn;for(var t,e=en;e;)(t=cn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--sn;}();}finally{sn=0,function(){var t,e,n=en,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:en=e);nn=t,_n(r);}(),cn=0;}}function wn(){var t=fn.now(),e=t-ln;e>1e3&&(hn-=e,ln=t);}function _n(t){sn||(an&&(an=clearTimeout(an)),t-cn>24?(t<1/0&&(an=setTimeout(mn,t-fn.now()-hn)),un&&(un=clearInterval(un))):(un||(ln=fn.now(),un=setInterval(wn,1e3)),sn=1,pn(mn)));}function bn(t,e,n){var r=new gn;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e);}),e,n),r}gn.prototype=yn.prototype={constructor:gn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?dn():+n)+(null==e?0:+e),this._next||nn===this||(nn?nn._next=this:en=this,nn=this),this._call=t,this._time=n,_n();},stop:function(){this._call&&(this._call=null,this._time=1/0,_n());}};var xn=X("start","end","cancel","interrupt"),En=[];function $n(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay);}function s(o){var l,c,h,f;if(1!==n.state)return u();for(l in i)if((f=i[l]).name===n.name){if(3===f.state)return bn(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[l]):+l<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[l]);}if(bn((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o));})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1;}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),u());}function u(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition;}i[e]=n,n.timer=yn(o,0,n.time);}(t,n,{name:e,index:r,group:i,on:xn,tween:En,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0});}function Sn(t,e){var n=An(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Mn(t,e){var n=An(t,e);if(n.state>3)throw new Error("too late; already running");return n}function An(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function kn(t,e){var n,r;return function(){var i=Mn(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r;}}function Nn(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Mn(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=a;break}u===l&&i.push(a);}o.tween=i;}}function Pn(t,e,n){var r=t._id;return t.each((function(){var t=Mn(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments);})),function(t){return An(t,r).value[e]}}function Cn(t,e){var n;return ("number"==typeof e?Be:e instanceof _e?ze:(n=_e(e))?(e=n,ze):Ve)(t,e)}function On(t){return function(){this.removeAttribute(t);}}function Un(t){return function(){this.removeAttributeNS(t.space,t.local);}}function Tn(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function jn(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function qn(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return (s=this.getAttribute(t))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttribute(t);}}function Rn(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return (s=this.getAttributeNS(t.space,t.local))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttributeNS(t.space,t.local);}}function Dn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n));}}(t,i)),n}return i._value=e,i}function zn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n));}}(t,i)),n}return i._value=e,i}function Xn(t,e){return function(){Sn(this,t).delay=+e.apply(this,arguments);}}function Ln(t,e){return e=+e,function(){Sn(this,t).delay=e;}}function Hn(t,e){return function(){Mn(this,t).duration=+e.apply(this,arguments);}}function Bn(t,e){return e=+e,function(){Mn(this,t).duration=e;}}var In=ee.prototype.constructor;function Yn(t){return function(){this.style.removeProperty(t);}}var Fn=0;function Vn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r;}function Wn(){return ++Fn}var Gn=ee.prototype;Vn.prototype={constructor:Vn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=J(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,u,l=r[s],c=l.length,h=o[s]=new Array(c),f=0;f<c;++f)(a=l[f])&&(u=t.call(a,a.__data__,f,l))&&("__data__"in a&&(u.__data__=a.__data__),h[f]=u,$n(h[f],e,n,f,h,An(a,n)));return new Vn(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Q(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u,l=r[a],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,p=t.call(u,u.__data__,h,l),d=An(u,n),v=0,g=p.length;v<g;++v)(f=p[v])&&$n(f,e,n,v,p,d);o.push(p),s.push(u);}return new Vn(o,s,e,n)},selectChild:Gn.selectChild,selectChildren:Gn.selectChildren,filter:function(t){"function"!=typeof t&&(t=et(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new Vn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u,l=e[a],c=n[a],h=l.length,f=s[a]=new Array(h),p=0;p<h;++p)(u=l[p]||c[p])&&(f[p]=u);for(;a<r;++a)s[a]=e[a];return new Vn(s,this._parents,this._name,this._id)},selection:function(){return new In(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Wn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,l=0;l<u;++l)if(s=a[l]){var c=An(s,e);$n(s,t,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease});}return new Vn(r,this._parents,t,n)},call:Gn.call,nodes:Gn.nodes,node:Gn.node,size:Gn.size,empty:Gn.empty,each:Gn.each,on:function(t,e){var n=this._id;return arguments.length<2?An(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return (t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Sn:Mn;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i;}}(n,t,e))},attr:function(t,e){var n=F(t),r="transform"===n?on:Cn;return this.attrTween(t,"function"==typeof e?(n.local?Rn:qn)(n,r,Pn(this,"attr."+t,e)):null==e?(n.local?Un:On)(n):(n.local?jn:Tn)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return (n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=F(t);return this.tween(n,(r.local?Dn:zn)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?rn:Cn;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=$t(this,t),s=(this.style.removeProperty(t),$t(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}(t,r)).on("end.style."+t,Yn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var s=$t(this,t),a=n(this),u=a+"";return null==a&&(this.style.removeProperty(t),u=a=$t(this,t)),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a))}}(t,r,Pn(this,"style."+t,e))).each(function(t,e){var n,r,i,o,s="style."+e,a="end."+s;return function(){var u=Mn(this,t),l=u.on,c=null==u.value[s]?o||(o=Yn(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(a,i=c),u.on=r;}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var s=$t(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return (r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n);}}(t,o,n)),r}return o._value=e,o}(t,e,n??""))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=e??"";}}(Pn(this,"text",t)):function(t){return function(){this.textContent=t;}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return (e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e);}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this);}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=An(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?kn:Nn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Xn:Ln)(e,t)):An(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Hn:Bn)(e,t)):An(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Mn(this,t).ease=e;}}(e,t)):An(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Mn(this,t).ease=n;}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},u={value:function(){0==--i&&o();}};n.each((function(){var n=Mn(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),n.on=e;})),0===i&&o();}))},[Symbol.iterator]:Gn[Symbol.iterator]};var Kn={time:null,delay:0,duration:250,ease:function(t){return ((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Jn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Zn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return [r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Qn(t){return (t=Zn(Math.abs(t)))?t[1]:NaN}ee.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,s=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete t.__transition;}}(this,t);}))},ee.prototype.transition=function(t){var e,n;t instanceof Vn?(e=t._id,t=t._name):(e=Wn(),(n=Kn).time=dn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,l=0;l<u;++l)(s=a[l])&&$n(s,t,e,l,a,n||Jn(s,e));return new Vn(r,this._parents,t,e)};var tr,er=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nr(t){if(!(e=er.exec(t)))throw new Error("invalid format: "+t);var e;return new rr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function rr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+"";}function ir(t,e){var n=Zn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}nr.prototype=rr.prototype,rr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var or={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ir(100*t,e),r:ir,s:function(t,e){var n=Zn(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(tr=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Zn(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function sr(t){return t}var ar,ur,lr,cr=Array.prototype.map,hr=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function fr(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?sr:(e=cr.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(t.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?sr:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(cr.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=nr(t)).fill,n=t.align,h=t.sign,f=t.symbol,p=t.zero,d=t.width,v=t.comma,g=t.precision,y=t.trim,m=t.type;"n"===m?(v=!0,m="g"):or[m]||(void 0===g&&(g=12),y=!0,m="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var w="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",_="$"===f?o:/[%p]/.test(m)?u:"",b=or[m],x=/[defgprs%]/.test(m);function E(t){var i,o,u,f=w,E=_;if("c"===m)E=b(t)+E,t="";else {var $=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:b(Math.abs(t),g),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0);}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),$&&0==+t&&"+"!==h&&($=!1),f=($?"("===h?h:l:"-"===h||"("===h?"":h)+f,E=("s"===m?hr[8+tr/3]:"")+E+($&&"("===h?")":""),x)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){E=(46===u?s+t.slice(i+1):t.slice(i))+E,t=t.slice(0,i);break}}v&&!p&&(t=r(t,1/0));var S=f.length+t.length+E.length,M=S<d?new Array(d-S+1).join(e):"";switch(v&&p&&(t=r(M+t,M.length?d-E.length:1/0),M=""),n){case"<":t=f+t+E+M;break;case"=":t=f+M+t+E;break;case"^":t=M.slice(0,S=M.length>>1)+f+t+E+M.slice(S);break;default:t=M+f+t+E;}return a(t)}return g=void 0===g?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),E.toString=function(){return t+""},E}return {format:h,formatPrefix:function(t,e){var n=h(((t=nr(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Qn(e)/3))),i=Math.pow(10,-r),o=hr[8+r/3];return function(t){return n(i*t)+o}}}}function pr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);}return this}function dr(t){return +t}ar=fr({thousands:",",grouping:[3],currency:["$",""]}),ur=ar.format,lr=ar.formatPrefix;var vr=[0,1];function gr(t){return t}function yr(t,e){return (e-=t=+t)?function(n){return (n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n;}function mr(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=yr(i,r),o=n(s,o)):(r=yr(r,i),o=n(o,s)),function(t){return o(r(t))}}function wr(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=yr(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=U(t,e,1,r)-1;return o[n](i[n](e))}}function _r(){var t,e,n,r,i,o,s=vr,a=vr,u=We,l=gr;function c(){var t=Math.min(s.length,a.length);return l!==gr&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(s[0],s[t-1])),r=t>2?wr:mr,i=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(s.map(t),a,u)))(t(l(e)))}return h.invert=function(n){return l(e((o||(o=r(a,s.map(t),Be)))(n)))},h.domain=function(t){return arguments.length?(s=Array.from(t,dr),c()):s.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),c()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),u=Ge,c()},h.clamp=function(t){return arguments.length?(l=!!t||gr,c()):l!==gr},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}function br(t,e,n,r){var i,o=function(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?D(e,t,n):D(t,e,n);return (r?-1:1)*(i<0?1/-i:i)}(t,e,n);switch((r=nr(r??",f")).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qn(e)/3)))-Qn(Math.abs(t)))}(o,s))||(r.precision=i),lr(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Qn(e)-Qn(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Qn(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type));}return ur(r)}function xr(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return [];if((t=+t)==(e=+e))return [t];const r=e<t,[i,o,s]=r?R(e,t,n):R(t,e,n);if(!(o>=i))return [];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let t=0;t<a;++t)u[t]=(o-t)/-s;else for(let t=0;t<a;++t)u[t]=(o-t)*s;else if(s<0)for(let t=0;t<a;++t)u[t]=(i+t)/-s;else for(let t=0;t<a;++t)u[t]=(i+t)*s;return u}(n[0],n[n.length-1],t??10)},t.tickFormat=function(t,n){var r=e();return br(r[0],r[r.length-1],t??10,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),s=0,a=o.length-1,u=o[s],l=o[a],c=10;for(l<u&&(i=u,u=l,l=i,i=s,s=a,a=i);c-- >0;){if((i=D(u,l,n))===r)return o[s]=u,o[a]=l,e(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else {if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i;}r=i;}return t},t}function Er(t,e,n){this.k=t,this.x=e,this.y=n;}Er.prototype={constructor:Er,scale:function(t){return 1===t?this:new Er(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Er(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return [t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return [(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return (t-this.x)/this.k},invertY:function(t){return (t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return "translate("+this.x+","+this.y+") scale("+this.k+")"}},Er.prototype;const $r=t=>t.split("\n").slice(1).filter((t=>""!==t.trim())).map((t=>{const e=t.trim().split(" ");if(5===e.length){const[t,n,r,i,o]=e;return [+t,+n,+o]}if(3===e.length){const[t,n,r]=e;return [+t,+n,+r]}throw new Error("The file is not valid")})),Sr=(t,e,n)=>t.filter((([t,r,i])=>Math.abs(t-r)>=e&&i>n)),Mr=(t,e,n)=>{const r=Sr($r(t),e,n),i={},o=[];return r.forEach((([t,e])=>{i[t]||i[e]?i[t]&&!i[e]?(i[e]=i[t],o[i[t]].push(e)):!i[t]&&i[e]?(i[t]=i[e],o[i[t]].push(t)):i[t]&&i[e]&&i[t]!==i[e]&&o[i[e]].forEach((e=>{o[i[t]].push(e),i[e]=i[t];})):(i[t]=o.length,i[e]=o.length,o.push([t,e]));})),{contacts:o.filter(((t,e)=>Object.values(i).includes(e))).map((t=>t.sort(((t,e)=>t-e))))}},Ar=(t,e,n)=>{const r=$r(t);return kr(Sr(r,e,n))},kr=t=>{const e={};return t.forEach((([t,n])=>{e[t]||(e[t]=new Set),e[n]||(e[n]=new Set),e[t].add(n),e[n].add(t);})),{contacts:e,maxNumberOfContacts:Math.max(...Object.values(e).map((t=>t.size)))}},Nr=t=>{const e=[],n=new Set;return Object.entries(t).forEach((([t,r])=>{r.forEach((r=>{let i=`${t}-${r}`,o=[+t,+r];+t>+r&&(i=`${r}-${t}`,o=[+r,+t]),n.has(i)||(n.add(i),e.push(o));}));})),e};var Pr;const Cr=function t(){var e=_r()(gr,gr);return e.copy=function(){return n=e,t().domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown());var n;},pr.apply(e,arguments),xr(e)}([0,1],["orange","blue"]),Or=(t,e,n)=>new CustomEvent("change",{detail:{type:t,target:e,highlight:n?n.map((t=>`${t}:${t}`)).join(","):null},bubbles:!0,cancelable:!0});let Ur=class extends mr$1{constructor(){super(...arguments),this.minDistance=0,this.minProbability=.7,this._rawData=null,this._linksData=null,Pr.set(this,void 0);}willUpdate(t){(t.has("minDistance")||t.has("minProbability"))&&this._rawData&&(r(this,Pr,kr(Sr(this._rawData,this.minDistance||0,this.minProbability||.7)),"f"),this.createTrack());}set contacts(t){if("string"==typeof t)this._rawData=$r(t);else {if(!Array.isArray(t))throw new Error("data is not in a valid format");this._rawData=t;}r(this,Pr,kr(Sr(this._rawData,this.minDistance||0,this.minProbability||.7)),"f"),this.createTrack();}get selected(){var t;return null===(t=n(this,Pr,"f"))||void 0===t?void 0:t.selected}createTrack(){var t;n(this,Pr,"f")&&(null===(t=this.svg)||void 0===t||t.selectAll("g").remove(),this.svg=function(t){return "string"==typeof t?new te([[document.querySelector(t)]],[document.documentElement]):new te([[t]],Qt)}(this).selectAll("svg").attr("width",this.width).attr("height",this.height).on("click",(t=>{var e;n(this,Pr,"f")&&((null===(e=t.target)||void 0===e?void 0:e.classList.contains("contact-point"))||(n(this,Pr,"f").selected=void 0,n(this,Pr,"f").isHold=!1,this.refreshSelected()));})),this.svg&&(this.seqG=this.svg.append("g").attr("class","sequence-features"),this.createFeatures(),this.margins=this.svg.append("g").attr("class","margin")));}_getColor(t){var e;return (null===(e=n(this,Pr,"f"))||void 0===e?void 0:e.contacts[t])?Cr(n(this,Pr,"f").contacts[t].size/n(this,Pr,"f").maxNumberOfContacts):""}_dispatchSelectNode(t){n(this,Pr,"f")&&(n(this,Pr,"f").selected=t,this.dispatchEvent(Or("mouseover",this,Array.from(n(this,Pr,"f").contacts[t]).concat(+t).sort())));}createFeatures(){var t,e,r;if(!n(this,Pr,"f"))return;null===(t=this.seqG)||void 0===t||t.selectAll("g.contact-group").remove();const i=null===(e=this.seqG)||void 0===e?void 0:e.append("g").attr("class","contact-group");null===(r=this.seqG)||void 0===r||r.append("g").attr("class","links-group"),i&&(this.contactPoints=i.selectAll(".contact-point").data(Object.keys(n(this,Pr,"f").contacts).map(Number)).enter().append("circle").attr("class","contact-point").attr("fill",(t=>this._getColor(t))).attr("id",(t=>`cp_${t}`)).style("stroke-width",2).on("mouseover",((t,e)=>{var r;(null===(r=n(this,Pr,"f"))||void 0===r?void 0:r.isHold)||(this._dispatchSelectNode(e),this.refreshSelected());})).on("mouseout",(()=>{var t;n(this,Pr,"f")&&!(null===(t=n(this,Pr,"f"))||void 0===t?void 0:t.isHold)&&(n(this,Pr,"f").selected=void 0,this.dispatchEvent(Or("mouseout",this)),this.refreshSelected());})).on("click",((t,e)=>{t.preventDefault(),n(this,Pr,"f")&&(n(this,Pr,"f").isHold=!0,this._dispatchSelectNode(e),this.refreshSelected());}))),this._linksData=Nr(n(this,Pr,"f").contacts);}getRadius(t){return (t?.6:.4)*Math.max(2,Math.min(this.height,this.getSingleBaseWidth()))}arc(t){const e=this.getXFromSeqPosition(t[0])+this.getSingleBaseWidth()/2,n=this.getXFromSeqPosition(t[1])+this.getSingleBaseWidth()/2,r=.5*this.height,i=this.getSingleBaseWidth();return `M ${e} ${r} C ${e-i} ${-r/4} ${n+i} ${-r/4} ${n} ${r}`}refreshSelected(){var t,e,r;if(!n(this,Pr,"f")||!this.contactPoints)return;this.contactPoints.transition().attr("r",(t=>{var e,r,i;return this.getRadius(t===(null===(e=n(this,Pr,"f"))||void 0===e?void 0:e.selected)||(null===(r=n(this,Pr,"f"))||void 0===r?void 0:r.contacts[t].has((null===(i=n(this,Pr,"f"))||void 0===i?void 0:i.selected)||0))||!1)})).attr("stroke",(t=>{var e;return t===(null===(e=n(this,Pr,"f"))||void 0===e?void 0:e.selected)&&n(this,Pr,"f").isHold?"rgb(127 255 127)":null})).style("opacity",(t=>{var e;return t===(null===(e=n(this,Pr,"f"))||void 0===e?void 0:e.selected)?1:.4}));const i=n(this,Pr,"f").selected&&(null===(t=this._linksData)||void 0===t?void 0:t.filter((t=>{var e;return t.includes(+((null===(e=n(this,Pr,"f"))||void 0===e?void 0:e.selected)||0))})))||[],o=null===(e=this.seqG)||void 0===e?void 0:e.selectAll("g.links-group").selectAll(".contact-link").data(i,(t=>`${t[0]}_${t[1]}`));null==o||o.exit().remove(),null==o||o.enter().append("path").attr("class","contact-link").attr("fill","transparent").attr("stroke",this._getColor((null===(r=n(this,Pr,"f"))||void 0===r?void 0:r.selected)||0)).attr("stroke-width",n(this,Pr,"f").isHold?3:1).style("opacity",1).style("pointer-events","none").attr("d",(t=>this.arc(t))).attr("id",(([t,e])=>`cn_${t}_${e}`)),null==o||o.attr("d",(t=>this.arc(t))).attr("stroke-width",n(this,Pr,"f").isHold?3:1);}refresh(){n(this,Pr,"f")&&this.contactPoints&&(this.contactPoints.attr("cx",(t=>this.getXFromSeqPosition(t)+this.getSingleBaseWidth()/2)).attr("cy",.5*this.height),this.refreshSelected());}};Pr=new WeakMap,e([k({type:Number,attribute:"min-distance"})],Ur.prototype,"minDistance",void 0),e([k({type:Number,attribute:"min-probability"})],Ur.prototype,"minProbability",void 0),Ur=e([(t=>(e,n)=>{void 0!==n?n.addInitializer((()=>{customElements.define(t,e);})):customElements.define(t,e);})("nightingale-links")],Ur);var Tr=Ur;

var index = /*#__PURE__*/Object.freeze({
    __proto__: null,
    contactObjectToLinkList: Nr,
    default: Tr,
    filterContacts: Sr,
    getContactsObject: kr,
    parseLinks: Ar,
    parseLinksAssociative: Mr,
    parseToRowData: $r
});

export { MSAViewer, extractUrl, handleLabelClick };
//# sourceMappingURL=index.js.map
